(self.webpackChunk_finos_perspective_docs=self.webpackChunk_finos_perspective_docs||[]).push([[195],{6010:function(e,t,r){"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{Z:function(){return a}})},7196:function(e,t,r){"use strict";r.r(t),r.d(t,{PerspectiveViewerDemo:function(){return O}});var n=r(7115),a=(r(6246),r(8049),r(7495),r(5421)),o=r(7378),i=r(6010),l=r(3099),s=["AAPL.N","MSFT.N","AMZN.N","GOOGL.N","FB.N","TSLA.N","BABA.N","TSM.N","V.N","NVDA.N","JPM.N","JNJ.N","WMT.N","UNH.N","MA.N","BAC.N","DIS.N","ASML.N","ADBE.N","CMCSA.N","NKE.N","XOM.N","TM.N","KO.N","ORCL.N","NFLX.N"],c=["Homer","Marge","Bart","Lisa","Maggie","Barney","Ned","Moe"],u=0;function d(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}function g(){return u%=1e3,{name:s[Math.floor(Math.random()*s.length)],client:c[Math.floor(Math.random()*c.length)],lastUpdate:new Date,chg:10*d(),bid:5*d()+95,ask:5*d()+105,vol:5*d()+105,id:u++}}const p={sparkgrid:{plugin:"Datagrid",title:"Market Monitor",plugin_config:{columns:{chg:{bg_gradient:16.5,number_bg_mode:"gradient"},"chg (+)":{fg_gradient:15.83,number_fg_mode:"bar"},"chg (-)":{fg_gradient:14.58,number_fg_mode:"bar"}},editable:!1,scroll_lock:!0},settings:!0,group_by:["name"],split_by:["client"],columns:["chg (-)","chg","chg (+)"],filter:[],sort:[["chg","desc"]],expressions:{"chg (-)":'if("chg"<0){"chg"}else{0}',"chg (+)":'if("chg">0){"chg"}else{0}'},aggregates:{"chg (+)":"avg",chg:"avg","chg (-)":"avg"}},datagrid:{plugin:"datagrid",title:"Blotter",columns:["ask","bid","chg"],sort:[["name","desc"],["lastUpdate","desc"]],aggregates:{name:"last",lastUpdate:"last"},group_by:["name","lastUpdate"],split_by:["client"],plugin_config:{}},"x bar":{title:"Px (\u0394)",columns:["chg"],plugin:"X Bar",sort:[["chg","asc"]],group_by:["name"],split_by:["client"]},"y line":{title:"Time Series (Px)",plugin:"Y Line",group_by:["lastUpdate"],split_by:[],sort:[["lastUpdate","desc"]],split_by:["client"],columns:["bid"],aggregates:{bid:"avg",chg:"avg",name:"last"}},"xy scatter":{title:"Spread Scatter",plugin:"X/Y Scatter",group_by:["name"],split_by:[],columns:["bid","ask","chg","vol",null,"name"],aggregates:{bid:"avg",ask:"avg",vol:"avg",name:"dominant"},sort:[]},treemap:{plugin:"Treemap",title:"Volume Map",group_by:["name","client"],split_by:[],columns:["vol","chg"],aggregates:{bid:"sum",chg:"sum",name:"last"},sort:[["name","desc"],["chg","desc"]]},heatmap:{title:"Spread Heatmap",columns:["name"],plugin:"Heatmap",expressions:{'bucket("bid",2)':'bucket("bid",2)','bucket("ask",2)':'bucket("ask",2)'},group_by:['bucket("bid",2)'],split_by:['bucket("ask",2)'],sort:[],aggregates:{}}};var _="heroBannerViewer_f_ls",h="container_G6kv",b="visButtons_WVUn",f="visButton_uyAq",m="timecontrols_MxjC",w="visButtonActive_J9UB",y="freqSlider_bTfl";const v=n.ZP.shared_worker();let x,S,k,C=100,A=!0,E=0,V="sparkgrid";async function P(e,t){void 0===x&&(x=await async function(e){for(var t=[],r=0;r<1e3;r++)t.push(g());var n=v.table(t,{index:"id"});return setTimeout((async function(){N(await n,e)})),n}(t)),void 0!==S&&S!==t&&(S.delete(),S=void 0),void 0===S&&(S=t,S.load(x)),L(t,V,{theme:"dark"===e?"Pro Dark":"Pro Light"})}function M(e){let t;return e.name===e.selected&&(t=w),o.createElement("div",{onMouseOver:e.onHover,className:(0,i.Z)(f,t),id:e.name},e.name)}function O(){const{colorMode:e}=(0,a.I)(),[t,r]=(0,o.useState)(V),[n,s]=(0,o.useState)(C),c=(0,o.useRef)();k=r;const u=(0,o.useCallback)((e=>{E=0,r(e.target.getAttribute("id")),L(c.current,`${e.target.getAttribute("id")}`)}),[c]),d=(0,o.useCallback)((e=>{C=-1.8*e.target.value+190,s(C)}),[n]);return(0,o.useEffect)((()=>(A=!1,P(e,c.current),()=>{A=!0})),[c,e]),o.createElement("div",{className:(0,i.Z)(h)},o.createElement("perspective-viewer",{ref:c,class:(0,i.Z)("nosuperstore",_)}),o.createElement("div",{className:(0,i.Z)(b)},o.createElement(l.Z,null,(()=>Object.keys(p).map((e=>o.createElement(M,{name:e,id:e,key:e,selected:t,onHover:u})))))),o.createElement("div",{id:"timecontrols",class:(0,i.Z)(m)},o.createElement("span",null,n>=189?"paused":`${(1e3/n*10).toFixed(0)} msg/s`),o.createElement("input",{id:"velocity","aria-label":"Demo update rate in messages per second",type:"range",className:(0,i.Z)(y),defaultValue:Math.round(5/-9*(n-190)),onInput:d})))}function N(e,t){if(!A&&C<=189.9&&document.documentElement.clientHeight-window.scrollY>0){let t=new Array(10);for(let e=0;e<10;e++)t[e]=g();e.update(t)}E+=C,setTimeout((()=>N(e,t)),C)}function L(e,t,r){void 0===r&&(r={}),V=t,e.restore({...p[V],...r})}},3578:function(e,t){t.Z=[{name:"Default",description:"Data grid",config:{}},{name:"Group By 1",description:"Data grid with 1 level of groups for rows",config:{group_by:["Sub-Category"]},aggregates:"dominant"},{name:"Group By 2",description:"Data grid with 2 levels of groups for rows",config:{group_by:["Category","Sub-Category"]}},{name:"Split By",description:"Data grid with 1 level of categories for columns",config:{split_by:["Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Split By 2",description:"Data grid with 2 levels of categories and columns",config:{split_by:["Category","Sub-Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Both",description:"Data grid with grouped rows and categorized columns",config:{group_by:["Region"],split_by:["Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Both 2",description:"Data grid with 2 levels of groups and 2 levels of categories",config:{group_by:["Region","State"],split_by:["Category","Sub-Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Background Row And Split By",description:"Data grid with groups, categories, and solid color conditional highlighting",config:{group_by:["State"],split_by:["Sub-Category"],columns:["Profit"],sort:[["Profit","col asc"]],plugin_config:{columns:{Profit:{number_color_mode:"background"}}}}},{name:"Gradient Row And Split By",description:"Data grid with groups, categories, and gradient conditional highlighting",config:{group_by:["State"],split_by:["Sub-Category"],columns:["Profit"],sort:[["Profit","col asc"]],plugin_config:{columns:{Profit:{number_color_mode:"gradient",gradient:1600}}}}},{name:"Background Row And Split By",description:"Data grid with groups, categories, and a bar chart",config:{group_by:["State"],split_by:["Sub-Category"],columns:["Sales"],aggregates:{Sales:"avg"},plugin_config:{columns:{Sales:{number_color_mode:"bar",gradient:600}}}}},{name:"Foreground Colors",description:"Data grid with 6 categories. 3 categories have conditional formatting using foreground colors.",config:{columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],plugin_config:{columns:{Profit:{pos_color:"#32cd82",neg_color:"#f50fed"},Sales:{pos_color:"#780aff",neg_color:"#f5ac0f"},Discount:{pos_color:"#f5ac0f",neg_color:"#780aff"}}},sort:[["Sub-Category","desc"]]}},{name:"Background Colors",description:"Data grid with 6 categories. 3 categories have custom, solid color conditional formatting.",config:{plugin:"Datagrid",plugin_config:{columns:{Discount:{neg_bg_color:"#780aff",number_bg_mode:"color",number_fg_mode:"disabled",pos_bg_color:"#f5ac0f"},Profit:{neg_bg_color:"#f50fed",number_bg_mode:"color",number_fg_mode:"disabled",pos_bg_color:"#32cd82"},Sales:{neg_bg_color:"#f5ac0f",number_bg_mode:"color",number_fg_mode:"disabled",pos_bg_color:"#780aff"}},editable:!1,scroll_lock:!0},columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],sort:[["Sub-Category","desc"]]}},{name:"Gradient Colors",description:"Data grid with 6 categories. 3 categories have custom, gradient color conditional formatting.",config:{columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],plugin_config:{columns:{Profit:{number_color_mode:"gradient",gradient:600,pos_color:"#32cd82",neg_color:"#f50fed"},Sales:{number_color_mode:"gradient",gradient:2268,pos_color:"#780aff",neg_color:"#f5ac0f"},Discount:{number_color_mode:"gradient",gradient:.8,pos_color:"#f5ac0f",neg_color:"#780aff"}}},sort:[["Sub-Category","desc"]]}},{name:"Bar Colors",description:"Data grid with 6 categories. 3 categories have custom colored bars.",config:{columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],plugin_config:{columns:{Profit:{number_color_mode:"bar",gradient:600,pos_color:"#32cd82",neg_color:"#f50fed"},Sales:{number_color_mode:"bar",gradient:2268,pos_color:"#780aff",neg_color:"#f5ac0f"},Discount:{number_color_mode:"bar",gradient:.8,pos_color:"#f5ac0f",neg_color:"#780aff"}}},sort:[["Sub-Category","desc"]]}},{name:"Thermometer",description:"Data grid with 1 group and 3 columns. 2 columns use bars and 1 column uses gradient conditional highlighting.",config:{group_by:["State"],columns:["Profit (-)","Profit","Profit (+)"],plugin_config:{columns:{"Profit (-)":{number_color_mode:"bar",gradient:1e4},Profit:{number_color_mode:"gradient",gradient:1e4},"Profit (+)":{number_color_mode:"bar",gradient:1e4}}},expressions:{"Profit (-)":'if("Profit"<0){"Profit"}else{0}',"Profit (+)":'if("Profit">0){"Profit"}else{0}'}}},{name:"Y Bar",description:"Bar chart with 17 bars. X is 'Sub-Category', and Y is 'Sales'.",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Sales"]}},{name:"Y Bar, Sorted Desc By Y-Axis",description:"Bar chart with 17 bars sorted descending. X is 'Sub-Category', and Y is 'Sales'.",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Row And Split By",description:"Stacked bar chart with 17 bars. X is 'Sub-Category', Y is 'Sales', and subgroup is 'Ship Mode'",config:{plugin:"Y Bar",group_by:["Sub-Category"],split_by:["Ship Mode"],columns:["Sales"]}},{name:"Y Bar - Group By 2 Sorted",description:"Bar chart with 3 categories and 17 total subcategories, sorted descending within each category.",config:{plugin:"Y Bar",group_by:["Category","Sub-Category"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Group By 2 And Split By Sorted",description:"Bar chart with 3 colored categories and 17 total subcategories, sorted descending within each category.",config:{plugin:"Y Bar",group_by:["Category","Sub-Category"],split_by:["Category"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Group By 2 And 2 Split By Sorted",description:"Stacked bar chart with 3 categories and 17 total subcategories, sorted descending within each category. X is 'Category, Sub-Category', y is 'Sales', subgroup is 'Region'",config:{plugin:"Y Bar",group_by:["Category","Sub-Category"],split_by:["Category","Region"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Group By 2 And 2 Split By Sorted 2",description:"Bar chart. X is 'State', Y is 'Profit'. Each state has, when applicable, 2 bars: Profit and Loss. States are sorted by Net.",config:{plugin:"Y Bar",group_by:["State"],split_by:["Profit (-/+)"],columns:["Profit"],expressions:{"Profit (-/+)":'if("Profit"<0){1}else{0}'},sort:[["Profit","desc"]]},viewport:{width:600,height:450}},{name:"Y Bar Multi Axis",description:"Groupd bar chart. X is 'Sub-Category', Y is 'Quantity' and 'Sales'. Each X value has 2 bars.",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Quantity","Sales"],aggregates:{Sales:"avg"},sort:[["Sales","desc"]]}},{name:"Y Bar Multi Axis - SPlit",description:"Groupd bar chart. X is 'Sub-Category', Y is 'Quantity', and the second Y is 'Sales'. Each X value has 2 bars.",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Quantity","Sales"],sort:[["Sales","desc"]],aggregates:{Sales:"avg"},plugin_config:{splitMainValues:["Sales"]}}},{name:"X Bar",description:"Horizontal bar chart with 17 bars. X is 'Sub-Category' and Y is 'Sales'.",config:{plugin:"X Bar",group_by:["Sub-Category"],columns:["Sales"]}},{name:"X Bar",description:"Grouped horizontal bar chart. X is 'Sub-Category' and Y is 'Quantity, Profit'.",config:{plugin:"X Bar",group_by:["Sub-Category"],columns:["Quantity","Profit"]}},{name:"X Bar, Sorted Desc By X-Axis",description:"Sorted horizontal bar chart. X is 'Sub-Category' and Y is 'Sales'.",config:{plugin:"X Bar",group_by:["Sub-Category"],columns:["Sales"],sort:[["Sales","asc"]]}},{name:"X Bar - Row And Split By",description:"Stacked horizontal bar chart. X is 'Sub-Category', Y is 'Sales', and subgroup is 'Region'",config:{plugin:"X Bar",group_by:["Sub-Category"],split_by:["Region"],columns:["Sales"]}},{name:"X Bar - Row And Split By",description:"Sorted stacked horizontal bar chart. X is 'Sub-Category', Y is 'Sales', and subgroup is 'Region'",config:{plugin:"X Bar",group_by:["Sub-Category"],split_by:["Region"],columns:["Sales"],sort:[["Sales","asc"]]}},{name:"Y Line - Datetime Axis",description:"Line chart. X is Order Date from January 2014 to December 2017. Y is 'Sales'.",config:{plugin:"Y Line",group_by:["Order Date"],columns:["Sales"]}},{name:"Y Line - Datetime Axis",description:"Line chart with 3 lines. X is Order Date, Y is Sales, and the lines are 'Consumer', 'Corporate', and 'Home Office'.",config:{plugin:"Y Line",group_by:["Order Date"],split_by:["Segment"],columns:["Sales"]}},{name:"Y Line - Datetime Axis Computed",description:"Line Chart. X is 'Order Date', summarized by month. Y is 'Sales'",config:{plugin:"Y Line",group_by:["bucket(\"Order Date\", 'M')"],expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')"},columns:["Sales"]}},{name:"Y Line - Datetime Axis",description:"Line Chart with 4 lines. X is 'Order Date' from January 2014 to December 2017. Y is 'Sales'. Each line is for each year.",config:{plugin:"Y Line",group_by:["bucket(\"Order Date\", 'M')"],split_by:["bucket(\"Order Date\", 'Y')"],expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')","bucket(\"Order Date\", 'Y')":"bucket(\"Order Date\", 'Y')"},columns:["Sales"]}},{name:"Y Line - Datetime Axis And Split By",description:"Line Chart with 4 lines. X is Order Date, Y is Sales, and the lines track different regions.",config:{plugin:"Y Line",group_by:["bucket(\"Order Date\", 'M')"],split_by:["Region"],expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')"},columns:["Sales"]}},{name:"Y Line - Category Axis",description:"Line Chart. X is State and Y is Sales.",config:{plugin:"Y Line",group_by:["State"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Y Line - Category Axis",description:"Line Chart. X is State and Y is Sales. Sorted descending.",config:{plugin:"Y Line",group_by:["State"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Line - Row and Split By",description:"Line chart with 3 lines. X is State, Y is Sales, and each line tracks a customer segment. States are sorted descending by total sales.",config:{plugin:"Y Line",group_by:["State"],split_by:["Segment"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Line - Multi Axis Split",description:"Line chart with 2 lines. X is State, Y is Profit, and second Y is Sales. States are sorted descending by Sales.",config:{plugin:"Y Line",group_by:["State"],columns:["Sales","Profit"],plugin_config:{splitMainValues:["Sales"]},sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Line - Multi Axis Split",description:"Line chart with 2 lines. X is State, Y is Profit, second Y is Sales, and each line is profit/sales for each customer segment. States are sorted descending by total Sales.",config:{plugin:"Y Line",group_by:["State"],split_by:["Segment"],columns:["Sales","Profit"],plugin_config:{splitMainValues:["Sales"]},sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Area - Datetime Axis Computed",description:"Area chart. X is 'Order Date', bucketed by month. Y is Sales.",config:{plugin:"Y Area",group_by:["bucket(\"Order Date\", 'M')"],expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')"},columns:["Sales"]}},{name:"Y Area - Datetime Axis",description:"Area chart. X is 'Order Date', bucketed by month. Y is sales. Each year is its own color and area.",config:{plugin:"Y Area",group_by:["bucket(\"Order Date\", 'M')"],split_by:["bucket(\"Order Date\", 'Y')"],expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')","bucket(\"Order Date\", 'Y')":"bucket(\"Order Date\", 'Y')"},columns:["Sales"]}},{name:"Y Area - Datetime Axis And Split By",description:"Stacked area chart. X is 'Order Date', bucketed by month. Y is sales. Subgroup is Region.",config:{plugin:"Y Area",group_by:["bucket(\"Order Date\", 'M')"],split_by:["Region"],expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')"},columns:["Sales"]}},{name:"Y Area - Category Axis",description:"Area chart. X is 'State'. Y is Sales.",config:{plugin:"Y Area",group_by:["State"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Y Area - Row and Split By",description:"Stacked area chart. X is 'State'. Y is 'Sales'. Subgroup is customer segment.",config:{plugin:"Y Area",group_by:["State"],split_by:["Ship Mode"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Y Area - 2 Group By",description:"Grouped area chart. X is State, grouped by Region. Y is sales. Sorted descending by Sales for each region.",config:{plugin:"Y Area",group_by:["Region","State"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Area - Row and Split By",description:"Grouped area chart. X is State, grouped by Region. Y is sales. Sorted descending by Sales for each region. Each group is a different color.",config:{plugin:"Y Area",group_by:["Region","State"],split_by:["Region"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Area - Row and Split By 2",description:"Stacked grouped area chart. X is State, grouped by Region. Y is sales. Subgroup is customer segment. Sorted descending by total sales.",config:{plugin:"Y Area",group_by:["Region","State"],split_by:["Ship Mode"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"X/Y Scatter",description:"Scatter plot. X is Sales. Y is Quantity.",config:{plugin:"X/Y Scatter",group_by:["City"],columns:["Sales","Quantity"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}}},{name:"X/Y Scatter - Split By",description:"Grouped Scatter plot. X is Sales. Y is Quantity. Group is Region.",config:{plugin:"X/Y Scatter",group_by:["City"],split_by:["Region"],columns:["Sales","Quantity"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}}},{name:"X/Y Scatter - Color By Float",description:"Scatter plot. X is Sales. Y is Quantity. Each dot is colored by Profit.",config:{plugin:"X/Y Scatter",group_by:["State"],columns:["Sales","Quantity","Profit"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"},sort:[["Profit","desc"]]}},{name:"X/Y Scatter - Bubble",description:"Bubble plot. X is Sales. Y is Quantity. Size is Profit.",config:{plugin:"X/Y Scatter",group_by:["Sub-Category"],columns:["Sales","Quantity",null,"Profit"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Bubble",description:"Grouped bubble plot. X is Sales. Y is Quantity. Size is Profit. Group is Product Sub-Category.",config:{plugin:"X/Y Scatter",group_by:["Sub-Category"],split_by:["Category"],columns:["Sales","Quantity",null,"Profit"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Bubble",description:"Colored bubble plot. X is Sales. Y is Quantity. Size is Row ID. Color is Profit.",config:{plugin:"X/Y Scatter",group_by:["Sub-Category"],columns:["Sales","Quantity","Profit","Row ID"],sort:[["Profit","desc"]],aggregates:{Sales:"avg",Profit:"sum",Quantity:"avg","Row ID":"avg"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Category Y Axis",description:"Horizontal Bubble plot. X is State. Y is Profit. Size is Quantity.",config:{plugin:"X/Y Scatter",columns:["Profit","State",null,"Quantity"],group_by:["City"],aggregates:{State:"dominant"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Category Y Axis And Size And Color",description:"Colored Bubble plot. X is State. Y is product sub-category. Size is Sales. Color is Quantity.",config:{plugin:"X/Y Scatter",columns:["State","Sub-Category","Quantity","Sales",null],group_by:["State","Sub-Category"],aggregates:{State:"dominant","Sub-Category":"dominant",Profit:"low"}},viewport:{width:600,height:450}},{name:"X/Y Line",description:"Line chart with 4 lines. X is Sales. Y is Profit. Each line represents a region.",config:{columns:["Sales","Profit"],plugin:"X/Y Line",aggregates:{"Order Date":"dominant",Sales:"avg",Profit:"avg"},group_by:["State"],sort:[["Profit","desc"],["Sales","desc"]],split_by:["Region"]}},{name:"Treemap",description:"Treemap with 1-level hierarchy and 17 tiles. Each tile is a product sub-category, and the tile's size represents sales",config:{plugin:"Treemap",group_by:["Sub-Category"],columns:["Sales"]}},{name:"Treemap - 2 Group By",description:"Treemap with 2-level hierarchies for Category and Sub-Category. Size is Sales.",config:{plugin:"Treemap",group_by:["Category","Sub-Category","Segment"],columns:["Sales"]}},{name:"Treemap - Float Color",description:"Colored treemap with 2-level hierarchies for Category and Sub-Category. Size is Sales. Color is Quantity.",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],columns:["Sales","Quantity"],sort:[["Quantity","desc"]]}},{name:"Treemap - Category Color",description:"Treemap with 2-level hierarchies for Category and Sub-Category, with each Category colored differently. Size is Sales.",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],columns:["Sales","Category"],aggregates:{Category:"dominant"}}},{name:"Treemap - Row And Split By Float Color",description:"Colored treemap with 3-level hierarchies for Region, Category, and Sub-Category. Size is Sales. Color is Quantity.",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Quantity"],sort:[["Quantity","desc"]]},viewport:{width:800,height:600}},{name:"Treemap - Row And Split By Category Color",description:"Treemap with 3-level hierarchies for Region, Category, and Sub-Category, with each Region colored differently. Size is Sales.",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Region"],aggregates:{Region:"dominant"}},viewport:{width:800,height:600}},{name:"Treemap - Row And Split By Category Color 2",description:"Treemap with 3-level hierarchies for Region, Category, and Sub-Category, with each Category colored differently. Size is Sales.",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Category"],aggregates:{Category:"dominant"}},viewport:{width:800,height:600}},{name:"Sunburst",description:"Sunburst with 1-level hierarchy. Hierarchy is Category. Size is Sales.",config:{plugin:"Sunburst",group_by:["Sub-Category"],columns:["Sales"]}},{name:"Sunburst - 2 Group By",description:"Sunburst with 3-level hierarchy. Hierarchies are Category, Sub-category, and Customer Segment.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category","Segment"],columns:["Sales"]}},{name:"Sunburst - Float Color",description:"Colored sunburst with 2-level hierarchy. Hierarchies are Category and Sub-category. Size is Quantity. Color is Sales.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],columns:["Quantity","Sales"],sort:[["Quantity","desc"]]}},{name:"Sunburst - Category Color",description:"Colored sunburst with 2-level hierarchy. Hierarchies are Category and Sub-category. Size is Sales. Color is also Category.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],columns:["Sales","Category"],aggregates:{Category:"dominant"}}},{name:"Sunburst - Row And Split By",description:"Grouped sunbursts with 2-level hierarchy. Hierarchies are Category and Sub-category. Size is Sales. Each sunburst is a different region.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Sunburst - Row And Split By Float Color",description:"Grouped colored sunbursts with 2-level hierarchy. Hierarchies are Category and Sub-category. Size is Sales. Color is Quantity. Each sunburst is a different region.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Quantity"]},viewport:{width:600,height:450}},{name:"Sunburst - Row And Split By Category Color",description:"Grouped sunbursts with 2-level hierarchy. Hierarchies are Category and Sub-category. Size is Sales. Each sunburst is a different region and color.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Region"],aggregates:{Region:"dominant"}},viewport:{width:600,height:450}},{name:"Sunburst - Row And Split By Category Color 2",description:"Grouped sunbursts with 2-level hierarchy. Hierarchies are Category and Sub-category. Size is Sales. Each sunburst is a different region, and each category is colored.",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Category"],aggregates:{Category:"dominant"}},viewport:{width:600,height:450}},{name:"Heatmap",description:"Heatmap. Columns are Sub-Category. Rows are Region. Color is Profit.",config:{plugin:"Heatmap",group_by:["Sub-Category"],split_by:["Region"],columns:["Profit"],sort:[["Profit","desc"],["Profit","col desc"]]}},{name:"Heatmap 2",description:"Heatmap. Columns are State. Rows are Sub-Category. Color is Profit.",config:{plugin:"Heatmap",group_by:["State"],split_by:["Sub-Category"],columns:["Profit"],sort:[["Profit","desc"],["Profit","col desc"]]},viewport:{width:600,height:450}},{name:"Heatmap 3",description:"Heatmaps. Columns are order date, bucketed by month. Rows are Sub-Category. Color is Discount.",config:{columns:["Discount"],plugin:"Heatmap",expressions:{"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')"},aggregates:{"Order Date":"dominant",Sales:"avg"},split_by:["Sub-Category"],group_by:["bucket(\"Order Date\", 'M')"],sort:[["Discount","col asc"]]},viewport:{width:600,height:450}},{name:"Heatmap 4",description:"Heatmap. Columns are order date, bucketed by month. Rows are Profit, bucketed by 100. Color is Profit.",config:{plugin:"Heatmap",columns:["Profit"],expressions:{'bucket("Profit", 100)':'bucket("Profit", 100)',"bucket(\"Order Date\", 'M')":"bucket(\"Order Date\", 'M')"},group_by:["bucket(\"Order Date\", 'M')"],split_by:['bucket("Profit", 100)'],plugin_config:{}},viewport:{width:600,height:450}}]},569:function(e,t,r){"use strict";r.r(t),r.d(t,{SUPERSTORE_TABLE:function(){return o}});var n=r(7115),a=r(2768);const o=async function(){const e=n.ZP.shared_worker(),t=await fetch(a),r=await t.arrayBuffer();return await e.table(r.slice())}()},7532:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return de}});var n=r(7378),a=r(6010),o=r(353),i=r(7586),l=r(3099),s=r(2685),c="features_t9lD",u="container_a30C",d="feature_CLW0",g="featureSvg_GfXr",p="gallerySection_Wpmb",_="gallery_OZR8",h=r(5421),b=r(8948),f=r(3578),m="overlay_vEzt",w="viewer_dzx3",y="dimmed_aueD";const{convert:v}=r(4887);function x(e){const{colorMode:t}=(0,h.I)(),r="dark"===t?"_dark":"",[o,i]=(0,n.useState)(-1),s=(0,n.useCallback)((()=>{i(-1)}),[o]);return n.createElement(n.Fragment,null,f.Z.map(((e,t)=>{const l=(0,n.useCallback)((()=>{i(t)}),[o]);return n.createElement("img",{className:(0,a.Z)(o>=0?y:void 0),alt:e.description,src:(0,b.Z)(`/features/feature_${t}${r}.png`),key:t,onClick:l})})),o>=0?n.createElement(l.Z,null,(()=>n.createElement(S,{index:o,color:t,onClose:s}))):void 0)}function S(e){const{SUPERSTORE_TABLE:t}=r(569),o=(0,n.useRef)(),i=(0,n.useCallback)((t=>{t.preventDefault(),t.target===o.current&&e.onClose()}),[e.onClose]),l=(0,n.useCallback)((r=>{null!==r&&(r.load(t),r.restore(v({plugin:"Datagrid",group_by:[],expressions:{},split_by:[],sort:[],aggregates:{},...f.Z[e.index].config,settings:!0})))}),[e.index]);return n.createElement("div",{ref:o,className:(0,a.Z)(m),onClick:i},n.createElement("perspective-viewer",{ref:l,theme:"dark"===e.color?"Pro Dark":"Pro Light",class:(0,a.Z)(w)}))}var k=r(5318);const C={toc:[{value:"What is Perspective?",id:"what-is-perspective",level:2}]};function A(e){let{components:t,...r}=e;return(0,k.kt)("wrapper",(0,s.Z)({},C,r,{components:t,mdxType:"MDXLayout"}),(0,k.kt)("h2",{id:"what-is-perspective"},"What is Perspective?"),(0,k.kt)("p",null,"Perspective is an ",(0,k.kt)("i",null,"interactive")," analytics and data visualization component,\nwhich is especially well-suited for ",(0,k.kt)("i",null,"large")," and/or ",(0,k.kt)("i",null,"streaming"),"\ndatasets. Use it to create user-configurable reports, dashboards, notebooks and\napplications, then deploy stand-alone in the browser, or in concert with Python\nand/or ",(0,k.kt)("a",{parentName:"p",href:"https://jupyterlab.readthedocs.io/en/stable/"},"Jupyterlab"),"."))}A.isMDXComponent=!0;const E={toc:[{value:"JavaScript",id:"javascript",level:2}]};function V(e){let{components:t,...r}=e;return(0,k.kt)("wrapper",(0,s.Z)({},E,r,{components:t,mdxType:"MDXLayout"}),(0,k.kt)("h2",{id:"javascript"},"JavaScript"),(0,k.kt)("p",null,"Interactive dashboards built on Perspective.js\n",(0,k.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"Custom Elements"),"\nare easy to integrate into any web application framework."),(0,k.kt)("p",null,"Using Perspective's simple query language, elements like\n",(0,k.kt)("inlineCode",{parentName:"p"},"<perspective-viewer>")," can be ",(0,k.kt)("em",{parentName:"p"},"symmetrically")," configured via API or User\ninteraction. Web Applications built with Perspective Custom Elements can be\nre-hydrated from their serialized state, driven from external Events, or\npersisted to any store. Workspaces can mix virtual, server-side Python data\nwith in-browser client data seamlessly, and independent data Views can be\ncross-filtered, duplicated, exported, stacked and saved."),(0,k.kt)("p",null,"To achieve Desktop-like performance in the Browser, Perspective.js\nrelies on ",(0,k.kt)("a",{parentName:"p",href:"https://webassembly.org/"},"WebAssembly")," for excellent\n",(0,k.kt)("em",{parentName:"p"},"query calculation")," time, and ",(0,k.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Apache Arrow"),"\nfor its conservative ",(0,k.kt)("em",{parentName:"p"},"memory footprint")," and efficient ",(0,k.kt)("em",{parentName:"p"},"data serialization"),"."))}V.isMDXComponent=!0;const P={toc:[{value:"Python",id:"python",level:2}]};function M(e){let{components:t,...r}=e;return(0,k.kt)("wrapper",(0,s.Z)({},P,r,{components:t,mdxType:"MDXLayout"}),(0,k.kt)("h2",{id:"python"},"Python"),(0,k.kt)("p",null,"`","perspective-python","`",", built on the same C++ data engine used by the\n",(0,k.kt)("a",{parentName:"p",href:"https://perspective.finos.org/docs/md/js.html"},"WebAssembly version"),", implements\nthe Perspective API directly in Python, either as a virtualized server for\nProduction, or as an embedded JupyterLab Widget for Research."),(0,k.kt)("p",null,"For Application Developers, virtualized ",(0,k.kt)("inlineCode",{parentName:"p"},"<perspective-viewer>")," will only\nconsume the data necessary to render the current screen, enabling ",(0,k.kt)("em",{parentName:"p"},"ludicrous size"),"\ndatasets with nearly instant load. Or - efficiently stream the entire dataset to the\nWebAssembly runtime via Apache Arrow, and give your server a\nbreak!"),(0,k.kt)("p",null,"For Researchers and Data Scientists, ",(0,k.kt)("inlineCode",{parentName:"p"},"PerspectiveWidget")," is available as a\n",(0,k.kt)("a",{parentName:"p",href:"https://jupyterlab.readthedocs.io/en/stable/"},"Jupyter/JupyterLab")," widget,\nallowing interactive ",(0,k.kt)("a",{parentName:"p",href:"https://pandas.pydata.org/"},"Pandas")," and\n",(0,k.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Apache Arrow")," visualization within a notebook."))}M.isMDXComponent=!0;const O={toc:[]};function N(e){let{components:t,...r}=e;return(0,k.kt)("wrapper",(0,s.Z)({},O,r,{components:t,mdxType:"MDXLayout"}),(0,k.kt)("p",null,"A fast, memory efficient streaming query engine, written in\nC++ and compiled for both ",(0,k.kt)("a",{parentName:"p",href:"https://webassembly.org/"},"WebAssembly")," and\n",(0,k.kt)("a",{parentName:"p",href:"https://www.python.org/"},"Python"),", with read/write/streaming for\n",(0,k.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Apache Arrow"),", and a high-performance columnar\nexpression language based on ",(0,k.kt)("a",{parentName:"p",href:"https://github.com/ArashPartow/exprtk"},"ExprTK"),"."))}N.isMDXComponent=!0;const L={toc:[]};function T(e){let{components:t,...r}=e;return(0,k.kt)("wrapper",(0,s.Z)({},L,r,{components:t,mdxType:"MDXLayout"}),(0,k.kt)("p",null,"A framework-agnostic User Interface packaged as a\n",(0,k.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"Custom Element"),",\npowered either in-browser via WebAssembly or virtually via\nWebSocket server (Python/Node)."))}T.isMDXComponent=!0;const z={toc:[]};function D(e){let{components:t,...r}=e;return(0,k.kt)("wrapper",(0,s.Z)({},z,r,{components:t,mdxType:"MDXLayout"}),(0,k.kt)("p",null,"A ",(0,k.kt)("a",{parentName:"p",href:"https://jupyter.org/"},"JupyterLab")," widget and Python client library, for\ninteractive data analysis in a notebook, as well as ",(0,k.kt)("em",{parentName:"p"},"scalable")," production\n",(0,k.kt)("a",{parentName:"p",href:"https://github.com/voila-dashboards/voila"},"Voila")," applications."))}var R,Y;D.isMDXComponent=!0;var B=["title","titleId"];function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function $(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var I,H,X=function(e){var t=e.title,r=e.titleId,a=$(e,B);return n.createElement("svg",j({width:53,height:67,viewBox:"0 0 53 67",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,R||(R=n.createElement("path",{d:"M11.648 1.56 1.611 11.244A2 2 0 0 0 1 12.683V64a2 2 0 0 0 2 2h47a2 2 0 0 0 2-2V50.447c0-.775-.628-1.404-1.404-1.404a1.404 1.404 0 0 1-1.403-1.403v-8.497c0-.775.628-1.404 1.403-1.404.776 0 1.404-.628 1.404-1.403V3a2 2 0 0 0-2-2H13.037a2 2 0 0 0-1.389.56Z"})),Y||(Y=n.createElement("path",{d:"M29.24 29h-8.675L16 43.431h8.217L21.478 56 37 38.776H26.044L29.239 29ZM42 8h3v11h-3V8ZM36 8h3v11h-3V8ZM31 8h3v11h-3V8ZM25 8h3v11h-3V8ZM19 8h3v11h-3V8ZM14 8h3v11h-3V8ZM8 14h3v8H8v-8Z"})))},F=["title","titleId"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}function U(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var q,Z,G,Q,J,K=function(e){var t=e.title,r=e.titleId,a=U(e,F);return n.createElement("svg",W({width:49,height:71,viewBox:"0 0 49 71",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,I||(I=n.createElement("path",{d:"M1 23.5 24.334 6.166 47.67 23.5 24.335 40.835 1 23.5ZM9 41.5l-8 5.834L24.334 64.67 47.67 47.335l-8.017-5.956"})),H||(H=n.createElement("path",{d:"m9 29.5-8 5.834L24.334 52.67 47.67 35.335l-8.017-5.956"})))},ee=["title","titleId"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function re(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ne=function(e){var t=e.title,r=e.titleId,a=re(e,ee);return n.createElement("svg",te({width:48,height:59,viewBox:"0 0 48 59",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,q||(q=n.createElement("rect",{x:2,y:1,width:45,height:57,rx:2})),Z||(Z=n.createElement("circle",{cx:10,cy:11,r:2,fill:"#666"})),G||(G=n.createElement("circle",{cx:10,cy:30,r:2,fill:"#666"})),Q||(Q=n.createElement("circle",{cx:10,cy:49,r:2,fill:"#666"})),J||(J=n.createElement("path",{d:"M10 11H0M39 10H17M39 14H17M39 18H17M39 22H17M39 26H17M39 30H17M39 34H17M39 38H17M39 42H17M39 46H17M39 50H17M10 30H0M10 49H0"})))};const ae=[{description:n.createElement("div",null,n.createElement(A,null),n.createElement("br",null),n.createElement("h3",null,"Features"),n.createElement("br",null),n.createElement("div",{className:d},n.createElement(X,{className:g}),n.createElement(N,null)),n.createElement("div",{className:d},n.createElement(K,{className:g}),n.createElement(T,null)),n.createElement("div",{className:d},n.createElement(ne,{className:g}),n.createElement(D,null)))},{description:n.createElement(V,null)},{description:n.createElement(M,null)}];function oe(e){let{description:t}=e;return n.createElement("div",{className:(0,a.Z)()},n.createElement("div",{className:"text--full padding-horiz--md"},t))}function ie(){return n.createElement(n.Fragment,null,n.createElement("section",{className:c},n.createElement("div",{className:u},n.createElement("div",{className:"row"},ae.map(((e,t)=>n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement(oe,(0,s.Z)({key:t},e)))))),n.createElement("br",null),n.createElement("hr",null))),n.createElement("section",{className:(0,a.Z)(p,c)},n.createElement("div",{className:(0,a.Z)(_,"container")},n.createElement(l.Z,null,(()=>n.createElement(x,null))),n.createElement("hr",null))))}var le=r(161),se="heroBanner_qdFl",ce="buttons_AeoN";function ue(){const{siteConfig:e}=(0,o.Z)();return n.createElement("header",{className:(0,a.Z)("hero",se)},n.createElement("div",{className:"container"},n.createElement("div",{className:ce},n.createElement(l.Z,null,(()=>{const{PerspectiveViewerDemo:e}=r(7196);return n.createElement(e,null)})))))}function de(){const{siteConfig:e}=(0,o.Z)();if(le.Z.canUseDOM){const e=(0,n.useCallback)((()=>{const e=document.querySelector(".header-center"),t=e.classList.contains("header-shift");document.documentElement.scrollTop>90&&t?e.classList.remove("header-shift"):document.documentElement.scrollTop<=90&&!t&&e.classList.add("header-shift")}),[]);(0,n.useEffect)((()=>(document.querySelector(".header-center").classList.add("header-shift"),document.addEventListener("scroll",e),()=>document.removeEventListener("scroll",e))),[e])}return n.createElement("div",{className:"header-center header-shift"},n.createElement(i.Z,{title:`${e.title}`,description:e.description},n.createElement(ue,null),n.createElement("main",null,n.createElement(ie,null))))}},3099:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7378),a=r(6457);function o(e){let{children:t,fallback:r}=e;return(0,a.Z)()?n.createElement(n.Fragment,null,t?.()):r??null}},7495:function(e,t,r){"use strict";var n=r(7580),a=r(9580),o=r(3603),i=r(9951),l=r(760),s=r(9452),c=Object.defineProperty,u=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var d="none",g="ordinal",p="time",_="linear",h=e=>{let t="crossValues",r=null,n=null,a=()=>{let a=n=>{let a=r?e[t].filter((e=>r==e.name)):e[t];return!("crossValues"==t&&a.length>1)&&a.some((e=>n.includes(e.type)))};return 0===e[t].length?d:n!=p&&a(["datetime","date"])?p:n!=_&&a(["integer","float"])||n==g?_:g};return a.settingName=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.settingValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.excludeType=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a},b={};u(b,{domain:()=>y,labelFunction:()=>v,scale:()=>w});var f=e=>Array.isArray(e)?e.flat(1/0):[e],m=e=>{let t=t=>e(t);return(0,n.rebindAll)(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(...arguments),t):Math.max(e.bandwidth(),1)},t},w=()=>(e=>{let t=t=>e(t);return(0,n.rebindAll)(t,e),t.ticks=function(){return[]},t})(m(a.tiA())),y=()=>{let e=["crossValue"],t="horizontal",r=t=>{let r=f(t);return n([...new Set(r.map((t=>t[e[0]])))])},n=e=>"vertical"==t?e.reverse():e;return r.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],r):e[0]},r.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},v=e=>t=>t[e].join("|"),x={};u(x,{component:()=>N,domain:()=>P,labelFunction:()=>M,scale:()=>V,tickFormatFunction:()=>O});var S=()=>{let e=[0,0],t="percent",r=r=>{switch(t){case"domain":r[0]-=e[0],r[1]+=e[1];break;case"percent":{let t=r[1]-r[0];r[0]-=e[0]*t,r[1]+=e[1]*t;break}default:throw new Error("Unknown padUnit: "+t)}return r};return r.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r.padUnit=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},k=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},C=(e,t)=>{let r=Math.ceil(Math.abs(Math.log10(t-e)))+1;return e=>Math.abs(e)>=1e7?a.WUZ(".3s")(e):Number.isInteger(e)?a.WUZ(",.0f")(e):a.WUZ(`,.${r}f`)(e)};function A(e){return e.getRootNode().host}function E(e){return e.closest("#container.chart")}var V=()=>a.BYU(),P=()=>{let e=function(){let e=[function(e){return e}],t=null,r=[],n=S(),a=function(a){let l,s=new Array(a.length),c=!0,u=!1,d=e[Symbol.iterator]();try{for(let e;!(c=(e=d.next()).done);c=!0){let t=e.value;for(let e=0;e<a.length;e++){let r=t(a[e],e);Array.isArray(r)?s.push.apply(s,k(r)):s.push(r)}}}catch(p){u=!0,l=p}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}let g=[o.Z(s),i.Z(s)];if(g[0]=null==g[0]?o.Z(r):o.Z([g[0]].concat(k(r))),g[1]=null==g[1]?i.Z(r):i.Z([g[1]].concat(k(r))),null!=t){let e=Math.max(Math.abs(g[1]-t),Math.abs(g[0]-t));g[0]=t-e,g[1]=t+e}return n(g)};return a.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.pad=function(){return arguments.length?(n.pad(arguments.length<=0?void 0:arguments[0]),a):n.pad},a.padUnit=function(){return arguments.length?(n.padUnit(arguments.length<=0?void 0:arguments[0]),a):n.padUnit},a.include=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.symmetricalAbout=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.paddingStrategy=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}().pad([0,.1]).padUnit("percent"),t=["crossValue"],r=r=>(e.accessors(t.map((e=>t=>parseFloat(t[e])))),a(f(r)));n.rebindAll(r,e);let a=r=>{if("domain"==e.padUnit()){let n=(e=>{let r=t.map((t=>e.map((e=>e[t])).sort(((e,t)=>e-t)).filter(((e,t,r)=>0===t||e!==r[t-1])).reduce(((e,t,r,n)=>0===r||e<=t-n[r-1]?e:Math.abs(t-n[r-1])))));return Math.min(...r)})(r);return e.pad([n/2,n/2])(r)}return e(r)};return r.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],r):t[0]},r.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},M=e=>t=>t[e][0],O=C,N=e=>{let t=null,r="horizontal",o=null,i=(e,t)=>{let n=e.getBoundingClientRect();t.each(((e,t,o)=>{let i=a.Ys(o[t]).node().getBoundingClientRect();("vertical"==r&&n.width<i.width||"horizontal"==r&&n.height<i.height)&&(e=>{a.Ys(e).select("text").node().style.fontSize="80%"})(o[t])}))},l=(e,t,r)=>{let n=((e,t)=>{try{return E(e.node()).querySelector(".cartesian-chart").querySelector(`.${t}-axis`)}catch{return null}})(e,t);n&&i(n,e)},s=()=>({bottom:n.axisBottom,left:n.axisLeft,top:n.axisTop,right:n.axisRight,decorate:l});return s.domain=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s.settingName=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s},L={};u(L,{domain:()=>z,labelFunction:()=>D,scale:()=>T});var T=()=>a.Xf(),z=()=>{let e=n.extentTime(),t=["crossValue"],r=r=>(e.accessors(t.map((e=>t=>new Date(t[e])))),a(f(r)));n.rebindAll(r,e,n.exclude("include","paddingStrategy"));let a=r=>{let n=Math.abs((e=>{let r=t.map((t=>e.map((e=>new Date(e[t]).getTime())).sort(((e,t)=>e-t)).filter(((e,t,r)=>0===t||e!==r[t-1])).reduce(((e,t,r,n)=>0===r||Math.abs(e)<=Math.abs(t-n[r-1])?Math.abs(e):Math.abs(t-n[r-1])))));return Math.min(...r)})(r));return e.padUnit("domain").pad([n/2,n/2])(r)};return r.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],r):t[0]},r.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},D=e=>t=>new Date(t[e][0]),R={};u(R,{component:()=>W,domain:()=>X,labelFunction:()=>F,scale:()=>H});var Y=(e,t,r)=>{let o=6,i=6,l=function(){let e={},t=t=>{for(let r of Object.keys(e))t[r](e[r]);return t};for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(let o of n)t[o]=function(){return arguments.length?(e[o]=arguments.length<=0?void 0:arguments[0],t):e[o]};return t}("tickFormat","ticks","tickArguments","tickValues","tickPadding"),s=function(){},c=null,u=(0,n.dataJoin)("g","group"),d=(0,n.dataJoin)("path","domain"),g=(e,t)=>p()?`translate(${t}, ${e})`:`translate(${e}, ${t})`,p=()=>"left"===e||"right"===e,_=n=>{c?n.each(((n,_,b)=>{let f=b[_],m=(0,a.Ys)(f),w="bottom"===e||"right"===e?1:-1,y=r.range(),v=(e=>p()?e.map((e=>[e[1],e[0]])):e)([[y[0],w*o],[y[0],0],[y[1],0],[y[1],w*o]]);d(m,[n]).attr("d",(0,a.jvg)()(v)).attr("stroke","#000").attr("fill","none");let x=u(m,c),S=e=>Array.isArray(i)?i[e]:i,k=e=>{let t=0;for(let r=0;r<e;r++)t+=S(r);return t};x.attr("transform",((e,t)=>g(0,w*k(t)))).each(((e,n,o)=>{let i=(0,a.Ys)(o[n]),c=h(r,e);l(t(c)).decorate(((e,t)=>s(e,t,n))).tickSizeInner(S(n)).tickOffset((e=>c.step(e)/2))(i),i.select("path.domain").attr("visibility","hidden")})),x.exit().attr("transform",((e,t)=>g(0,w*k(t))))})):l(t(r).decorate(s))(n)},h=(e,t)=>{function r(t){let r=t.domain;return r.reduce(((t,r)=>t+e(r)),0)/r.length}return r.ticks=()=>t,r.tickFormat=()=>e=>e.text,r.copy=()=>h(e,t),r.step=t=>t.domain.length*e.step(),(0,n.rebindAll)(r,e,(0,n.exclude)("ticks","step","copy")),r};return _.tickSize=function(){return arguments.length?(i=o=Number(arguments.length<=0?void 0:arguments[0]),_):i},_.tickSizeInner=function(){return arguments.length?(i=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Number(arguments.length<=0?void 0:arguments[0]),_):i},_.tickSizeOuter=function(){return arguments.length?(o=Number(arguments.length<=0?void 0:arguments[0]),_):o},_.decorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},_.groups=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},(0,n.rebindAll)(_,l),_},B=e=>Y("top",n.axisOrdinalTop,e),j=e=>Y("bottom",n.axisOrdinalBottom,e),$=e=>Y("left",n.axisOrdinalLeft,e),I=e=>Y("right",n.axisOrdinalRight,e),H=()=>m(a.tiA()).padding(.5),X=()=>{let e=["crossValue"],t="horizontal",r=t=>{let r=f(t);return n([...Array.from(new Set(r.map((t=>t[e[0]]))))])},n=e=>"vertical"==t?e.reverse():e;return r.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],r):e[0]},r.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],r):e},r.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r},F=e=>t=>t[e].join("|"),W=e=>{let t="horizontal",r="crossValues",o=null,i=()=>{let n=e[r].length>1,a=s(o),i=a.map(c),d=n?i.map((e=>e.size)):i[0].size,p=i.reduce(((e,t)=>e+t.size),0),_=e=>r=>{let o=e(r);return n&&o.groups(a).tickSizeInner(d).tickSizeOuter(p),"horizontal"!==t&&o.tickPadding(10),o},h=l(n);return{bottom:_(h.bottom),left:_(h.left),right:_(h.right),top:_(h.top),size:`${p+10}px`,decorate:(e,r,n)=>{let a=i[n].rotation;"horizontal"===t&&g(e,a),u(e,a)}}},l=e=>e?{bottom:j,left:$,top:B,right:I}:{bottom:n.axisOrdinalBottom,left:n.axisOrdinalLeft,top:n.axisOrdinalTop,right:n.axisOrdinalRight},s=e=>{let t=[];return e.forEach((e=>{(e&&e.split?e.split("|"):[e]).forEach(((r,n)=>{for(;t.length<=n;)t.push([]);let a=t[n];a.length>0&&a[a.length-1].text===r?a[a.length-1].domain.push(e):a.push({text:r,domain:[e]})}))})),t.reverse()},c=r=>{let n=e.size.width,a=Math.max(...r.map((e=>e.text?e.text.length:0)));return"horizontal"===t?r&&16*r.length>n-100?{size:5*a+10,rotation:90}:r&&r.length*(6*a+10)>n-100?{size:3*a+20,rotation:45}:{size:25,rotation:0}:{size:5*a+10,rotation:0}},u=(e,r)=>{let n=r?(e,t)=>e.x+e.width+14>t.x+t.width:(e,t)=>e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height,o="horizontal"==t?d(e):null,i=[];e.each(((e,t,r)=>{let l=a.Ys(r[t]),s=(e=>{let t=-1!==e.indexOf(",")?",":" ",r=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(t).map((e=>parseInt(e)));for(;r.length<2;)r.push(0);return r})(l.attr("transform")),c=l.node().getBBox(),u={x:c.x+s[0],y:c.y+s[1],width:c.width,height:c.height},d=i.some((e=>n(e,u)))||o&&!((e,t)=>e.x>=t.x&&e.x+e.width<=t.x+t.width&&e.y>=t.y&&e.y+e.height<=t.y+t.height)(u,o);l.attr("visibility",d?"hidden":""),d||i.push(u)}))},d=e=>{let t=E(e.node());if(null===t)return;let r=t.querySelector(".cartesian-chart"),n=r.querySelector(".x-axis"),a=r.getBoundingClientRect(),o=n.getBoundingClientRect();return{x:a.left-o.left,width:a.width,y:a.top-o.top,height:a.height}},g=(e,t)=>{let r=(e=>e?e<60?`rotate(-${e} 5 5)`:`rotate(-${e} 3 7)`:"translate(0, 8)")(t),n=t?"end":"";e.each(((e,t,o)=>{a.Ys(o[t]).select("text").attr("transform",r).style("text-anchor",n)}))};return i.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.settingName=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.domain=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],i):o},i},U={none:b,ordinal:R,time:L,linear:x},q=e=>{let t,r=null,a="horizontal",o="crossValues",i=["crossValue"],l=null,s=null,c=["include","paddingStrategy","pad"],u={},d=n=>{let d=h(e).excludeType(r).settingName(o).settingValue(t)(),_=U[d],b=_.domain().valueNames(i);c.forEach((e=>{u[e]&&b[e]&&b[e](u[e])})),b.orient&&b.orient(a);let f=b(n);null!==l&&(f=l(f)),s&&"number"==typeof f[0]&&(s[0]=f[0]=Math.min(f[0],s[0]),s[1]=f[1]=Math.max(f[1],s[1]));let m=_.hasOwnProperty("component")?g(_,f,n):p(),w=_==x?O(f[0],f[1]):void 0;return{scale:_.scale(),domain:f,domainFunction:b,labelFunction:_.labelFunction,component:{bottom:m.bottom,left:m.left,top:m.top,right:m.right},size:m.size,decorate:m.decorate,label:e[o].map((e=>e.name)).join(", "),tickFormatFunction:w}},g=(t,r,n)=>t.component(e).orient(a).settingName(o).domain(r)(n),p=()=>({bottom:n.axisBottom,left:n.axisLeft,top:n.axisTop,right:n.axisRight,decorate:()=>{}});return d.memoValue=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.excludeType=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],d):r},d.orient=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],d):a},d.settingName=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],d):o},d.settingValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],d):t},d.valueName=function(){return arguments.length?(i=[arguments.length<=0?void 0:arguments[0]],d):i[0]},d.valueNames=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],d):i},d.modifyDomain=e=>e?(l=e,d):l,c.forEach((e=>{d[e]=function(){return arguments.length?(u[e]=arguments.length<=0?void 0:arguments[0],d):u[e]}})),d},Z=(e,t)=>Q(e,t,((e,t)=>e.svgPlotArea(t)),!1),G=(e,t)=>Q(e,t,((e,t)=>e.canvasPlotArea(t).svgPlotArea(n.seriesSvgPoint())),!0),Q=(e,t,r,o)=>{let i=null,l=null,s=n.chartCartesian({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&s.xDecorate(e.decorate),t.decorate&&s.yDecorate(t.decorate),s.xPaddingInner&&s.xPaddingInner(1),s.xPaddingOuter&&s.xPaddingOuter(.5),s.yPaddingInner&&s.yPaddingInner(1),s.yPaddingOuter&&s.yPaddingOuter(.5),s.axisSplitter=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.altAxis=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.plotArea=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0==t.length?o?this.canvasPlotArea():this.svgPlotArea():r(this,...t)};let c=s.decorate();return s.decorate(((r,u)=>{let d=r.select("d3fc-svg.plot-area"),g=d.select("svg").node();g.setAttribute("viewBox",`0 0 ${d.node().clientWidth} ${d.node().clientHeight}`),g.setAttribute("preserveAspectRatio","none");for(let e of["x-axis","y-axis"])r.select(`d3fc-svg.${e} svg`).node().setAttribute("preserveAspectRatio","none");if(c(r,u),o){let e=r.select(".svg-plot-area").node(),t=r.select(".canvas-plot-area").node();a.td_([e,t]).order()}if(i){if(i.haveSplit()){let c=i.altData(),d=n.dataJoin("d3fc-svg","y2-axis").key((e=>e)),g=n.dataJoin("g","y-series").key((e=>e));r.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",l.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let p=l.scale.domain(l.domain),_=l.component.right(p);if(_.tickFormat(l.tickFormatFunction),l.decorate&&_.decorate(l.decorate),d(r,["right"]).attr("class",(e=>`y-axis ${e}-axis`)).on("measure",(function(e,t){let{width:r,height:n}=e.detail;"left"===t&&a.Ys(e.currentTarget).select("svg").attr("viewBox",`${-r} 0 ${r} ${n}`).attr("preserveAspectRatio","none"),p.range([n,0])})).on("draw",(function(e,t){a.Ys(e.currentTarget).select("svg").call(_)})),o){let n=r=>{let n=s.plotArea();n.context(r.node().getContext("2d")).xScale(e.scale);let a=[t.scale,p];[u,c].forEach(((e,t)=>{n.yScale(a[t]),n(e)}))};r.select("d3fc-canvas.plot-area").on("draw",(function(e,t){n(a.Ys(e.currentTarget).select("canvas"))}))}else{let n=function(r){let n=s.plotArea();n.xScale(e.scale);let o=[t.scale,p];g(r,[u,c]).each(((e,t,r)=>{n.yScale(o[t]),a.Ys(r[t]).datum(e).call(n)}))};r.select("d3fc-svg.plot-area").on("draw",(function(e,t){n(a.Ys(e.currentTarget).select("svg"))}))}}i(r)}})),s};function J(e,t,r){let n=e.select(t);return n.size()>0?n:r()}function K(e,t,r){if(void 0===r&&(r="right"),"right"===r||"bottom"===r)return e[r]<t[r];if("left"===r||"top"===r)return e[r]>t[r];throw`Direction being checked for overflow is invalid: ${r}`}function ee(e,t,r,n){void 0===n&&(n=0);let a="x"===e?"width":"height",o=t[e],i=t[e]+t[a],l=r[e],s=r[e]+r[a];return l+n>o&&l-n<i||s+n>o&&s-n<i||l+n<o&&s-n>i}var te='<ul id="tooltip-values"></ul>\n',re={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}};function ne(e){let t={};if(ie().types[e]&&Object.assign(t,ie().types[e]),t.type){let e=ne(t.type);return Object.assign(e,t),e}return t}function ae(e){return e&&"object"==typeof e&&!Array.isArray(e)}function oe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;let a=r.shift();if(ae(e)&&ae(a))for(let o in a)ae(a[o])?(e[o]||Object.assign(e,{[o]:{}}),oe(e[o],a[o])):Object.assign(e,{[o]:a[o]});return oe(e,...r)}function ie(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=oe(re,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}function le(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],ne(e).format);case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function se(e,t){return 0===t.crossValues.length||0===e.crossValue.length?[]:((e.crossValue.split?e.crossValue.split("|"):Array.isArray(e.crossValue)?e.crossValue:[e.crossValue])||[e.key]).map(((e,r)=>({name:t.crossValues[r].name,value:le(t.crossValues[r].type,e)})))}function ce(e,t){if(0===t.splitValues.length)return[];let r=[e.mainValue];return e.key?r=e.key.split("|"):e.mainValue?.split&&(r=e.mainValue.split("|")),t.splitValues.map(((e,t)=>({name:e.name,value:le(e.type,r[t])})))}function ue(e,t){return t.mainValues.length>1?e.mainValues?t.mainValues.map(((t,r)=>({name:t.name,value:le(t.type,e.mainValues[r])}))):t.mainValues.map((t=>({name:t.name,value:le(t.type,e.row[t.name])}))):[{name:t.mainValues[0].name,value:le(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}function de(e,t,r){!function(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each((function(e){(0,a.Ys)(this).text(`${e.name}: `).append("b").text(ge(e.value))}))}(e,se(t,r).concat(ce(t,r)).concat(ue(t,r)))}var ge=e=>null==e?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:ne("float").precision,maximumFractionDigits:ne("float").precision}),pe=e=>[e.name,"==",e.value],_e=(e,t,r)=>{let n=ue(t,r).map((e=>e.name)),a=se(t,r).map(pe),o=ce(t,r).map(pe),i=r.filter.concat(a).concat(o);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:n,config:{filter:i},row:t.row}}))},he=()=>{let e=!1,t=null,r=null,n=!1,o=o=>{let i=o.node();if(!i||!i.isConnected)return void be(t);let l=(0,a.Ys)(E(i));t=function(e){return J(e,"div.tooltip",(()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(te)))}(l);let s=function(e,i){de(t,i,r);let s=o.nodes(),c=s.indexOf(this);(function(e,t,r,n){let a=e.getBoundingClientRect(),o=t.getBoundingClientRect(),i=o.left+o.width/2-a.left,l=o.top-a.top+e.scrollTop;n&&(l=o.top+o.height/2-a.top+e.scrollTop),r.style("left",`${i}px`).style("top",`${l}px`).style("opacity",.9),n&&([i,l]=function(e,t){let r=e.node().getBoundingClientRect(),n=r.width/2,a=r.left-n-t.left;e.style("left",`${a}px`);let o=r.height/2,i=r.top-o-t.top;return e.style("top",`${i}px`),[a,i]}(r,a)),function(e,t,r,n,a){void 0===a&&(a=!1);let o=e.node().getBoundingClientRect();if(K(t,o)){let n=o.right-t.right;e.style("left",r-n+"px")}if(K(t,o,"bottom")){let r=o.bottom-t.bottom;e.style("top",n-r+"px")}if(a){if(K(t,o,"left")){let n=o.left-t.left;e.style("left",r-n+"px")}if(K(t,o,"top")){let r=o.top-t.top;e.style("top",n-r+"px")}}}(r,a,i,l,n)})(l.node(),s[c],t,n),(0,a.Ys)(s[c]).style("opacity","0.7")};e?o.each((function(e){return s.call(this,void 0,e)})):(o.on("mouseover",s).on("mouseout",(function(e,r){be(t);let n=o.nodes(),i=n.indexOf(this);n&&(0,a.Ys)(n[i]).style("opacity","1")})),(()=>{let e=null,t=t=>{let r=t.node();t.on("click",((t,n)=>_e(r,n,e)))};return t.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t})().settings(r)(o))};return o.alwaysShow=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.centered=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.settings=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o};function be(e){e&&e.style("opacity",0)}function fe(e,t){let r=e.mainValues.length>1?n.seriesSvgGrouped(n.seriesSvgBar()):n.seriesSvgBar();return r=r.decorate((r=>{he().settings(e)(r),r.style("fill",(e=>t(e.key)))})),n.autoBandwidth(me(r)).crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue?e.mainValue:0)).baseValue((e=>e.baseValue))}var me=e=>{let t=t=>e(t);return n.rebindAll(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(Math.max(arguments.length<=0?void 0:arguments[0],1)),t):e.bandwidth()},t};function we(e){return e.split("|").slice(0,-1).join("|")}function ye(e,t){return e.data.map((e=>Object.entries(e).filter((e=>{let[r,n]=e;return r.split("|").at(-1)===t&&!!n})).map((e=>{let[t,r]=e;return r})))).flat()}function ve(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=Object.keys(t).filter((e=>"__ROW_PATH__"!==e));return Se().settings(e).domain(r)()}function xe(e,t){let r=[...new Set(t)];return Se().settings(e).domain(r)()}function Se(){let e=null,t=null,r={},n=e=>Ce(e,r.colorStyles&&r.colorStyles.opacity),o=()=>{let o=r.colorStyles,i=t||[o.series];if(i||e.length>1){let t=e.length>1?o.scheme:i;return a.PKp(t.map(n)).domain(e)}return null};return o.domain=function(){return 0===arguments.length?e:(e=arguments.length<=0?void 0:arguments[0],o)},o.defaultColors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.mapFunction=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.settings=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o}function ke(e){return Ae(1)(e)}function Ce(e,t){return void 0===t&&(t=.5),Ae(t)(e)}function Ae(e){return t=>{let r=a.$_Y(t);return null!=r&&(r.opacity=e),r+""}}var Ee={none:v,ordinal:F,time:D,linear:M},Ve=e=>{let t=h(e),r="__ROW_PATH__",a=(e,n)=>Ee[t()](r)(e);return(0,n.rebindAll)(a,t),a.valueName=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a};function Pe(e,t,r){let{stack:n=!1,excludeEmpty:a=!1}=void 0===r?{}:r,o=t||e.data;return e.splitValues.length>0?function(e,t,r){let{stack:n=!1,excludeEmpty:a=!1}=r,o={};return t.forEach((e=>{let t={},r={};Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).filter((t=>!a||null!=e[t]&&null!=e[t])).forEach((a=>{let o=a.split("|"),i=o[o.length-1],l=e[a]||0,s=`${i}${l>=0?"+ve":"-ve"}`,c=o.slice(0,o.length-1).join("|"),u=r[c]=r[c]||{__ROW_PATH__:e.__ROW_PATH__},d=t[s]||0;u.__KEY__=c,n?(u[i]=d+l,u[`__BASE_VALUE__${i}`]=d,t[s]=u[i]):u[i]=l,u.row=e})),Object.keys(r).forEach((e=>{(o[e]=o[e]||[]).push(r[e])}))})),Object.keys(o).map((e=>{let t=o[e];return t.key=e,t}))}(0,o,{stack:n,excludeEmpty:a}):[o]}function Me(e,t){let r={stack:!0};return Pe(e,t,r).map((t=>Oe(e,t,r)))}function Oe(e,t,r){let{stack:n=!1}=r,a=function(e,t,r){let{stack:n=!1}=r,a=Ve(e);return e=>{let r=t=>n&&t[`__BASE_VALUE__${e.name}`]||0,o=t.map(((t,n)=>({crossValue:a(t,n),mainValue:t[e.name]?t[e.name]:null,baseValue:r(t),key:t.__KEY__?`${t.__KEY__}|${e.name}`:e.name,row:t.row||t})));return o.key=o[0].key,o}}(e,t,{stack:n});return e.mainValues.length>1?e.mainValues.map(a):a(e.mainValues[0])}var Ne=10;function Le(e,t,r){let n=a.Ys(A(e).getContainer()).node().getBoundingClientRect(),o=e.getBoundingClientRect(),i={top:o.top+r-Ne,right:o.right+t+Ne,bottom:o.bottom+r+Ne,left:o.left+t-Ne},l={x:t,y:r};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach((e=>{if(K(n,i,e.edge)){let t=i[e.edge]-n[e.edge];l[e.dimension]=l[e.dimension]-t}})),l}var Te="resize.for-dragging";function ze(){let e=!0,t=null,r=r=>{let n=r.node(),o=n.getRootNode().host.closest("perspective-viewer");n.style.cursor="move",t.legend&&(n.style.left=t.legend.left,n.style.top=t.legend.top);let i=a.ohM().on("drag",(function(r){let o=Le(this,r.dx,r.dy);this.style.left=`${this.offsetLeft+o.x}px`,this.style.top=`${this.offsetTop+o.y}px`;let i={left:this.style.left,top:this.style.top};t.legend={...t.legend,...i},e=function(e){let t=e.getBoundingClientRect(),r=a.Ys(E(e)).node().getBoundingClientRect(),n=5;return t.right+Ne+n>=r.right&&t.top-Ne-n<=r.top}(n)?function(e){return a.Ys(window).on(Te,null),e.style.left="auto",!0}(n):function(e,t){return!1!==t&&a.Ys(window).on(Te,(function(){let t=Le(e,0,0);e.style.left=`${e.offsetLeft+t.x}px`,e.style.top=`${e.offsetTop+t.y}px`})),!1}(n,e)}));i.on("end",(function(e){a.Ys(window).on(Te,null),o?.dispatchEvent(new Event("perspective-config-update"))})),r.call(i)};return r.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],r):t},r}var De="horizontal-drag-handle",Re="vertical-drag-handle",Ye="dragHandles",Be="resize";var je=(e,t,r,n)=>{e.selectAll(`.${n}`).each(((e,n,o)=>{let i=o[n];a.Ys(i).attr(r,i.getBoundingClientRect()[r]-t)}))},$e=e=>e.select(`#${Ye}`).size()>0,Ie=(e,t,r)=>e.attr(t,Number(e.attr(t))-r),He=(e,t,r)=>e.attr(t,e.node().getBoundingClientRect()[t]-r),Xe=(e,t)=>{let r,o,i=e||l.wg(),s=[],c=1,u=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,d=()=>{},g=ze().settings(t),p=e=>{s=i.scale().domain(),o=function(){let e=9,t=3,r=null,n={height:100,width:100},o={height:null,width:null},i=[],l=(e,t)=>i.filter((t=>t.event===e)).forEach((e=>e.execute(t))),s=n=>{if($e(n))return;let i={left:e=>l(Be,{horizontal:E(e),vertical:!1}),top:e=>l(Be,{horizontal:!1,vertical:P(e)}),right:e=>l(Be,{horizontal:V(e),vertical:!1}),bottom:e=>l(Be,{horizontal:!1,vertical:M(e)}),topleft:e=>l(Be,{horizontal:E(e),vertical:P(e)}),topright:e=>l(Be,{horizontal:V(e),vertical:P(e)}),bottomright:e=>l(Be,{horizontal:V(e),vertical:M(e)}),bottomleft:e=>l(Be,{horizontal:E(e),vertical:M(e)})},s=n.node();r.legend&&(s.style.height=r.legend.height,s.style.width=r.legend.width);let d=s.getBoundingClientRect(),g=n.append("svg").attr("id",Ye).attr("width",d.width).attr("height",d.height),p=g.append("g"),_=e=>"left"===e||"right"===e,h={left:0,top:e,right:d.width-e,bottom:e},b={left:e,top:0,right:e,bottom:d.height-e},[f,m,w,y]=["left","top","right","bottom"].map((r=>p.append("rect").attr("id",`drag${r}`).attr("class",_(r)?Re:De).attr("y",b[r]).attr("x",h[r]).attr("height",_(r)?d.height-2*e:e).attr("width",_(r)?e:d.width-2*e).attr("fill",_(r)?"lightgreen":"lightblue").attr("fill-opacity",0).style("z-index",t).attr("cursor",_(r)?"ew-resize":"ns-resize").call(a.ohM().on("drag",i[r])))),v=e=>`${e[0]}${e[1]}`,x={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},[S,k,C,A]=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]].map((r=>p.append("rect").attr("id",`drag${v(r)}`).attr("class",`corner-drag-handle ${r[0]} ${r[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",0).style("z-index",t).attr("cursor",`${x[v(r)]}-resize`).call(a.ohM().on("drag",i[v(r)]))));function E(e){let t=u(Le(f.node(),e.x,0).x,g,"width",((e,t)=>e-t));return s.style.left=`${s.offsetLeft+t}px`,s.style.width=s.offsetWidth-t+"px",O(),N(w,t,"width","x")}function V(e){let t=-u(Le(w.node(),e.dx,0).x,g,"width",((e,t)=>e+t));return!c(t,"x",w,e)&&(s.style.width=s.offsetWidth-t+"px",O(),N(w,t,"width","x"))}function P(e){let t=u(Le(m.node(),0,e.y).y,g,"height",((e,t)=>e-t));return s.style.top=`${s.offsetTop+t}px`,s.style.height=s.offsetHeight-t+"px",O(),N(y,t,"height","y")}function M(e){let t=-u(Le(y.node(),0,e.dy).y,g,"height",((e,t)=>e+t));return!c(t,"y",y,e)&&(s.style.height=s.offsetHeight-t+"px",O(),N(y,t,"height","y"))}function O(){let e={top:s.style.top,left:s.style.left,height:s.style.height,width:s.style.width};r.legend={...r.legend,...e}}function N(e,t,r,n){return He(g,r,t),Ie(e,n,t),je(g,t,r,"height"===r?Re:De),L(g),0!=t}function L(t){S.attr("y",0),k.attr("y",0).attr("x",t.attr("width")-e),C.attr("y",t.attr("height")-e).attr("x",t.attr("width")-e),A.attr("y",t.attr("height")-e).attr("x",0)}function T(e,t,r){o[e]&&o[e]<d[e]&&(s.style[e]=`${o[e]}px`,N(r,d[e]-o[e],e,t))}T("height","y",y),T("width","x",w),L(g)};function c(e,t,r,n){return a=t,o=r,e<0&&n[a]<Number(o.attr(a))||((e,t,r,n)=>e>0&&n[t]>Number(r.attr(t)))(e,t,r,n);var a,o}function u(e,t,r,a){let i=a(Number(t.attr(r)),e);return i<n[r]?a(e,n[r]-i):o[r]&&i>o[r]?a(e,o[r]-i):e}return s.on=(e,t)=>(i.push({event:e,execute:t}),s),s.zIndex=e=>(t=e,s),s.settings=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s.minWidth=e=>(n.width=e,o.width&&(o.width=Math.max(n.width,o.width)),s),s.minHeight=e=>(n.height=e,o.height&&(o.height=Math.max(n.height,o.height)),s),s.handleWidth=t=>(e=t,s),s.maxWidth=e=>(o.width=e,n.width=Math.min(n.width,o.width),s),s.maxHeight=e=>(o.height=e,n.height=Math.min(n.height,o.height),s),s}().settings(t).maxHeight(16*s.length+20).on("resize",(()=>_(e))),o(e),g(e),_(e)},_=e=>{w(e),h(e),b(e),function(e){let t=e.select("g.legendCells"),r=e.node().getBoundingClientRect();if(!K(r,t.node().getBoundingClientRect()))return;let n=e.select(".legend");t.selectAll(".label").text(((e,t,a)=>{let o=a[t];if(K(r,o.getBoundingClientRect())){let t=function(e,t,r){let n=e.getBoundingClientRect(),a=t.node().createSVGPoint(),o=3;return a.x=r.right-n.left-o,a.y=0,e.getCharNumAtPosition(a)}(o,n,r);return`${e.substring(0,t-3)}...`}return e}))}(e)},h=e=>{let t=v(e);t.style("display",c<=1?"none":"block"),t.select("#page-text").text(`${u+1}/${c}`),t.select("#up-arrow").attr("class",0===u?"disabled":"").on("click",(()=>{u>0&&(f(u-1),_(e))})),t.select("#down-arrow").attr("class",u>=c-1?"disabled":"").on("click",(()=>{u<c-1&&(f(u+1),_(e))}))},b=e=>{c>1&&i.cellFilter(m()),e.select("g.legendCells").remove();let t=x(e);t.call(i);let r=e.select("g.legendCells").node().getBBox();t.attr("height",r.height+20),d(e)},f=e=>{u=e,t.legend={...t.legend,pageIndex:u}},m=()=>(e,t)=>t>=r*u&&t<r*u+r,w=e=>{let t=e.node().getBoundingClientRect(),n=Math.floor(t.height/16)-1;r=n<s.length?n-1:n,c=y(n),u=Math.min(u,c-1)},y=e=>Math.ceil(s.length/e),v=e=>J(e,".legend-controls",(()=>e.append("g").attr("class","legend-controls").html('<span id="up-arrow">&#9650;</span>\n<span id="page-text"></span>\n<span id="down-arrow">&#9660;</span>\n'))),x=e=>J(e,".legend",(()=>e.append("svg").attr("class","legend")));return p.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],p):d},(0,n.rebindAll)(p,i),p},Fe=e=>Xe(l.wg().shape("circle").shapeRadius(6),e),We=e=>Xe(l.ry().shapePadding(1).labelOffset(3),e),Ue=()=>Ge(Fe),qe=()=>Ge(We,Ze);function Ze(e){if(!e)return null;let t=e.domain(),r=e.range().map((e=>a.NAG().type(e)()));return a.PKp().domain(t).range(r)}function Ge(e,t){void 0===t&&(t=void 0);let r={},n=null,a=null,o=t=>{if(n&&n.range().length>1){let o=e(r);o.scale(n).orient("vertical").on("cellclick",(function(e){let t=this.__data__;r.hideKeys=r.hideKeys||[],r.hideKeys.includes(t)?r.hideKeys=r.hideKeys.filter((e=>e!==t)):r.hideKeys.push(t),A(this)._draw()})),o.labels((e=>{let t=String(e.domain[e.i]).split("|");return r.mainValues.length<=1&&t.length>1?t.slice(0,t.length-1).join("|"):e.domain[e.i]}));let i=J(t,"div.legend-container",(()=>t.append("div")));o.decorate((e=>{let t=e=>r.hideKeys&&r.hideKeys.includes(e),n=e.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");n.classed("hidden",t),n.append("title").html((e=>e)),a&&n.select("circle, path").style("fill",(e=>t(e)?null:a(e))).style("stroke",(e=>t(e)?null:ke(a(e))))})),i.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(o)}};return o.settings=function(){return 0===arguments.length?r:(r=arguments.length<=0?void 0:arguments[0],o)},o.scale=function(){return arguments.length?(n=t?t(arguments.length<=0?void 0:arguments[0]):arguments.length<=0?void 0:arguments[0],o):n},o.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function Qe(e,t){void 0===t&&(t=void 0);let r=t||e.data;return(e.hideKeys?.length??0)>0?r.map((t=>{let r={...t};return e.hideKeys.forEach((e=>{delete r[e]})),r})):r}function Je(e){let t=e.data,r=e.hideKeys?.length??0,n=e.splitValues.length;return r>0?0===n?t.filter((t=>Object.values(t).reduce(((t,r)=>t&&!e.hideKeys.includes(r)),!0))):t.map((t=>{let r=Object.entries(t).filter((t=>{let[r,n]=t;return!e.hideKeys.includes(we(r))}));return Object.fromEntries(r)})):t}var Ke=e=>t=>{t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb",t.lineWidth=1},et=e=>e.style("display","none"),tt=e=>t=>{t.lineWidth=1,t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb"},rt=(e,t)=>{let r="both",a=!1,o=null,i=null,l=null,s=n.seriesSvgMulti(),c=n.annotationSvgGridline(),u=(e=>t=>t.style("stroke-width","1.0").style("stroke",e?e.colorStyles.grid.gridLineColor:"#bbb"))(t),d=et,g=function(){a&&(s=n.seriesCanvasMulti().context(l),c=n.annotationCanvasGridline(),u=Ke(t),d=tt(t));let g=s.xScale(o).yScale(i),p="vertical"===r?d:u,_="horizontal"===r?d:u,h=c.xDecorate(p).yDecorate(_);return g.series([h,e])(...arguments)};return g.orient=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],g):r},g.canvas=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],g):a},g.xScale=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],g):o},g.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.context=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],g):l},g},nt=()=>{let e=S(),t=t=>{let r=e.pad(),n=e.padUnit(),a=1;switch(n){case"domain":break;case"percent":a=t[1]-t[0];break;default:throw new Error("Unknown padUnit: "+n)}let o=t[0]-r[0]*a,i=t[1]+r[1]*a;return t[0]=t[0]>=0&&o<0?0:o,t[1]=t[1]<=0&&i>0?0:i,t};return t.pad=function(){return e.pad()},t.padUnit=function(){return e.padUnit()},n.rebindAll(t,e),t},at=()=>{let e=null,t=null,r=null,n=null,o=null,i=null,l=!1,s=!1,c=()=>{};function u(c){let u=`d3fc-${s?"canvas":"svg"}.plot-area`;if(r||o){let p=n&&n.domain()[0]instanceof Date,_=a.sPX().on("zoom",(l=>{let{transform:s}=l;t.zoom={k:s.k,x:s.x,y:s.y},d(s),c.call(e);let h=1===s.k&&0===s.x&&0===s.y,b=g(c).style("display",h?"none":"");b.select("#zoom-reset").on("click",(()=>c.select(u).call(_.transform,a.CRH)));let f=b.select("#one-year").style("display",p?"":"none"),m=b.select("#six-months").style("display",p?"":"none"),w=b.select("#one-month").style("display",p?"":"none");if(p){let e=e=>()=>{let t=new Date(r.domain()[0]),l=new Date(t);e(t,l);let s=n.range(),d=(s[1]-s[0])/(n(l)-n(t)),g=-n(t)*d,p=0;if(o){let e=o.domain().reduce(((e,t)=>e+t))/2;p=-i(e)*d+o(e)}c.select(u).call(_.transform,a.CRH.translate(g,p).scale(d))};f.on("click",e(((e,t)=>t.setYear(e.getFullYear()+1)))),m.on("click",e(((e,t)=>t.setMonth(e.getMonth()+6)))),w.on("click",e(((e,t)=>t.setMonth(e.getMonth()+1))))}})),h=e.decorate();e.decorate(((e,r)=>{if(h(e,r),!l){l=!0;let r=e.select(u),o=s?window.devicePixelRatio:1;r.on("measure.zoom-range",(e=>{if(n&&n.range([0,e.detail.width/o]),i&&i.range([0,e.detail.height/o]),t.zoom){let e=a.CRH.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);r.call(_.transform,e)}})).call(_)}}))}c.call(e)}u.chart=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.xScale=function(){return arguments.length?(r=p(arguments.length<=0?void 0:arguments[0]),n=r?r.copy():null,u):r},u.yScale=function(){if(!arguments.length)return o;if(o=p(arguments.length<=0?void 0:arguments[0]),i=o?o.copy():null,i){let e=i.domain();i.domain([e[1],e[0]])}return u},u.canvas=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],u):s},u.onChange=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],u):c};let d=e=>{let t={...e};if(r&&(r.domain(e.rescaleX(n).domain()),t.xDomain=r.domain()),o){let r=e.rescaleY(i).domain();o.domain([r[1],r[0]]),t.yDomain=o.domain()}c(t)},g=e=>J(e,".zoom-controls",(()=>e.append("div").attr("class","zoom-controls").style("display","none").html('<button id="zoom-reset">Reset zoom</button>\n<button id="one-year">1 Year</button>\n<button id="six-months">6 Months</button>\n<button id="one-month">1 Month</button>\n'))),p=e=>e&&e.nice?e:null;return u};function ot(e,t){let r=Me(t,Qe(t)),a=ve(t),o=Ue().settings(t).scale(a),i=fe(t,a).orient("horizontal"),l=n.seriesSvgMulti().mapping(((e,t)=>e[t])).series(r.map((()=>i))),s=q(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[0]).excludeType(g).include([0]).paddingStrategy(nt())(r),c=q(t).excludeType(_).settingName("crossValues").valueName("crossValue").orient("vertical")(r),u=Z(s,c).plotArea(rt(l,t).orient("horizontal"));u.yPaddingInner&&(u.yPaddingInner(.5),u.yPaddingOuter(.25),i.align("left")),u.xNice&&u.xNice();let d=at().chart(u).settings(t).yScale(c.scale);e.datum(r).call(d),e.call(o)}ot.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["X Axis"]}};var it=ot,lt=e=>2===e.length&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],st=e=>(0-e[0])/(e[1]-e[0]),ct=(e,t)=>t*e[1]/(t-1),ut=function(e,t,r){void 0===r&&(r=dt);let a,o,i,l=e.splitMainValues||[],s=e=>{let t=e.split("|");return l.includes(t[t.length-1])},c=e.mainValues.some((e=>s(e.name)));o=c?r(t,(e=>!s(e))):t,i=c?r(t,s):null;let u=t=>{if(1===e.mainValues.length)return;let r=e.mainValues.map(((e,t)=>({index:t,name:e.name}))),o=r.filter((e=>!s(e.name))),i=r.filter((e=>s(e.name))),l=()=>(e=>{let t,r=[],a=!1,o=o=>{o.text("");let l=n.dataJoin("span","splitter-label").key((e=>e)),s=!a&&1===r.length,c=t&&0===e.splitValues.length;l(o,r).classed("disabled",s).text((e=>e.name)).style("color",(e=>c?ke(t(e.name)):void 0)).on("click",((t,r)=>{s||(e.splitMainValues=a?e.splitMainValues.filter((e=>e!=r.name)):[r.name].concat(e.splitMainValues||[]),t.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),i(o))}))},i=e=>{let t=A(e.node());t._container.innerHTML="",t._draw()};return o.labels=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.alt=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o.color=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o})(e).color(a);t.select(".y-label.left-label").call(l().labels(o)),t.select(".y-label.right-label").call(l().labels(i).alt(!0))};return u.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],u):a},u.haveSplit=()=>c,u.data=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.altData=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u},dt=(e,t)=>e.map((e=>e.filter((e=>t(e.key))))),gt=(e,t)=>e.map((e=>t(e.key)?e:e.map((e=>Object.assign({},e,{mainValue:null}))))),pt=(e,t)=>e.map((e=>gt(e,t)));function _t(e,t){let r=Me(t,Qe(t)),a=ve(t),o=Ue().settings(t).scale(a),i=fe(t,a).orient("vertical"),l=n.seriesSvgMulti().mapping(((e,t)=>e[t])).series(r.map((()=>i))),s=q(t).excludeType(_).settingName("crossValues").valueName("crossValue")(r),c=q(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(g).orient("vertical").include([0]).paddingStrategy(nt()),u=t.mainValues.length>1?pt:gt,d=ut(t,r,u).color(a),p=c(d.data()),h=d.haveSplit()?l:rt(l,t).orient("vertical"),b=Z(s,p).axisSplitter(d).plotArea(h);b.xPaddingInner&&(b.xPaddingInner(.5),b.xPaddingOuter(.25),i.align("left")),b.yNice&&b.yNice();let f=at().chart(b).settings(t).xScale(s.scale);if(d.haveSplit()){let e=c(d.altData());((e,t)=>{if(!lt(e)||!lt(t))return;let r=st(e),n=st(t);r>n?t[0]=ct(t,r):e[0]=ct(e,n)})(p.domain,e.domain),b.yDomain(p.domain).altAxis(e)}e.datum(d.data()).call(f),e.call(o)}_t.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var ht=_t;function bt(e,t){let r=n.seriesSvgLine(),a=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),o=Math.max(1,Math.min(3,Math.floor(e.size.width/a/2)));return r=r.decorate((e=>{e.style("stroke",(e=>ke(t(e[0]&&e[0].key)))).style("stroke-width",o)})),r.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue))}var ft=function(e){let t=[];for(let r of e)for(let e=0;e<r.length;e++)null!==r[e].mainValue&&(t[e]=t[e]||[],t[e].push(r[e]));return t},mt=function(e,t,r){void 0===r&&(r=Math.min);let n=e=>e.reduce(((e,t)=>{let n=a(t);return!n||e&&r(e.value,n.value)!==n.value?e:n}),null),a=e=>{if(Array.isArray(e))return n(e);let r=t(e);return null!==r?{item:e,value:r}:null},o=n(e);return o?o.item:null},wt=()=>{let e=he().alwaysShow(!0),t=null,r=null,a=null,o=null,i=!1,l=null,s="crossValue",c="mainValue",u=null,d=1,g=a=>{let o=`d3fc-${i?"canvas":"svg"}.plot-area`;if(t||r){let t=null,i=n.pointer().on("point",(e=>{let n=e.length?_(e[0]):null;t=n?[n.data]:[];let o=n?n.scale:r;p(a,t,o)}));a.select(o).on("measure.nearbyTip",(()=>p(a,[]))).on("click",(()=>{t.length&&_e(a.node(),t[0],e.settings())})).call(i)}},p=function(n,i,l){void 0===l&&(l=r);let u=n.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(i);u.exit().remove(),u.enter().append("circle").attr("class","nearbyTip").merge(u).attr("r",(e=>o?d*Math.sqrt(o(e.size)):10)).attr("transform",(e=>`translate(${t(e[s])},${l(e[c])})`)).style("stroke","none").style("fill",(e=>a&&e.key&&Ce(a(e.key)))),e(u)},_=e=>{let n=r=>n=>void 0===n[c]||null===n[c]||void 0===n[s]||null===n[s]?null:Math.sqrt(Math.pow(t(n[s])-e.x,2)+Math.pow(r(n[c])-e.y,2)),a=n(r),o=mt(l,a,Math.min);if(u){let e=n(u.yScale),t=mt(u.data,e,Math.min);return a(o)<=e(t)?{data:o,scale:r}:{data:t,scale:u.yScale}}return{data:o,scale:r}};return g.scaleFactor=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],g):d},g.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],g):t},g.yScale=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],g):r},g.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],g):a},g.size=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length?(o=t[0]?t[0].copy().range([40,4e3]):null,g):o},g.canvas=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.data=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],g):l},g.xValueName=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],g):s},g.yValueName=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},g.altDataWithScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},g.settings=function(){return arguments.length?(e.settings(arguments.length<=0?void 0:arguments[0]),g):e.settings()},n.rebindAll(g,e),g};function yt(e,t){let r=function(e,t){let r=Ve(e);return t.map(((e,t)=>Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).map((n=>({key:n,crossValue:r(e,t),mainValue:e[n],row:e})))))}(t,Qe(t)),a=ve(t),o=Ue().settings(t).scale(a),i=n.seriesSvgRepeat().series(bt(t,a)).orient("horizontal"),l=nt().pad([.1,.1]).padUnit("percent"),s=ut(t,ft(r)).color(a),c=q(t).excludeType(_).settingName("crossValues").valueName("crossValue")(r),u=q(t).settingName("mainValues").valueName("mainValue").memoValue(s.haveSplit()?null:t.axisMemo[0]).orient("vertical").paddingStrategy(l),d=u(s.data()),g=s.haveSplit()?i:rt(i,t).orient("vertical"),p=Z(c,d).axisSplitter(s).plotArea(g);p.yNice&&p.yNice();let h=at().chart(p).settings(t).xScale(c.scale),b=wt().settings(t).xScale(c.scale).yScale(d.scale).color(a).data(r);if(s.haveSplit()){let e=u(s.altData());p.altAxis(e),b.data(s.data()).altDataWithScale({yScale:e.scale,data:s.altData()})}let f=s.data();e.datum(f).call(h),e.call(b),e.call(o)}yt.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var vt=yt,xt=Math.sqrt(3),St={draw:function(e,t){let r=Math.sqrt(t/(3*xt));e.moveTo(0,2*r),e.lineTo(-xt*r,-r),e.lineTo(xt*r,-r),e.closePath()}},kt=[a.JFv,a.tJO,a.rZl,a.m_s,a.Hmc,a.P67,a.n31],Ct={circle:a.JFv,square:a.m_s,cross:a.tJO,diamond:a.rZl,star:a.Hmc,triangle:a.P67,wye:a.n31,nabla:St};function At(e){return e.length>1?a.PKp().domain(e).range(kt):null}function Et(e,t){let r=ft(function(e,t){let r=e.mainValues.length;return t.map((e=>{let t=Object.keys(e).filter((e=>"__ROW_PATH__"!==e)),n=new Array(t.length/r);for(let a=0;a<t.length/r;a++)n[a]={key:we(t[a*r]),crossValue:e[t[a*r]],mainValue:e[t[a*r+1]],row:e};return n}))}(t,Je(t))),a=function(e){let t=e.data[0]??{},r=Object.keys(t).filter((e=>"__ROW_PATH__"!==e)).map((e=>we(e))),n=[...new Set(r)];return Se().settings(e).domain(n)()}(t),o=function(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=[];return Object.keys(t).forEach((e=>{if("__ROW_PATH__"!==e){let t=we(e);r.includes(t)||r.push(t)}})),At(r)}(t),i=null;a.domain().length>=2&&(i=Ge(Fe,Ze).settings(t).scale(o).color(a));let l=n.seriesSvgRepeat().series(bt(t,a)).orient("horizontal"),s=nt().pad([.1,.1]).padUnit("percent"),c=q(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").memoValue(t.axisMemo[0]).paddingStrategy(s),u=q(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(s)(r),d=c(r),g=rt(l,t).orient("vertical"),p=Z(d,u).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(g);p.xNice&&p.xNice(),p.yNice&&p.yNice();let _=at().chart(p).settings(t).xScale(d.scale).yScale(u.scale),h=wt().settings(t).xScale(d.scale).yScale(u.scale).color(a).data(r);e.datum(r).call(_),e.call(h),i&&e.call(i)}Et.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Vt=Et;function Pt(e,t){let r=function(e,t){let r=Ve(e);return t.map(((e,t)=>{let n={};return Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).map((a=>{let o=a.split("|"),i=o[o.length-1],l=n[i]||0,s=l+e[a];return n[i]=s,{key:a,crossValue:r(e,t),mainValue:s,baseValue:l,row:e}}))}))}(t,Qe(t)),a=ve(t),o=Ue().settings(t).scale(a),i=n.seriesSvgRepeat().series(function(e,t){let r=n.seriesSvgArea();return r=r.decorate((e=>{e.style("fill",(e=>t(e[0].key))).style("opacity",.5)})),r.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue)).baseValue((e=>e.baseValue))}(0,a).orient("vertical")),l=n.seriesSvgRepeat().series(bt(t,a)).orient("vertical"),s=n.seriesSvgMulti().series([i,l]),c=q(t).excludeType(_).settingName("crossValues").valueName("crossValue")(r),u=q(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(g).orient("vertical").include([0]).paddingStrategy(nt()),d=ut(t,r).color(a),p=u(d.data()),h=d.haveSplit()?s:rt(s,t).orient("vertical"),b=Z(c,p).axisSplitter(d).plotArea(h);b.yNice&&b.yNice();let f=at().chart(b).settings(t).xScale(c.scale),m=wt().settings(t).xScale(c.scale).yScale(p.scale).color(a).data(r);if(d.haveSplit()){let e=u(d.altData());b.altAxis(e),m.data(d.data()).altDataWithScale({yScale:e.scale,data:d.altData()})}e.datum(d.data()).call(f),e.call(m),e.call(o)}Pt.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Mt=Pt;function Ot(e,t){let r=function(e,t){let r={stack:!1},n=Pe(e,t,r).map((t=>Oe(e,t,r)));return e.mainValues.length>1?n.reduce(((e,t)=>e.concat(t))):n}(t,Qe(t)),a=function(e){let t=e.data&&e.data.length>0?e.data[0]:{};return At(Object.keys(t).filter((e=>"__ROW_PATH__"!==e)))}(t),o=ve(t),i=qe().settings(t).scale(a).color(o),l=n.seriesSvgMulti().mapping(((e,t)=>e[t])).series(r.map((e=>function(e,t,r,a){let o=n.seriesSvgPoint().size(100),i=e.colorStyles&&e.colorStyles.opacity;return a&&o.type(a(t)),o.decorate((e=>{e.style("stroke",(e=>ke(r(e.colorValue||t)))).style("fill",(e=>Ce(r(e.colorValue||t),i)))})),o.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue))}(t,e.key,o,a)))),s=nt().pad([.05,.05]).padUnit("percent"),c=q(t).excludeType(_).settingName("crossValues").valueName("crossValue")(r),u=q(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(s),d=ut(t,r).color(o),g=u(d.data()),p=d.haveSplit()?l:rt(l,t).orient("vertical"),h=Z(c,g).axisSplitter(d).plotArea(p);h.yNice&&h.yNice();let b=at().chart(h).settings(t).xScale(c.scale),f=wt().settings(t).xScale(c.scale).yScale(g.scale).color(o).data(r);if(d.haveSplit()){let e=u(d.altData());h.altAxis(e),f.data(d.data()).altDataWithScale({yScale:e.scale,data:d.altData()})}e.datum(d.data()).call(b),e.call(f),i&&e.call(i)}Ot.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Nt=Ot;function Lt(e,t){return Pe(e,t,{excludeEmpty:!0}).map((t=>function(e,t){let r=Ve(e),n=t.map(((n,a)=>({crossValue:r(n,a),mainValues:e.mainValues.map((e=>n[e.name])),x:n[e.mainValues[0].name],y:n[e.mainValues[1].name],colorValue:e.realValues[2]?n[e.realValues[2]]:void 0,size:e.realValues[3]?n[e.realValues[3]]:void 0,key:t.key,row:n})));return n.key=t.key,n}(e,t)))}function Tt(e,t,r,n){void 0===n&&(n=null);let o=zt(t,r,n),i=e.colorStyles.gradient.full;if(o[0]>=0)i=e.colorStyles.gradient.positive;else if(o[1]<=0)i=e.colorStyles.gradient.negative;else{let e=Math.max(-o[0],o[1]);o=[-e,e]}let l=Dt(i);return a.cJy(l).domain(o)}var zt=(e,t,r)=>r||P().valueName(t).pad([0,0])(e),Dt=e=>{let t=e.slice(1).map(((t,r)=>a.sXR(e[r][1],t[1])));return r=>{let n=e.findIndex(((t,n)=>n<e.length-1&&r<=e[n+1][0]&&r>t[0]));if(-1===n)return r<=e[0][0]?e[0][1]:e[e.length-1][1];let a=t[n],[o]=e[n],[i]=e[n+1];return a((r-o)/(i-o))}};function Rt(){let e=null;function t(t){let r=J(t,"div.legend-container",(()=>t.append("div").attr("class","legend-container legend-color").style("z-index","2"))),{width:o,height:i}=r.node().getBoundingClientRect(),l=a.tiA().domain([0,1]).range([0,o]),s=e.copy().nice().domain(),c=n.extentLinear().pad([.1,.1]).padUnit("percent")(s),[u,d]=c,g=a.w6H(u,d,(d-u)/i),p=a.BYU().domain(c).range([i,0]),_=n.autoBandwidth(n.seriesSvgBar()).xScale(l).yScale(p).crossValue(0).baseValue(((e,t)=>g[Math.max(0,t-1)])).mainValue((e=>e)).decorate((t=>{t.selectAll("path").style("fill",(t=>e(t)))})),h=s[0]<0&&s[1]>0?0:Math.round((s[1]+s[0])/2),b=[...s,h],f=C(u,d),m=n.axisRight(p).tickValues(b).tickSizeOuter(0).tickFormat((e=>f(e))),w=J(r,"svg",(()=>r.append("svg"))).style("width",o).style("height",i),y=J(w,"g",(()=>w.append("g"))).datum(g).call(_),v=Math.abs(y.node().getBBox().x);J(w,"#legend-axis",(()=>w.append("g").attr("id","legend-axis"))).attr("transform",`translate(${v})`).datum(g).call(m).select(".domain").attr("visibility","hidden")}return t.scale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t}function Yt(){let e="element-prefix-unset",t=null,r=null,n=null,a=null,o=null,i=!0,l=null,s=s=>{let c=J(s,"div.outer-container",(()=>s.append("div").attr("class","outer-container").style("width",`calc(100% - ${l??0})`).style("height",`calc(100% - ${l??0})`).style("padding-left",l??0))),u=J(c,"div.inner-container",(()=>c.append("div").attr("class","inner-container"))),d=c.node().getBoundingClientRect(),g=d.height,p=d.width-0,_=s.datum(),h=Math.max(1,Math.min(_.length,Math.floor(p/300))),b=Math.ceil(_.length/h);o={width:p/Math.max(h,1),height:Math.min(g,Math.max(g/b,p/Math.max(h,1)))},g/b>.75*o.height&&(o.height=g/b),_.length>1?(u.style("grid-template-columns",`repeat(${h}, ${100/h}%)`),u.style("grid-template-rows",`repeat(${b}, ${o.height}px)`)):(u.style("grid-template-columns","repeat(1, 100%)"),u.style("grid-template-rows","repeat(1, 100%)")),n=u.selectAll(`div.${e}-container`).data(_,(e=>e.split)),n.exit().remove(),r=n.enter().append("div").attr("class",`${e}-container`),a=r.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),t=i?r.append("svg").append("g").attr("class",e):r.append("div").attr("class",e)};return s.padding=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.svg=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.elementsPrefix=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],s):e},s.chartContainer=()=>t,s.chartEnter=()=>r,s.chartDiv=()=>n,s.chartTitle=()=>a,s.containerSize=()=>o,s}function Bt(){let e=null,t=null,r=null,o=null,i=i=>{let l=!!e.realValues[2],s=e.realValues[4],c=e.realValues[3]?function(e,t,r,n){return a.BYU().domain(zt(t,r,n))}(0,t,"size").range([10,1e4]):null,u=e.realValues[5],d=function(e,t){let[r,n]=e,[a,o]=t,i=(o-n)/(a-r),l=o-i*a;return function(e){let t=e.node(),r=Math.min(t.clientWidth,t.clientHeight);return Math.min(o,Math.max(n,i*r+l))}}([600,.1],[1600,1])(i),g=n.seriesCanvasMulti().mapping(((e,t)=>e[t])).series(t.map((()=>function(e,t,r,a,o,i,l){void 0===l&&(l=1);let s=(0,n.seriesCanvasPoint)().crossValue((e=>e.x)).mainValue((e=>e.y));return i&&s.type((e=>i(e.row[t]))),r&&s.size((e=>Math.round(l*r(e.size)))),s.decorate(((t,n)=>{let i=a(n.colorValue),s=e.colorStyles?.opacity;if(o){let{type:a}=e.mainValues.find((e=>e.name===o)),i=le(a,n.row[o]);if(null!==i){t.fillStyle=e.textStyles.color,t.font=e.textStyles.font;let a=0;r&&(a=1*Math.sqrt(l*r(n.size)/Math.PI));let o=a+8;t.fillText(i,o,4)}}t.strokeStyle=ke(i),t.fillStyle=Ce(i,s)})),s}(e,s,c,r,u,o,d)))),p=()=>q(e).settingName("mainValues").paddingStrategy(nt()).pad([.1,.1]),_=p().settingValue(e.mainValues[0].name).memoValue(e.axisMemo[0]).valueName("x")(t),h=p().orient("vertical").settingValue(e.mainValues[1].name).memoValue(e.axisMemo[1]).valueName("y")(t),[b,f]=0===e.splitValues.length?[e.mainValues[0].name,e.mainValues[1].name]:["",""],m=G(_,h).xLabel(b).yLabel(f).plotArea(rt(g,e).canvas(!0));m.xNice&&m.xNice(),m.yNice&&m.yNice();let w=at().chart(m).settings(e).xScale(_.scale).yScale(h.scale).canvas(!0),y=wt().scaleFactor(d).settings(e).canvas(!0).xScale(_.scale).xValueName("x").yValueName("y").yScale(h.scale).color(!l&&r).size(c).data(t);i.datum(t).call(w),i.call(y)};return i.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.data=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.symbols=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],i):o},i}function jt(e,t){let r=t.realValues[2],n=!!r,o="string"===t.mainValues.find((e=>e.name===r))?.type,i=null,l=null,s=t.realValues[4],c=function(e,t){return At([...new Set(ye(e,t))])}(t,s),u=function(e,t){if(!t)return;let r=e.realValues[4],n=e.mainValues.find((e=>e.name===r))?.type,o=t.domain(),i=t.range(),l=i.length;for(let[a,c]of o.entries())i[a]=i[a%l];let s=e.columns?.[r]?.symbols??{};return Object.entries(s).forEach((e=>{let[t,r]=e,l=Ct[r]??a.JFv,s=o.findIndex((e=>{switch(n){case"date":case"datetime":return new Date(e).valueOf()===new Date(t).valueOf();default:return String(e)===String(t)}}));i[s]=l})),t.range(i),t}(t,c),d=Lt(t,Je(t));if(n&&o?s?(i=t.splitValues.length>0?xe(t,d):xe(t,d[0]),l=qe().settings(t).scale(u)):(i=function(e,t){let r=ye(e,t),n=[...new Set(r)].sort();return Se().settings(e).domain(n)()}(t,r),l=Ue().settings(t).scale(i)):n?(i=Tt(t,d,"colorValue"),l=Rt().scale(i)):(i=Se().settings(t).domain([""])(),l=qe().settings(t).scale(u)),0!==t.splitValues.length){let r=Yt().svg(!1).elementsPrefix("xy-scatter");r=r.padding("2.5em"),e.append("div").attr("class","multi-xlabel").append("p").text(t.mainValues[0].name),e.append("div").attr("class","multi-ylabel").append("p").text(t.mainValues[1].name).style("transform","rotate(-90deg)").style("text-wrap","nowrap"),(e=e.datum(d)).call(r);r.chartContainer();let n=r.chartEnter(),o=r.chartDiv(),l=r.chartTitle(),s=r.containerSize();l.each(((e,t,r)=>a.Ys(r[t]).text(e.key))),n.merge(o).attr("transform",`translate(${s.width/2}, ${s.height/2})`).each((function(e){let r=a.Ys(this);Bt().settings(t).data([e]).color(i).symbols(u)(r)}))}else Bt().settings(t).data(d).color(i).symbols(u)(e);l&&e.call(l)}jt.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Symbol","Label","Tooltip"]},selectMode:"toggle"};var $t=jt;function It(e,t){let r=function(e,t){let r=Ve(e),n=h(e).excludeType(_).settingName("splitValues")(),a=[];return t.forEach(((e,t)=>{let o=r(e,t);Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).forEach((t=>{let r=function(e){let t=e.split("|");return t.pop(),t.join("|")}(t);a.push({crossValue:o,mainValue:n===p?new Date(r):r,colorValue:e[t],row:e})}))})),a}(t,Qe(t)),a=Tt(t,r,"colorValue"),o=function(e,t){let r=n.seriesCanvasHeatmap();return r.decorate(((e,r)=>{e.fillStyle=t(r.colorValue)})),n.autoBandwidth(r).xValue((e=>e.crossValue)).yValue((e=>e.mainValue)).colorValue((e=>e.colorValue)).colorInterpolate(t.interpolator()).widthFraction(1)}(0,a),i=Rt().scale(a),l=q(t).excludeType(_).settingName("crossValues").valueName("crossValue")(r),s=q(t).excludeType(_).settingName("splitValues").valueName("mainValue").modifyDomain((e=>isNaN(e[0])?e:e.reverse())).orient("vertical")(r),c=G(l,s).plotArea(rt(o,t).canvas(!0));c.xPaddingInner&&(c.xPaddingInner(0),c.xPaddingOuter(0),o.xAlign("right")),c.yPaddingInner&&(c.yPaddingInner(0),c.yPaddingOuter(0),o.yAlign("top"));let u=at().chart(c).settings(t).xScale(l.scale).yScale(s.scale).canvas(!0),d=wt().settings(t).canvas(!0).xScale(l.scale).yScale(s.scale).color(a).data(r);e.datum(r).call(u),e.call(i),e.call(d)}It.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0,initial:{names:["Color"]}};var Ht=It;function Xt(e,t){return Pe(e,t,{excludeEmpty:!0}).map((t=>function(e,t){let r=Ve(e),n=t.map(((n,a)=>{let o=Ft(e.realValues[0],n),i=Ft(e.realValues[1],n);return{crossValue:r(n,a),mainValues:e.mainValues.map((e=>n[e.name])),openValue:o,closeValue:i,highValue:e.realValues[2]?n[e.realValues[2]]:Math.max(o,i),lowValue:e.realValues[3]?n[e.realValues[3]]:Math.min(o,i),key:t.key,row:n}}));return n.key=t.key,n}(e,t)))}function Ft(e,t){if(e){let r=t[e];if("string"==typeof r)return parseFloat(r);if("number"!=typeof r)return}}var Wt=function(e){return function(t,r){let a=Xt(r,Je(r)),o=n.indicatorBollingerBands().value((e=>e.openValue)),i=a.map((e=>{let t=o(e);return e.map(((e,r)=>Object.assign({bollinger:t[r]},e)))})),l=a.map((e=>e.key)).concat(r.hideKeys?r.hideKeys:[]).sort(),s=Se().domain(l).settings(r).mapFunction(Ae(1))(),c=Ue().settings(r).scale(l.length>1?s:null),u=function(e,t,r){let a=r.domain(),o=Se().domain(a).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(Ae(.5))(),i=Se().settings(e).domain(a)(),l=t().crossValue((e=>e.crossValue)).openValue((e=>e.openValue)).highValue((e=>e.highValue)).lowValue((e=>e.lowValue)).closeValue((e=>e.closeValue)).decorate(((e,t)=>{let n=(e=>e.closeValue>=e.openValue)(t)?r(t.key):o(t.key);e.fillStyle=n,e.strokeStyle=n})),s=n.seriesCanvasLine().mainValue((e=>e.bollinger.average)).crossValue((e=>e.crossValue)).decorate(((e,t)=>{e.strokeStyle=i(t[0].key)})),c=n.seriesCanvasArea().mainValue((e=>e.bollinger.upper)).baseValue((e=>e.bollinger.lower)).crossValue((e=>e.crossValue)).decorate(((e,t)=>{e.fillStyle=Ae(.25)(i(t[0].key))}));return n.seriesCanvasMulti().series([c,l,s])}(r,e,s),d=n.seriesCanvasMulti().mapping(((e,t)=>e[t])).series(i.map((()=>u))),g=nt().pad([.1,.1]).padUnit("percent"),p=q(r).settingName("crossValues").valueName("crossValue")(i),_=q(r).settingName("mainValues").valueNames(["lowValue","highValue"]).memoValue(r.axisMemo[1]).orient("vertical").paddingStrategy(g)(i),h=G(p,_).plotArea(rt(d,r).orient("vertical").canvas(!0));h.yNice&&h.yNice();let b=at().chart(h).settings(r).xScale(p.scale).onChange((e=>{let t=i.map((t=>t.filter((t=>t.crossValue>=e.xDomain[0]&&t.crossValue<=e.xDomain[1]))));h.yDomain(_.domainFunction(t))})).canvas(!0),f=wt().settings(r).xScale(p.scale).yScale(_.scale).yValueName("closeValue").color(s).data(i).canvas(!0);t.datum(i).call(b),t.call(f),t.call(c)}},Ut=Wt(n.seriesCanvasOhlc);Ut.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var qt=Ut,Zt=Wt(n.seriesCanvasCandlestick);Zt.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Gt=Zt;function Qt(e,t){if(e.realValues.length>1&&null!==e.realValues[1]){let r=e.realValues[1];if("string"===e.mainValues.find((e=>e.name===r))?.type){return xe(e,t.map((e=>e.data)).filter((e=>e.height>0)).map((e=>Jt(e))).reduce(((e,t)=>e.concat(t))))}return Tt(e,null,null,(e=>{let t=e=>(t,r)=>void 0===t?r:void 0===r?t:e(t,r);return e.reduce(((e,r)=>[t(Math.min)(e[0],r[0]),t(Math.max)(e[1],r[1])]),[void 0,void 0])})(t.map((e=>e.extents))))}}function Jt(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((e=>t.concat(Jt(e,t)))):e.data.color&&t.push(e.data.color),t}function Kt(e){let t={},r=e.realValues.map((t=>null===t?null:e.mainValues.find((e=>e.name===t))));return e.data.forEach(((n,a)=>{let o=Array.isArray(n.__ROW_PATH__)?n.__ROW_PATH__:[];(function(e){let t=[];return Object.keys(e).forEach((e=>{if("__ROW_PATH__"!==e){let r=e.split("|").slice(0,-1).join("|");t.includes(r)||t.push(r)}})),t})(n).forEach((i=>{let l;t[i]||(t[i]=[]),l=t[i],o.forEach(((t,s)=>{let c=l.find((e=>e.name===t));if(c||(c={name:t,children:[]},l.push(c)),e.realValues.length>1&&null!==e.realValues[1]){let t=s===o.length-1,r=er(t?n:e.agg_paths[a][s+1]||n,e.mainValues[1],i);void 0!==r&&(c.color=r)}if(e.realValues.length>2&&null!==e.realValues[2]){c.tooltip=[];for(let t=2;t<e.realValues.length;++t)c.tooltip.push(er(n,r[t],i))}if(s===o.length-1)if(c.name=o.slice(-1)[0],0===e.crossValues.length)c.size=er(n,e.mainValues[0],"");else if(o.length===e.crossValues.length){let t=er(n,e.mainValues[0],i);c.size=t>0?t:0}l=c.children}))}))})),Object.entries(t).map((t=>{let r={name:"root",children:t[1]},n=a.bT9(r).sum((e=>e.size)),o=a.uKc().size([2*Math.PI,n.height+1])(n);return o.each((r=>{r.current=r,r.mainValues=1===e.realValues.length||null===e.realValues[1]&&null===e.realValues[2]?r.value:[r.value,r.data.color].concat(r.data.tooltip||[]).filter((e=>void 0!==e)),r.crossValue=r.ancestors().slice(0,-1).reverse().map((e=>e.data.name)),r.key=t[0],r.label=le(e.crossValues[r.depth-1<0?0:r.depth-1]?.type||e.mainValues[0].type,r.data.name)})),{split:t[0],data:o,extents:tr(e,t)}}))}var er=(e,t,r)=>r.length?e[`${r}|${t.name}`]:e[t.name];function tr(e,t){let[r,n]=t;if(e.realValues.length>1&&null!==e.realValues[1]){return[Math.min(...e.data.map((t=>er(t,e.mainValues[1],r)))),Math.max(...n.map((e=>e.color)))]}}var rr=e=>(0,a.Nb1)().startAngle((e=>e.x0)).endAngle((e=>e.x1)).padAngle((e=>Math.min((e.x1-e.x0)/2,.005))).padRadius(e).innerRadius((t=>Math.max(1,(t.y0-1)*e))).outerRadius((t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1))),nr=e=>e.y0>=1&&e.x1>e.x0,ar=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function or(e,t){let r=(e.x0+e.x1)/2*180/Math.PI;return`rotate(${r-90}) translate(${(e.y0-1+(e.y1-1))/2*t},0) rotate(${r<180?0:180})`}function ir(e,t){let r=this.getBBox().width;if(r>t){let n=e.label,o=(0,a.Ys)(this);for(;r>t;)n=n.substring(0,n.length-1),o.text((()=>n)),r=this.getBBox().width;o.text((()=>`${n.substring(0,n.length-3).replace(/\s+$/,"")}...`))}}var lr=(e,t,r,n,o,i,l,s,c)=>(u,d)=>{c.sunburstLevel[s]=u.data.name,u.parent?(r.datum(u.parent),r.style("cursor","pointer"),n.html(`&#8682; ${u.label}`)):(r.datum(e),r.style("cursor","default"),n.html("")),e.each((e=>e.target={x0:2*Math.max(0,Math.min(1,(e.x0-u.x0)/(u.x1-u.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(e.x1-u.x0)/(u.x1-u.x0)))*Math.PI,y0:Math.max(0,e.y0-u.depth),y1:Math.max(0,e.y1-u.depth)}));let g=t.transition().duration(d?0:750);o.transition(g).tween("data",(e=>{let t=(0,a.sXR)(e.current,e.target);return r=>e.current=t(r)})).filter((function(e){return+this.getAttribute("fill-opacity")||nr(e.target)})).attr("fill-opacity",(e=>nr(e.target)?1:0)).attr("user-select",(e=>nr(e.target)?"initial":"none")).style("pointer-events",(e=>nr(e.target)?"initial":"none")).attrTween("d",(e=>()=>rr(l)(e.current))),i.filter((function(e){return+this.getAttribute("fill-opacity")||ar(e.target)})).transition(g).attr("fill-opacity",(e=>+ar(e.target))).attrTween("transform",(e=>()=>or(e.current,l)))};function sr(){let e=null,t=null,r=null,n=null,a=null,o=o=>{let i=o.selectAll("g.segment").data(r.descendants().slice(1)),l=i.enter().append("g").attr("class","segment");l.append("path"),l.append("text").attr("class","segment").attr("dy","0.35em");let s=l.merge(i),c=s.select("path").attr("fill-opacity",(e=>nr(e.current)?1:0)).attr("user-select",(e=>nr(e.current)?"initial":"none")).style("pointer-events",(e=>nr(e.current)?"initial":"none")).attr("d",(e=>rr(a)(e.current)));n&&c.style("fill",(e=>n(e.data.color)));let u=s.select("text").attr("fill-opacity",(e=>+ar(e.current))).attr("transform",(e=>or(e.current,a))).text((e=>e.label)).each((function(e){ir.call(this,e,a)})),d=o.select("text.parent"),g=o.select("circle").attr("r",a).datum(r),p=lr(r,o,g,d,c,u,a,t,e);if(e.sunburstLevel){let n=r.descendants().find((r=>r.data.name===e.sunburstLevel[t]));n&&p(n,!0)}else e.sunburstLevel={};g.on("click",(e=>p(e,!1))),c.filter((e=>e.children)).style("cursor","pointer").on("click",(e=>p(e,!1)))};return o.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.split=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.data=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.color=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.radius=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function cr(e,t){let r=Kt(t),n=Qt(t,r),o=Yt().elementsPrefix("sunburst");if(e.datum(r).call(o),n){let r=t.realValues[1];if("string"===t.mainValues.find((e=>e.name===r))?.type){let r=Ue().settings(t).scale(n);e.call(r)}else{let t=Rt().scale(n);e.call(t)}}let i=o.chartContainer(),l=o.chartEnter(),s=o.chartDiv(),c=o.chartTitle(),u=o.containerSize();c.each(((e,t,r)=>a.Ys(r[t]).text(e.split))),i.append("circle").attr("fill","none").style("pointer-events","all"),i.append("text").attr("class","parent"),l.merge(s).select("svg").select("g.sunburst").attr("transform",`translate(${u.width/2}, ${u.height/2})`).each((function(e){let{split:r,data:o}=e,i=a.Ys(this),l=this.parentNode,{width:s,height:c}=l.getBoundingClientRect(),u=(Math.min(s,c)-24)/Math.max(2,2*t.crossValues.length);sr().settings(t).split(r).data(o).color(n).radius(u)(i),he().settings(t)(i.selectAll("g.segment"))}))}cr.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var ur=cr;function dr(e,t){if(e.realValues.length<1||null===e.realValues[1]||void 0===e.realValues[1])return;let r=e.realValues[1],n=t.filter((e=>e.height>0)).map((e=>gr(e))).reduce(((e,t)=>e.concat(t)));if("string"===e.mainValues.find((e=>e.name===r))?.type)return xe(e,n);return Tt(e,null,null,[Math.min(...n),Math.max(...n)])}function gr(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((e=>t.concat(gr(e,t)))):e.data.color&&t.push(e.data.color),t}var pr=e=>!(!e.target||!e.target.textAttributes),_r=(e,t,r)=>{e.selectAll("text").each((function(e,n){let a=Sr(e,t,r);this.style=a}));let n=fr(e);wr(n),hr(n)},hr=e=>{let t=e=>e.getBoundingClientRect(),r=[];e.selectAll("text").filter(((e,t,r)=>(0,a.Ys)(r[t]).attr("style")===kr.high)).each(((e,t,n)=>r.push(n[t]))),e.selectAll("text").filter(((e,t,r)=>(0,a.Ys)(r[t]).attr("style")===kr.low)).each(((e,n,o)=>{let i=o[n];r.filter((e=>ee("x",t(e),t(i))&&ee("y",t(e),t(i),-2))).forEach((()=>(0,a.Ys)(i).attr("dy",Number((0,a.Ys)(i).attr("dy"))+14)))}))},br={top:1,mid:.7,lower:0},fr=e=>e.filter(((e,t,r)=>(0,a.Ys)(r[t]).selectAll("text").attr("style")!==kr.zero)),mr=e=>e.selectAll("text").each(((e,t,r)=>vr(r[t]))),wr=e=>e.selectAll("text").each(((e,t,r)=>yr(r[t]))),yr=e=>{let t=(0,a.Ys)(e),r=e.getBoundingClientRect();t.attr("dx",0-r.width/2).attr("dy",0+r.height/4)},vr=e=>{let t=e.parentNode.childNodes[0],r=e.getBBox(),n=t.getBBox();xr(e,n,r)||(0,a.Ys)(e).attr("style",(0,a.Ys)(e).attr("style"))},xr=(e,t,r)=>{let n=Math.min(t.height/r.height,t.width/r.width);if(n<1){let t=parseInt((0,a.Ys)(e).style("font-size")),r=Math.floor(t*n);return t>7&&r>7?((0,a.Ys)(e).style("font-size",`${r}px`),yr(e)):((0,a.Ys)(e).style("font-size",null),(0,a.Ys)(e).style("opacity","0")),!0}return!1},Sr=(e,t,r)=>{if(!r.filter((e=>""!==e)).every((t=>e.crossValue.includes(t))))return kr.zero;switch(e.depth){case t+1:return kr.high;case t+2:return kr.low;default:return kr.zero}},kr={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"},Cr=(e,t)=>{let r=a.pNI().size([e,t]).paddingInner((e=>1+2*(e.height-1)));return r.tile(a.wLP),r};function Ar(e,t,r,n,o,i){(function(e,t,r,n,a){let o={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:a.x1-a.x0,height:a.y1-a.y0},l={width:i.width/o.width,height:i.height/o.height};r.each((e=>{let r=(e.x0-o.x)*l.width,a=(e.y0-o.y)*l.height,i=Yr(e)*l.width,s=Br(e)*l.height,c=((e,t)=>t.every((t=>e.crossValue.includes(t))))(e,t)&&e.data.name!==t[n-1];e.mapLevel[n]={x0:r,x1:i+r,y0:a,y1:s+a,visible:c,opacity:c?1:0}})),e.mapLevel[n].levelRoot=!0})(e,t,r,n,o),e.mapLevel[n].levelRoot=!0,function(e,t,r,n){let o=Cr(t,r)((0,a.bT9)(e.data).sum((e=>e.size))).descendants(),i=e.descendants();o.forEach(((e,t)=>{i[t].mapLevel[n].x0=o[t].x0,i[t].mapLevel[n].x1=o[t].x1,i[t].mapLevel[n].y0=o[t].y0,i[t].mapLevel[n].y1=o[t].y1}))}(e,i.node().getBoundingClientRect().width,i.node().getBoundingClientRect().height,n),Vr(r,n)}var Er=(e,t)=>{e.each(((e,r,n)=>{let o=(0,a.Ys)(n[r]).selectAll("text");e.mapLevel[t].textAttributes={dx:o.attr("dx"),dy:o.attr("dy"),class:o.attr("class"),"font-size":o.style("font-size")}}))};function Vr(e,t){e.selectAll("text").each(((e,r,n)=>{let o=(0,a.Ys)(n[r]),i=(0,a.Ys)(n[r]).datum(),l=o.attr("class");i.mapLevel[t].textLockedAt={opacity:br[l]}}))}function Pr(e,t,r,n,a,o,i,l,s,c){if(!e.children)return;a.treemapLevel<e.depth?a.treemapRoute.push(e.crossValue):a.treemapRoute.pop(),a.treemapLevel=e.depth;let u=e.crossValue;(!e.mapLevel[a.treemapLevel]||!e.mapLevel[a.treemapLevel].levelRoot)&&Ar(e,u,r,a.treemapLevel,l,o),Mr(e,t,r,n,a,o,i,l,a.treemapLevel,u,s,c)}function Mr(e,t,r,n,o,i,l,s,c,u,d,g,p,_){void 0===p&&(p=500),void 0===_&&(_=!0);let h=e.parent,b=l.transition("main transition").duration(p).ease(a.oSY);r.each((e=>e.target=e.mapLevel[c])),pr(e)||Lr(r,d),r.transition(b).tween("data",(e=>{let t=a.sXR(e.current,e.target);return r=>e.current=t(r)})).styleTween("opacity",(e=>()=>e.current.opacity)).attrTween("pointer-events",(e=>()=>e.target.visible?"all":"none")),t.transition(b).filter((e=>e.target.visible)).styleTween("x",(e=>()=>`${e.current.x0}px`)).styleTween("y",(e=>()=>`${e.current.y0}px`)).styleTween("width",(e=>()=>e.current.x1-e.current.x0+"px")).styleTween("height",(e=>()=>e.current.y1-e.current.y0+"px")),n.transition(b).filter((e=>e.target.visible)).attrTween("x",(e=>()=>e.current.x0+Yr(e.current)/2)).attrTween("y",(e=>()=>e.current.y0+Br(e.current)/2)).end().catch((()=>Tr(r))).then((()=>{pr(e)||(hr(f),mr(f),async function(e,t,r){void 0===r&&(r=400);let n=t.transition("text fade transition").duration(r).ease(a.oSY);await e.transition(n).filter((e=>e.target.visible)).tween("data",((e,t,r)=>{let n=r[t],o=a.sXR(Or(e),Nr(n));return t=>e.current.opacity=o(t)})).styleTween("opacity",(e=>()=>e.current.opacity)).end().catch((e=>console.error("Exception in text fade transition",e))).then((()=>e.each(((e,t,r)=>(e=>(0,a.Ys)(e).style("opacity",null))(r[t])))))}(n,l,p),_&&Er(r,c),Tr(r,d))})).catch((e=>{console.error("Exception completing promises after main transition",e),Tr(r,d)})),pr(e)?(e=>{e.each(((e,t,r)=>{(0,a.Ys)(r[t]).selectAll("text").attr("dx",e.target.textAttributes.dx).attr("dy",e.target.textAttributes.dy).attr("style",e.target.textAttributes.style)}))})(r):(n.each(((e,t,r)=>(e=>(0,a.Ys)(e).style("opacity",br[(0,a.Ys)(e).attr("class")]))(r[t]))),_r(r,c,u));let f=fr(r);h?d.hide(!1).text(e.label).onClick((()=>{Pr(h,t,r,n,o,i,l,s,d,g);let e=i.node().getRootNode().host.parentElement;_e(e,h,g)}))():d.hide(!0)()}var Or=e=>e.target.textLockedAt.opacity,Nr=e=>br[a.Ys(e).attr("class")],Lr=(e,t)=>{t.deactivate(!0),e.each(((e,t,r)=>{a.Ys(r[t]).selectAll("rect").style("pointer-events","none")}))},Tr=function(e,t){void 0===t&&(t=void 0),t&&t.deactivate(!1),e.each(((e,t,r)=>{a.Ys(r[t]).selectAll("rect").style("pointer-events",null)}))};var zr="leafnode",Dr="branchnode",Rr="rootnode",Yr=e=>e.x1-e.x0,Br=e=>e.y1-e.y0,jr=(e,t)=>0===t.depth?Rr:((e,t)=>t.depth===e)(e,t)?zr:Dr;function $r(){let e=null,t=null,r=null,n=null,a=null,o=null,i=i=>{o=function(e){let t=null,r=null,n=!0,a=!1,o=J(e,".parent-controls",(()=>e.append("div").attr("class","parent-controls").style("display",n?"none":"").html('<button id="goto-parent">Goto parent</button>\n'))),i=()=>{o.style("display",n?"none":"").select("#goto-parent").style("pointer-events",a?"none":null).html(`\u21ea ${r}`).on("click",(()=>t()))};return i.deactivate=function(){if(!arguments.length)return a;a=arguments.length<=0?void 0:arguments[0];let e=o.select("#goto-parent");return a?e.style("pointer-events","none"):e.style("pointer-events",null),i},i.hide=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.text=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.onClick=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i}(a),o();let l=r.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Cr(a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height)(r);let s=i.selectAll("g").data(r.descendants()),c=s.enter().append("g");c.append("rect"),c.append("text");let u=c.merge(s).sort(((e,t)=>t.depth-e.depth)),d=u.select("rect").attr("class",(e=>`treerect ${jr(l,e)}`)).style("x",(e=>e.x0)).style("y",(e=>e.y0)).style("width",(e=>Yr(e))).style("height",(e=>Br(e)));d.style("fill",(e=>jr(l,e)===zr?e.data.color?n(e.data.color):t.colorStyles.series:"transparent"));let g=u.filter((e=>0!==e.value)).select("text").attr("x",(e=>e.x0+Yr(e)/2)).attr("y",(e=>e.y0+Br(e)/2)).text((e=>e.label)),p=d.filter((e=>0===e.crossValue.length)).datum();(function(e,t){e.each((e=>{e.mapLevel=[],e.mapLevel[0]={x0:e.x0,x1:Yr(e)+e.x0,y0:e.y0,y1:Br(e)+e.y0,visible:!0,opacity:1}})),t.mapLevel[0].levelRoot=!0,Vr(e,0)})(u,p),_r(u,0,[]),mr(fr(u)),Er(u,0),0===e.treemapRoute.length&&e.treemapRoute.push(p.crossValue),d.filter((e=>e.children)).on("click",((r,n)=>Pr(n,d,u,g,e,a,i,p,o,t))),function(e,t,r,n,a,o,i,l,s){if(n.treemapLevel>0){let c=i.crossValue;Mr(i,e,t,r,n,a,o,i,0,c,l,s,1,!1),n.treemapRoute.slice(1,n.treemapRoute.length).forEach((c=>{let u=t.filter((e=>e.crossValue===c)).datum(),d=u.crossValue;Ar(u,d,t,u.depth,i,a),Mr(u,e,t,r,n,a,o,i,u.depth,d,l,s,1,!1)}))}}(d,u,g,e,a,i,p,o,t)};return i.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i):e},i.data=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.color=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.container=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],i):a},i}function Ir(e,t){t.treemaps||(t.treemaps={});let r=Kt(t),n=dr(t,r.map((e=>e.data)));n&&this._container.classList.add("has-legend");let o=Yt().elementsPrefix("treemap");if(e.datum(r).call(o),n){let r=t.realValues[1];if("string"===t.mainValues.find((e=>e.name===r))?.type){let r=Ue().settings(t).scale(n);e.call(r)}else{let t=Rt().scale(n);e.call(t)}}let i=o.chartEnter(),l=o.chartDiv();o.chartTitle().each(((e,t,r)=>a.Ys(r[t]).text(e.split))),i.merge(l).select("svg").select("g.treemap").each((function(e){let{split:r,data:o}=e,i=a.Ys(this);t.treemaps[r]||(t.treemaps[r]={}),$r().settings(t.treemaps[r],t).data(o).container(a.Ys(a.Ys(this.parentNode).node().parentNode)).color(n)(i),he().settings(t).centered(!0)(i.selectAll("g"))}))}Ir.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:3e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var Hr=[it,ht,vt,Vt,Mt,Nt,$t,qt,Gt,Ir,ur,Ht],Xr=(e,t)=>{if(!t.colorStyles){let r={scheme:[],gradient:{},interpolator:{},grid:{}},n=Ur(e);r.series=n("--d3fc-local-series");for(let e=1;;e++){let t=`series-${e}`,a=n(`--d3fc-local-${t}`);if(!a)break;r[t]=a,r.scheme.push(a)}r.opacity=Fr(r.series),r.grid.gridLineColor=n`--d3fc-gridline--color`,["full","positive","negative"].forEach((e=>{let t=n(`--d3fc-local-${e}--gradient`);r.gradient[e]=qr(t,r.opacity)})),t.colorStyles=r}if(!t.textStyles){let r=window.getComputedStyle(e),n=r.getPropertyValue("color"),a=`12px ${r.getPropertyValue("font-family")}`;t.textStyles={color:n,font:a}}},Fr=e=>a.$_Y(e).opacity,Wr=(e,t)=>{let r=a.$_Y(`#${e}`);return r.opacity=t,r+""},Ur=e=>{let t=getComputedStyle(e);return e=>t?.getPropertyValue(e)},qr=(e,t)=>{let r=s.Q(e)[0].colorStops;return r.map(((e,n)=>[e.length?e.length.value/100:n/(r.length-1),Wr(e.value,t)])).sort(((e,t)=>e[0]-t[0]))},Zr={initial:{type:"number",count:1,names:[]},selectMode:"select"},Gr=`:host .chart{--d3fc-local-full--gradient:var(--d3fc-full--gradient,linear-gradient(#4d342f 0%,#e4521b 22.5%,#feeb65 42.5%,#f0f0f0 50%,#dcedc8 57.5%,#42b3d5 67.5%,#1a237e 100%));--d3fc-local-positive--gradient:var(--d3fc-positive--gradient,linear-gradient(#dcedc8 0%,#42b3d5 35%,#1a237e 100%));--d3fc-local-negative--gradient:var(--d3fc-negative--gradient,linear-gradient(#feeb65 100%,#e4521b 70%,#4d342f 0%));--d3fc-local-series:var(--d3fc-series,rgba(31,119,180,0.5));--d3fc-local-series-1:var(--d3fc-series-1,#0366d6);--d3fc-local-series-2:var(--d3fc-series-2,#ff7f0e);--d3fc-local-series-3:var(--d3fc-series-3,#2ca02c);--d3fc-local-series-4:var(--d3fc-series-4,#d62728);--d3fc-local-series-5:var(--d3fc-series-5,#9467bd);--d3fc-local-series-6:var(--d3fc-series-6,#8c564b);--d3fc-local-series-7:var(--d3fc-series-7,#e377c2);--d3fc-local-series-8:var(--d3fc-series-8,#7f7f7f);--d3fc-local-series-9:var(--d3fc-series-9,#bcbd22);--d3fc-local-series-10:var(--d3fc-series-10,#17becf);}:host .chart .series{fill:var(--d3fc-local-series);}:host .chart .series-1{fill:var(--d3fc-local-series-1);}:host .chart .series-2{fill:var(--d3fc-local-series-2);}:host .chart .series-3{fill:var(--d3fc-local-series-3);}:host .chart .series-4{fill:var(--d3fc-local-series-4);}:host .chart .series-5{fill:var(--d3fc-local-series-5);}:host .chart .series-6{fill:var(--d3fc-local-series-6);}:host .chart .series-7{fill:var(--d3fc-local-series-7);}:host .chart .series-8{fill:var(--d3fc-local-series-8);}:host .chart .series-9{fill:var(--d3fc-local-series-9);}:host .chart .series-10{fill:var(--d3fc-local-series-10);}:host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.xyscatter{padding:0;font-size:14px;}:host .chart.xyscatter d3fc-group:first-child{padding:16px;padding-top:0px;width:calc(100% - 32px);height:calc(100% - 16px);}:host .chart.xyscatter .multi-xlabel{position:absolute;bottom:0;height:2.5em;width:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .multi-ylabel{position:absolute;top:0;width:2.5em;height:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .outer-container{height:100%;}:host .chart.xyscatter .inner-container{display:inline-grid;overflow-y:auto;width:calc(100% - 16px);height:100%;padding:0;margin:0;}:host .chart.xyscatter .inner-container div{overflow:hidden;}:host .chart.xyscatter .inner-container text.segment,:host .chart.xyscatter .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.xyscatter .inner-container div.xy-scatter-container{margin:5px 0;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .outer-container{height:100%;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .outer-container{height:100%;}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover="true"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover="true"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}${function(){let e=document.querySelector("head").querySelectorAll("style"),t=[];return e.forEach((e=>{-1!==e.innerText.indexOf("d3fc-")&&t.push(e.innerText)})),t.join("")}()}`,Qr=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps","axisMemo"];async function Jr(e){await customElements.get("perspective-viewer").registerPlugin(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=new Set(t.length>0?t:Hr.map((e=>e.plugin.name)));Hr.forEach((e=>{if(n.has(e.plugin.name)){let t=e.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,""),r=`perspective-viewer-d3fc-${t}`;customElements.define(r,class extends HTMLElement{constructor(){super(),this._chart=null,this._settings=null,this.render_warning=!0}connectedCallback(){this._initialized||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${Gr}</style>`,this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0)}get name(){return e.plugin.name}get category(){return e.plugin.category}get select_mode(){return e.plugin.selectMode||"select"}get min_config_columns(){return e.plugin.initial?.count||Zr.initial.count}get config_column_names(){return e.plugin.initial?.names||Zr.initial.names}get max_cells(){return e.plugin.max_cells||4e3}set max_cells(t){e.plugin.max_cells=t}get max_columns(){return e.plugin.max_columns||50}set max_columns(t){e.plugin.max_columns=t}get plugin_attributes(){return{symbol:{symbols:Object.entries(Ct).map((e=>{let[t,r]=e,n=document.createElement("div");a.Ys(n).append("svg").attr("viewbox","0, 0, 15, 15").append("path").attr("transform","translate(7.5, 7.5)").attr("d",a.NAG(r)());let o=a.Ys(n).html();return n.remove(),{name:t,html:o}}))}}}async render(){var e=document.createElement("canvas"),t=this.shadowRoot.querySelector("#container");e.width=t.offsetWidth,e.height=t.offsetHeight;let r=e.getContext("2d");r.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",r.fillRect(0,0,e.width,e.height);let n=window.getComputedStyle(this).getPropertyValue("color"),a=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let s of a.reverse()){var o=document.createElement("img");let e=0;o.width=s.parentElement?s.parentElement.offsetWidth:e,o.height=s.parentElement?s.parentElement.offsetHeight:e;let t=s.cloneNode(!0);t.hasAttribute("viewBox")||t.setAttribute("viewBox",`0 0 ${o.width} ${o.height}`),t.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let r of t.querySelectorAll("text"))r.setAttribute("fill",n);var i=(new XMLSerializer).serializeToString(t);i=i.replace(/[^\x00-\x7F]/g,"");let a=new Promise(((e,t)=>{o.onload=e,o.onerror=t}));try{o.src=`data:image/svg+xml;base64,${btoa(i)}`,await a}catch{let e=new Promise(((e,t)=>{o.onload=e,o.onerror=t}));o.src=`data:image/svg+xml;utf8,${i}`,await e}r.drawImage(o,s.parentNode.offsetLeft,s.parentNode.offsetTop,o.width,o.height)}let l=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let s of l.reverse())r.drawImage(s,s.parentNode.offsetLeft,s.parentNode.offsetTop,s.width/window.devicePixelRatio,s.height/window.devicePixelRatio);return await new Promise((t=>e.toBlob((e=>t(e)))),"image/png")}async draw(e,t,r){null!==this.offsetParent?(this._staged_view=void 0,this._settings&&(this._settings.axisMemo=[[1/0,-1/0],[1/0,-1/0]]),await this.update(e,t,r,!0)):this._staged_view=[e,t,r]}async update(t,r,n,a){if(void 0===a&&(a=!1),null===this.offsetParent)return;let o,i,l=this.parentElement,s="Sunburst"!==e.plugin.name;o=r&&n?t.to_columns_string({end_row:n,end_col:r,leaves_only:s}):r?t.to_columns_string({end_col:r,leaves_only:s}):n?t.to_columns_string({end_row:n,leaves_only:s}):t.to_columns_string({leaves_only:s}),i=await Promise.all([l.save(),l.getTable().then((e=>e.schema())),t.expression_schema(!1),t.schema(!1),o,t.get_config()]);let[c,u,d,g,p,_]=i,h=JSON.parse(p),b=Object.keys(h),f={row(e){let t={};for(let r of b)t[r]=h[r][e];return t}};this.config=c;let m=this.config.columns,w=function(e){let t=u[e];return t||(t=d[e]),t},{columns:y,group_by:v,split_by:x,filter:S}=_,k=h[Object.keys(h)[0]]||[],C=v.length>0?k.reduce(((e,t,r)=>{let n=f.row(r);if(n.__ROW_PATH__&&n.__ROW_PATH__.length==v.length)e.agg_paths.push(e.aggs.slice()),e.rows.push(n);else{let t=n.__ROW_PATH__.filter((e=>void 0!==e)).length;e.aggs[t]=n,e.aggs=e.aggs.slice(0,t+1)}return e}),{rows:[],aggs:[],agg_paths:[]}):{rows:k.map(((e,t)=>f.row(t)))},A=C.rows.map(((e,t)=>v.length?e:{...e,__ROW_PATH__:[t]})),E={realValues:m,crossValues:v.map((e=>({name:e,type:w(e)}))),mainValues:y.map((e=>({name:e,type:g[e]}))),splitValues:x.map((e=>({name:e,type:w(e)}))),filter:S,data:A,agg_paths:C.agg_paths,...this.config.plugin_config};this._chart=e;let V={set:(e,t,r)=>(Qr.includes(t)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),e[t]=r,!0)};this._settings=new Proxy({axisMemo:[[1/0,-1/0],[1/0,-1/0]],...this._settings,...E},V),this._settings.splitMainValues&&this._settings.splitMainValues.length>=y.length&&(this._settings.splitMainValues=[]),Xr(this._container,this._settings),a&&(this._container.innerHTML=""),this._draw(),await new Promise((e=>requestAnimationFrame(e)))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(null!==this.offsetParent){let e=a.Ys(this._container),r=`chart ${t}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(e.attr("class",r),this._settings):e.attr("class",`${r} disabled`)}}async resize(e){if(null!==this.offsetParent)if(void 0!==this._settings?.data)this._draw();else{let[e,t,r]=this._staged_view;this._staged_view=void 0,this.draw(e,t,r)}}async restyle(e,t,r){let n=this._settings;n&&(delete n.colorStyles,delete n.textStyles,this.isConnected&&(Xr(this._container,this._settings),this.resize(e)))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let e={...this._settings};return Qr.forEach((t=>{delete e[t]})),e}restore(e){let t={};for(let r of Qr)void 0!==this._settings?.[r]&&(t[r]=this._settings?.[r]);this._settings={...t,...e}}}),customElements.whenDefined("perspective-viewer").then((()=>Jr(r)))}}))}()},8049:function(e,t,r){"use strict";r(837);var n=r(6558),a=r.n(n),o={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}};function i(e){const t={};if(c().types[e]&&Object.assign(t,c().types[e]),t.type){const e=i(t.type);return Object.assign(e,t),e}return t}function l(e){return e&&"object"==typeof e&&!Array.isArray(e)}function s(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;const a=r.shift();if(l(e)&&l(a))for(const o in a)l(a[o])?(e[o]||Object.assign(e,{[o]:{}}),s(e[o],a[o])):Object.assign(e,{[o]:a[o]});return s(e,...r)}function c(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=s(o,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}var u=Object.defineProperty,d=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},g=(e,t,r)=>(d(e,t,"read from private field"),r?r.call(e):t.get(e)),p='regular-table{padding:0;margin:12px 0 0 12px;font-family:inherit;--rt-hover--border-color:var(--inactive--color,#c5c9d080);}regular-table div[tabindex]{outline:none;}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;}regular-table th{text-align:center;}regular-table thead tr:not(.rt-autosize) th{overflow:hidden;max-width:0px;}regular-table thead tr:last-child .rt-float,regular-table tbody .rt-float{text-align:right;}regular-table thead .rt-integer,regular-table tbody .rt-integer{text-align:right;}regular-table tbody th{text-align:left;}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%;}regular-table thead .rt-string,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table tbody .rt-date,regular-table thead .rt-datetime,regular-table tbody .rt-datetime{text-align:left;}regular-table thead tr:last-child th{border-bottom:1px solid#8b868045;}regular-table tbody tr:first-child td,regular-table tbody tr:first-child th{border-top:1px solid transparent!important;}regular-table th{position:relative;}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid#eee;height:100%;}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding-right:5px;padding-left:5px;padding-top:0px;padding-bottom:0px;height:19px;}regular-table table *{box-sizing:border-box;}regular-table table{position:absolute;color:#666;outline:none;}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:var(--button--font-family);}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:var(--button--font-family);}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px#1a7da1;}regular-table .rt-selected td{background-color:#eee;}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis;}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%;}regular-table th span.rt-group-name{text-align:left;}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%;}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize;}regular-table a{color:var(--rt-pos-cell--color);}regular-table a:visited{color:var(--active--color);}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0px var(--inactive--border-color,#8b868045);}.psp-header-group{box-shadow:0px 10px 0 -9px var(--inactive--border-color,#8b868045);}.psp-is-top{box-shadow:5px 4px 0px -4px var(--inactive--border-color,#8b868045);}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0px -4px var(--inactive--border-color,#8b868045),0px 10px 0 -9px var(--inactive--border-color,#8b868045);}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0px var(--inactive--border-color,#8b868045),0px 10px 0 -9px var(--inactive--border-color,#8b868045);}perspective-viewer[settings] tr.rt-autosize .psp-header-leaf.psp-header-border:not(.psp-menu-enabled){box-shadow:1px 0px var(--inactive--border-color,#8b868045);}:host-context(perspective-viewer[settings]) tr.rt-autosize .psp-header-leaf.psp-header-border:not(.psp-menu-enabled){box-shadow:1px 0px var(--inactive--border-color,#8b868045);}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0px -4px var(--inactive--border-color,#8b868045);}tr:only-child th{box-shadow:none!important;}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover:after{border-color:var(--rt-hover--border-color,#c5c9d080)!important;background-color:transparent;box-shadow:0px 1px 0px var(--rt-hover--border-color,#c5c9d080),0px 3px 0px rgba(0,0,0,0.05),0px 5px 0px rgba(0,0,0,0.01);}regular-table tbody tr:hover th.psp-tree-leaf.psp-menu-open:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label.psp-menu-open:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td.psp-menu-open:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr.psp-menu-open:hover:after{box-shadow:inset -2px 0px 0px var(--icon--color),inset 2px 0px 0px var(--icon--color),0px 1px 0px var(--rt-hover--border-color,#c5c9d080),0px 3px 0px rgba(0,0,0,0.05),0px 5px 0px rgba(0,0,0,0.01);}regular-table tbody tr:last-child:hover td.psp-menu-open:not(.psp-row-selected):not(.psp-row-subselected){box-shadow:inset -2px 0px 0px var(--icon--color),inset 2px 0px 0px var(--icon--color),inset 0px -2px 0px var(--icon--color),0px 1px 0px var(--rt-hover--border-color,#c5c9d080),0px 3px 0px rgba(0,0,0,0.05),0px 5px 0px rgba(0,0,0,0.01);}regular-table tbody tr:hover+tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent;}regular-table tbody tr th:first-child:not(:empty),regular-table tbody tr th:first-child:empty+th:not(:empty),regular-table tbody tr th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent;}regular-table tbody tr th:last-child,regular-table tbody tr td:last-child{border-right-width:0px;border-right-color:transparent;}regular-table tbody tr:hover{color:inherit;}regular-table tbody tr:hover th:first-child:not(:empty),regular-table tbody tr:hover th:first-child:empty+th:not(:empty),regular-table tbody tr:hover th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color,#c5c9d080)!important;}regular-table tbody tr:hover th:last-child,regular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color,#c5c9d080)!important;}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody td,perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table thead th:not(.rt-group-corner),:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody td,:host(:not(.sub-cell-scroll-disabled)) regular-table table thead th:not(.rt-group-corner){transform:translate(var(--regular-table--transform-x,0px));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody{transform:translate(0,var(--regular-table--transform-y,0px));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:first-child td,perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:first-child th,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody tr:first-child td,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody tr:first-child th{clip-path:polygon(0 var(--regular-table--clip-y,0),0 200%,200% 200%,200% var(--regular-table--clip-y,0));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr td:first-of-type,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody tr td:first-of-type{clip-path:polygon(var(--regular-table--clip-x,0)0,var(--regular-table--clip-x,0)200%,200% 200%,200% 0);}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:first-child td:first-of-type,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody tr:first-child td:first-of-type{clip-path:polygon(var(--regular-table--clip-x,0)var(--regular-table--clip-y,0),var(--regular-table--clip-x,0)200%,200% 200%,200% var(--regular-table--clip-y,0));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table thead tr:last-child:after,:host(:not(.sub-cell-scroll-disabled)) regular-table table thead tr:last-child:after{transform:translate(var(--regular-table--transform-x,0px));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:not(:first-child):after,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody tr:not(:first-child):after{transform:translate(var(--regular-table--transform-x,0px));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:hover:first-child:after,:host(:not(.sub-cell-scroll-disabled)) regular-table table tbody tr:hover:first-child:after{clip-path:polygon(0 var(--regular-table--clip-y,0),0 200%,200% 200%,200% var(--regular-table--clip-y,0));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table thead tr th.rt-group-corner+th:not(.rt-group-corner),:host(:not(.sub-cell-scroll-disabled)) regular-table table thead tr th.rt-group-corner+th:not(.rt-group-corner){clip-path:polygon(var(--regular-table--clip-x,0)0,var(--regular-table--clip-x,0)200%,200% 200%,200% 0);}regular-table{outline:none;}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px;}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background:var(--icon--color);border:5.5px solid var(--plugin--background);max-height:50%;max-width:50%;min-width:10%;min-height:10%;}perspective-viewer:not([settings]) regular-table table tr.rt-autosize+tr th{height:0px;}perspective-viewer:not([settings]) regular-table table tr.rt-autosize+tr th span{display:none;}:host-context(perspective-viewer:not([settings])) regular-table table tr.rt-autosize+tr th{height:0px;}:host-context(perspective-viewer:not([settings])) regular-table table tr.rt-autosize+tr th span{display:none;}perspective-viewer[settings] .psp-menu-enabled{padding:0 6px;font-size:8px;border-radius:3px 3px 0 0;}perspective-viewer[settings] .psp-menu-enabled:hover,perspective-viewer[settings] tr:not(.rt-autosize) th.psp-menu-open{color:var(--plugin--background);background-color:var(--icon--color);border-bottom-color:var(--icon--color);cursor:pointer;}perspective-viewer[settings] tr:not(.rt-autosize) th.psp-menu-open:before{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;height:8px;width:10px;-webkit-mask-image:var(--column-settings-icon--mask-image);mask-image:var(--column-settings-icon--mask-image);margin-right:4px;background-color:var(--plugin--background);}perspective-viewer[settings] td.psp-menu-open{box-shadow:inset -2px 0px 0px var(--icon--color),inset 2px 0px 0px var(--icon--color);}perspective-viewer[settings] tr:first-child td.psp-menu-open{border-top-color:var(--icon--color)!important;}perspective-viewer[settings] tr:last-child td.psp-menu-open{box-shadow:inset -2px 0px 0px var(--icon--color),inset 2px 0px 0px var(--icon--color),inset 0px -2px 0px var(--icon--color);}:host-context(perspective-viewer[settings]) .psp-menu-enabled{padding:0 6px;font-size:8px;border-radius:3px 3px 0 0;}:host-context(perspective-viewer[settings]) .psp-menu-enabled:hover,:host-context(perspective-viewer[settings]) tr:not(.rt-autosize) th.psp-menu-open{color:var(--plugin--background);background-color:var(--icon--color);border-bottom-color:var(--icon--color);cursor:pointer;}:host-context(perspective-viewer[settings]) tr:not(.rt-autosize) th.psp-menu-open:before{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;height:8px;width:10px;-webkit-mask-image:var(--column-settings-icon--mask-image);mask-image:var(--column-settings-icon--mask-image);margin-right:4px;background-color:var(--plugin--background);}:host-context(perspective-viewer[settings]) td.psp-menu-open{box-shadow:inset -2px 0px 0px var(--icon--color),inset 2px 0px 0px var(--icon--color);}:host-context(perspective-viewer[settings]) tr:first-child td.psp-menu-open{border-top-color:var(--icon--color)!important;}:host-context(perspective-viewer[settings]) tr:last-child td.psp-menu-open{box-shadow:inset -2px 0px 0px var(--icon--color),inset 2px 0px 0px var(--icon--color),inset 0px -2px 0px var(--icon--color);}perspective-viewer regular-table table thead tr:last-child th{border-bottom-width:1px;border-bottom-color:var(--inactive--border-color,#8b868045);}:host-context(perspective-viewer) regular-table table thead tr:last-child th{border-bottom-width:1px;border-bottom-color:var(--inactive--border-color,#8b868045);}.psp-sort-enabled:hover{cursor:pointer;}.psp-row-selected,:hover .psp-row-selected,:hover th.psp-tree-leaf.psp-row-selected,:hover th.psp-tree-label.psp-row-selected{color:white!important;background-color:#ea7319!important;border-color:#ea7319!important;}.psp-row-selected.psp-tree-label:not(:hover):before{color:white;}.psp-row-subselected,:hover .psp-row-subselected,:hover th.psp-tree-leaf.psp-row-subselected,:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,0.2)!important;}.psp-error{color:red;}td:focus{outline:#666;outline-style:dotted;outline-width:1px;}perspective-viewer.dragging regular-table{pointer-events:none;}:host-context(perspective-viewer.dragging) regular-table{pointer-events:none;}.psp-header-border:last-child{border-right-width:0px;}.psp-header-sort-desc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}.psp-header-sort-asc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}.psp-header-sort-col-desc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-col-desc-icon--mask-image);mask-image:var(--sort-col-desc-icon--mask-image);}.psp-header-sort-col-asc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-col-asc-icon--mask-image);mask-image:var(--sort-col-asc-icon--mask-image);}tbody th:last-of-type{border-right:1px solid var(--inactive--border-color,#8b868045);overflow:hidden;text-overflow:ellipsis;}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,var(--inactive--border-color,#eee)10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none;}.psp-tree-label{max-width:0px;min-width:0px;}.psp-tree-label:before{color:var(--icon--color);font-family:var(--button--font-family,inherit);padding-right:11px;}.psp-tree-label-expand:before{content:var(--tree-label-expand--content,"+");}.psp-tree-label-collapse:before{content:var(--tree-label-collapse--content,"-");}.psp-tree-label-expand,.psp-tree-label-collapse{cursor:pointer;}.psp-tree-label:hover:before{color:var(--active--color);text-shadow:0px 0px 5px var(--active--color);}.psp-tree-leaf{padding-left:24px;}.psp-align-right{text-align:right;}.psp-align-left{text-align:left;}.psp-positive:not(:focus){color:var(--rt-pos-cell--color);}.psp-negative:not(:focus){color:var(--rt-neg-cell--color);}regular-table table tbody td{min-width:52px!important;}.psp-is-width-override .rt-column-resize,.rt-column-resize:hover{border:1px dashed#999;border-bottom-width:0px;border-left-width:0px;}.boolean-editable{cursor:pointer;}regular-table table{user-select:none;color:inherit;border-collapse:separate;}regular-table table th{font-weight:400;}regular-table table td,regular-table table th{border-color:var(--inactive--border-color,#8b868045);height:23px;}regular-table table .psp-header-group{text-overflow:ellipsis;}regular-table table th.psp-header-leaf{border-bottom-width:0px;}regular-table table th.psp-header-leaf span{height:23px;min-height:23px;}regular-table table td,regular-table table th.psp-tree-label,regular-table table th.psp-tree-label,regular-table table th.psp-tree-leaf,regular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px;}regular-table table tbody th:empty{background-position:0px -10px;}perspective-viewer:not([settings]) regular-table #psp-column-edit-buttons:after{content:none;}:host-context(perspective-viewer:not([settings])) regular-table #psp-column-edit-buttons:after{content:none;}regular-table table thead tr:last-child:after{width:10000px;box-sizing:border-box;display:block;height:23px;content:"";border-bottom:1px solid var(--inactive--border-color);}regular-table table tbody tr:after{width:10000px;box-sizing:border-box;display:block;height:23px;content:"";border-top:1px solid transparent;}regular-table table tbody tr:not(:first-child):after{border-top:1px solid var(--inactive--border-color);}regular-table table tbody tr:hover:not(:first-child):after{border-top:1px solid var(--rt-hover--border-color);}regular-table table tbody tr:hover+tr:after{border-top:1px solid var(--rt-hover--border-color);}@keyframes pulse_pos{0%{background-color:var(--pulse--background-color-start,rgba(0,128,255,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(0,128,255,0));}}@keyframes pulse_pos2{0%{background-color:var(--pulse--background-color-start,rgba(0,128,255,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(0,128,255,0));}}@keyframes pulse_neg{0%{background-color:var(--pulse--background-color-start,rgba(255,25,0,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(255,25,0,0));}}@keyframes pulse_neg2{0%{background-color:var(--pulse--background-color-start,rgba(255,25,0,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(255,25,0,0));}}';function _(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function h(e,t,r){let n=Array.from(e.children[0].children[0].children),a=n.length;a<=1?n[0]?.removeAttribute("id"):n.forEach(((e,t)=>{let r=t===a-2?"psp-column-titles":t===a-1?"psp-column-edit-buttons":null;r?e.setAttribute("id",r):e.removeAttribute("id")}));let o=t.hasAttribute("settings");if(t.classList.toggle("psp-menu-open",!!r),o&&a>=2){let t=Array.from(n[a-2].children),o=Array.from(n[a-1].children);if(t&&o){n.slice(0,a-2).forEach((e=>{Array.from(e.children).forEach((e=>{e.classList.toggle("psp-menu-open",!1)}))}));for(let n=0;n<t.length;n++){let a=t[n],i=o[n],l=a.innerText===r;if(a.classList.toggle("psp-menu-open",l),i.classList.toggle("psp-menu-open",l),this._config.columns.length>1)for(let t of e.querySelectorAll("td")){let n=e.getMeta(t),a=n.column_header[n.column_header.length-2]===r;t.classList.toggle("psp-menu-open",a)}}}}}function b(e,t){let r=Array.from(e.children[0].children[0].children);if(r.length>0){h.call(this,e,t,this._column_settings_selected_column);let[n]=r.splice(this._config.split_by.length,1);f.call(this,e,n,!1);let[a]=r.splice(this._config.split_by.length,1);a&&f.call(this,e,a,!0)}}function f(e,t,r){let n=e._view_cache.config.row_pivots.length-1;for(let a of t?.children){let t=e.getMeta(a),o=t.column_header?.[this._config.split_by.length],i=this._config.sort.find((e=>e[0]===o)),l=t.row_header_x===n,s=typeof t.x>"u";l=l||(t.x+1)%this._config.columns.length==0,a.classList.toggle("psp-header-border",l),a.classList.toggle("psp-header-group",!1),a.classList.toggle("psp-header-leaf",!0),a.classList.toggle("psp-is-top",!1),a.classList.toggle("psp-header-corner",s),a.classList.toggle("psp-header-sort-asc",!r&&!!i&&"asc"===i[1]),a.classList.toggle("psp-header-sort-desc",!r&&!!i&&"desc"===i[1]),a.classList.toggle("psp-header-sort-col-asc",!r&&!!i&&"col asc"===i[1]),a.classList.toggle("psp-header-sort-col-desc",!r&&!!i&&"col desc"===i[1]);let c=_.call(this,t),u="integer"===c||"float"===c,d="string"===c,g="date"===c,p="datetime"===c;a.classList.toggle("psp-align-right",u),a.classList.toggle("psp-align-left",!u),a.classList.toggle("psp-menu-enabled",(d||u||g||p)&&!s&&t.column_header_y==this._config.split_by.length+1),a.classList.toggle("psp-sort-enabled",(d||u||g||p)&&!s&&t.column_header_y===this._config.split_by.length),a.classList.toggle("psp-is-width-override",void 0!==e._column_sizes?.override[t.size_key])}}function m(e){let t=e._view_cache.config.row_pivots.length-1,r=Array.from(e.children[0].children[0].children),n=[],a=new Set,o=e.children[0];for(let i=0;i<r.length;i++){let r=o.rows[i],l=new Set;for(let o=0;o<r.cells.length;o++){let s=r.cells[o];s.style.backgroundColor="";let c=e.getMeta(s),u=c.row_header_x===t||c.x>=0;s.classList.toggle("psp-align-right",!1),s.classList.toggle("psp-align-left",!1),s.classList.toggle("psp-header-group",!0),s.classList.toggle("psp-header-leaf",!1),s.classList.toggle("psp-header-border",u),s.classList.toggle("psp-header-group-corner",typeof c.x>"u"),s.classList.toggle("psp-color-mode-bar",!1),s.classList.toggle("psp-header-sort-asc",!1),s.classList.toggle("psp-header-sort-desc",!1),s.classList.toggle("psp-header-sort-col-asc",!1),s.classList.toggle("psp-header-sort-col-desc",!1),s.classList.toggle("psp-sort-enabled",!1);let d,g,p=r.cells[o],_=o;for(;n[i]&&n[i][_];++_);for(l.add(_),d=_;d<_+p.colSpan;++d)for(g=i;g<i+p.rowSpan;++g)n[g]||(n[g]=[]),n[g][d]=!0;p.classList.toggle("psp-is-top",0===i||!a.has(d))}a=l}}var w=Symbol("Plugin Symbol");function y(e,t,r,n,a){let[,,,,,o,i]=r,[,,,,,l,s]=n,c=this._ids?.[e.dy]?.join("|"),u=(a?e.column_header.slice(0,-1):e.column_header).join("|");if(this.last_reverse_columns?.has(u)&&this.last_reverse_ids?.has(c)){let r=this.last_reverse_ids?.get(c),n=this.last_reverse_columns.get(u);this._is_old_viewport?this.last_meta?.[n]?.[r]>e.user?(t.style.setProperty("--pulse--background-color-start",l),t.style.setProperty("--pulse--background-color-end",s),"pulse_neg"===t.style.animationName?t.style.animation="pulse_neg2 0.5s linear":t.style.animation="pulse_neg 0.5s linear"):this.last_meta?.[n]?.[r]<e.user?(t.style.setProperty("--pulse--background-color-start",o),t.style.setProperty("--pulse--background-color-end",i),"pulse_pos"===t.style.animationName?t.style.animation="pulse_pos2 0.5s linear":t.style.animation="pulse_pos 0.5s linear"):r!==e.dy&&(t.style.animation=""):t.style.animation=""}else t.style.animation=""}function v(e,t){return a().mix(e,`rgb(${t[0]},${t[1]},${t[2]})`,.5).hex()}function x(e,t){let[r,n,a,o]=e;function i(e,r){return 255*((1-o)*(t[e]/255)+o*(r/255))}return void 0===t&&(t=[255,255,255]),[i(0,r),i(1,n),i(2,a)]}function S(e){let[t,r,n]=e;return Math.sqrt(t*t*.299+r*r*.587+n*n*.114)>130?"#161616":"#ffffff"}function k(e){let t=a()(e),r=function(e){let[t,r,n]=e.rgb(),[a,o,i]=e.set("hsl.h",(e.get("hsl.h")-15)%360).rgb(),[l,s,c]=e.set("hsl.h",(e.get("hsl.h")+15)%360).rgb();return`linear-gradient(to right top,rgb(${a},${o},${i}),rgb(${t},${r},${n}) 50%,rgb(${l},${s},${c}))`}(t),n=t.rgb();return[e,...n,r,`rgba(${n[0]},${n[1]},${n[2]},1)`,`rgba(${n[0]},${n[1]},${n[2]},0)`]}function C(e,t,r,n){let a,o,i=r.user>0,l=r.user<0;a=void 0!==e?.pos_bg_color?e.pos_bg_color:this._pos_bg_color,o=void 0!==e?.neg_bg_color?e.neg_bg_color:this._neg_bg_color;let s=i?a:l?o:["",...this._plugin_background,""];{let[i,l,c,u,d]=s;if(t.style.position="","color"===e?.number_bg_mode)t.style.animation="",t.style.backgroundColor=i;else if("gradient"===e?.number_bg_mode){let n=Math.max(0,Math.min(1,Math.abs(r.user/e.bg_gradient))),a=S(x([l,c,u,n],this._plugin_background));t.style.animation="",t.style.color=a,t.style.backgroundColor=`rgba(${l},${c},${u},${n})`}else"pulse"===e?.number_bg_mode?(y.call(this,r,t,a,o,n),t.style.backgroundColor=""):("disabled"===e?.number_bg_mode||e?.number_bg_mode,t.style.animation="",t.style.backgroundColor="")}let[c,u,d,g,p]=(()=>void 0!==e?.pos_fg_color?i?e.pos_fg_color:l?e.neg_fg_color:["",...this._plugin_background,""]:i?this._pos_fg_color:l?this._neg_fg_color:["",...this._plugin_background,""])();if("disabled"===e?.number_fg_mode)if("color"===e?.number_bg_mode){let e=this._plugin_background,r=S(x([s[1],s[2],s[3],1],e));t.style.color=r}else"gradient"===e?.number_bg_mode||(t.style.color="");else"bar"===e?.number_fg_mode?(t.style.color="",t.style.position="relative",""!==p&&t.children.length>0&&t.children[0].nodeType===Node.ELEMENT_NODE&&(t.children[0].style.background=p)):("color"===e?.number_fg_mode||!e?.number_fg_mode)&&(t.style.color=c)}function A(e,t,r){let n=r.column_header?.[this._config.split_by.length],[o,i,l,s,c]=(()=>void 0!==e?.color?e.color:this._color)();if("foreground"===e?.string_color_mode&&null!==r.user)t.style.color=o,t.style.backgroundColor="","link"===e?.format&&(t.children[0].style.color=o);else if("background"===e?.string_color_mode&&null!==r.user){let e=S(x([i,l,s,1],this._plugin_background));t.style.color=e,t.style.backgroundColor=o}else if("series"===e?.string_color_mode&&null!==r.user){this._series_color_map.has(n)||(this._series_color_map.set(n,new Map),this._series_color_seed.set(n,0));let e=this._series_color_map.get(n);if(!e.has(r.user)){let t=this._series_color_seed.get(n);e.set(r.user,t),this._series_color_seed.set(n,t+1)}let i=e.get(r.user),[l,s,c]=a()(o).hsl();l+=150*i%360;let u=a()(l,s,c,"hsl"),[d,g,p]=u.rgb(),_=u.hex(),h=S(x([d,g,p,1],this._plugin_background));t.style.color=h,t.style.backgroundColor=_}else t.style.backgroundColor="",t.style.color=""}function E(e,t,r){r.column_header?.[this._config.split_by.length];let[n,a,o,i,l]=(()=>void 0!==e?.color?e.color:this._color)();if("foreground"===e?.datetime_color_mode&&null!==r.user)t.style.color=n,t.style.backgroundColor="";else if("background"===e?.datetime_color_mode&&null!==r.user){let e=S(x([a,o,i,1],this._plugin_background));t.style.color=e,t.style.backgroundColor=n}else t.style.backgroundColor="",t.style.color=""}function V(e,t,r){let[n]=!0===r.user?this._pos_fg_color:!1===r.user?this._neg_fg_color:["",0,0,0,""];t.style.backgroundColor="",t.style.color=n}function P(e,t,r){let n=null!=typeof r.value&&null!=typeof r.value&&r.value?.toString()?.trim().length>0,a=r.row_header_x>=this._config.group_by.length,o=e.getMeta({dx:0,dy:r.y-r.y0+1}),i=o&&o.row_header&&typeof o.row_header[r.row_header_x+1]<"u";t.classList.toggle("psp-tree-label",n&&!a),t.classList.toggle("psp-tree-label-expand",n&&!a&&!i),t.classList.toggle("psp-tree-label-collapse",n&&!a&&i),t.classList.toggle("psp-tree-leaf",n&&a)}function M(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function O(e,t){let r=e[w]||{},n=t.hasAttribute("settings");for(let a of e.children[0].children[1].children)for(let t of a.children){let a=e.getMeta(t),o=a.column_header?.[this._config.split_by.length],i=M.call(this,a),l=r[o],s="integer"===i||"float"===i;s?C.call(this,l,t,a,n):"boolean"===i?V.call(this,l,t,a):"string"===i?A.call(this,l,t,a):"date"===i||"datetime"===i?E.call(this,l,t,a):(t.style.backgroundColor="",t.style.color=""),t.classList.toggle("psp-bool-type","boolean"===i&&null!==a.user);let c="TH"===t.tagName;c&&P.call(this,e,t,a),t.classList.toggle("psp-align-right",!c&&s),t.classList.toggle("psp-align-left",c||!s),t.classList.toggle("psp-color-mode-bar","bar"===l?.number_fg_mode&&s)}}async function N(e,t,r,n){let a=e.getMeta(n).column_header[this._config.split_by.length],o=(r.shiftKey?L:T).call(this,a);this._preserve_focus_state=!0,await t.restore({sort:o})}function L(e){let t=[],r=!1;for(let n of this._config.sort){let[a,o]=n;if(a===e){r=!0;let n=z.call(this,e,o);n&&t.push(n)}else t.push(n)}return r||t.push([e,"desc"]),t}function T(e){for(let[t,r]of this._config.sort)if(t===e){let t=z.call(this,e,r);return t?[t]:[]}return[[e,"desc"]]}function z(e,t){let r=this._config.split_by.length>0?R:D,n=t?r[t]:"desc";if(n)return[e,n]}var D={desc:"asc",asc:void 0},R={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0};async function Y(e,t){let r=e.getMeta(t.target),n=t.target.classList.contains("psp-tree-label-collapse");t.shiftKey&&n?this._view.set_depth(r.row_header.filter((e=>void 0!==e)).length-2):t.shiftKey?this._view.set_depth(r.row_header.filter((e=>void 0!==e)).length-1):n?this._view.collapse(r.y):this._view.expand(r.y),this._num_rows=await this._view.num_rows(),this._num_columns=await this._view.num_columns(),e.draw()}async function B(e,t,r){if(1!==r.which)return;let n=r.target;if("A"!==n.tagName){for(;"TD"!==n.tagName&&"TH"!==n.tagName;)if(n=n.parentElement,!e.contains(n))return;if(n.classList.contains("psp-tree-label"))return Y.call(this,e,r),void r.stopImmediatePropagation();if(n.classList.contains("psp-menu-enabled")){let a=e.getMeta(n).column_header?.[this._config.split_by.length];await t.toggleColumnSettings(a),r.preventDefault(),r.stopImmediatePropagation()}else n.classList.contains("psp-sort-enabled")&&(N.call(this,e,t,r,n),r.stopImmediatePropagation())}}function j(e,t){if(1!==t.which)return;let r=t.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!e.contains(r))return;(r.classList.contains("psp-tree-label")&&t.offsetX<26||r.classList.contains("psp-header-leaf")&&!r.classList.contains("psp-header-corner"))&&t.stopImmediatePropagation()}function $(e,t){void 0===t&&(t=!1);let r=0===this._config.group_by.length&&0===this._config.split_by.length,n=e.hasAttribute("selectable"),a=t||!!e.children[0]._is_edit_mode;return r&&!n&&a}function I(e,t,r){let n=e[w]||{},a=$.call(this,t);r.classList.toggle("edit-mode-allowed",$.call(this,t,!0));for(let o of e.querySelectorAll("td")){let t=e.getMeta(o),r=this.get_psp_type(t);if(a&&this._is_editable[t.x]){let e=t.column_header[this._config.split_by.length];"string"===r&&"link"===n[e]?.format?(o.toggleAttribute("contenteditable",!1),o.classList.toggle("boolean-editable",!1)):"boolean"===r?(o.toggleAttribute("contenteditable",!1),o.classList.toggle("boolean-editable",null!==t.user)):(a!==o.hasAttribute("contenteditable")&&o.toggleAttribute("contenteditable",a),o.classList.toggle("boolean-editable",!1))}else o.toggleAttribute("contenteditable",!1),o.classList.toggle("boolean-editable",!1)}}var H=(e,t,r)=>{let n=e.querySelectorAll("td"),a=r.get(e),o=e.getRootNode();if(a){for(let t of n){let r=e.getMeta(t);if(r.x===a.x&&r.y===a.y)return o.activeElement!==t&&t.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&e.contains(o.activeElement)&&o.activeElement.blur()}};function X(){if(this.isContentEditable){let e=this.getRootNode().getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this),t.setEnd(e.endContainer,e.endOffset),t.toString().length}return this.target.selectionStart}function F(e,t,r){let n=e.getMeta(r),a=t._schema[t._column_paths[n.x]];if(n){let e=r.textContent,o=t._ids[n.y-n.y0];if("float"===a||"integer"===a){if(e=parseFloat(e.replace(/,/g,"")),isNaN(e))return!1}else if("date"===a||"datetime"===a){if(e=Date.parse(e),isNaN(e))return!1}else"boolean"===a&&(e="true"!==e&&("false"===e||null));let i={__INDEX__:o,[t._column_paths[n.x]]:e};return t._table.update([i],{port_id:t._edit_port}),!0}}function W(e,t){void 0===t&&(t=!1);let r=0===this._config.group_by.length&&0===this._config.split_by.length,n=e.hasAttribute("selectable"),a=t||!!e.children[0]._is_edit_mode;return r&&!n&&a}var U=function(e){let t;return async function(){if(t&&await t&&t)return;let r;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t=new Promise((e=>r=e)),await e.apply(this,a),t=void 0,r()}}((async function(e,t,r,n,a){let o=e.getMeta(r),i=this._column_paths.length,l=this._num_rows,s=t.get(e);if(!s)return;o.x+n<i&&0<=o.x+n&&(s.x=o.x+n),o.y+a<l&&0<=o.y+a&&(s.y=o.y+a);let c=Math.max(o.x0-10,0),u=Math.min(o.x0+10,i),d=Math.max(o.y0-5,0),g=Math.min(o.y0+10,l),p=o.x0+n,_=o.y0+a;for(;!H(e,0,t)&&p>=c&&p<u&&_>=d&&_<g;)await e.scrollToCell(p,_,i,l),t.set(e,s),p+=n,_+=a}));function q(e,t,r,n){if(!W.call(this,t))return;let a=e.getRootNode().activeElement;switch(n.target.classList.remove("psp-error"),n.key){case"Enter":n.preventDefault(),n.shiftKey?U.call(this,e,r,a,0,-1):U.call(this,e,r,a,0,1);break;case"ArrowLeft":0==X.call(a)&&(n.preventDefault(),U.call(this,e,r,a,-1,0));break;case"ArrowUp":n.preventDefault(),U.call(this,e,r,a,0,-1);break;case"ArrowRight":X.call(a)==a.textContent.length&&(n.preventDefault(),U.call(this,e,r,a,1,0));break;case"ArrowDown":n.preventDefault(),U.call(this,e,r,a,0,1)}}function Z(e,t,r){let n=e.getMeta(r.target);if(typeof n?.x<"u"){let a=W.call(this,t),o=this._is_editable[n.x],i="boolean"===this.get_psp_type(n),l="-"===r.target.textContent;a&&o&&i&&!l&&F(e,this,r.target)}}function G(e,t,r,n){if(W.call(this,t)&&r.has(e)){n.target.classList.remove("psp-error");let t=r.get(e);r.delete(e),t.content!==n.target.textContent&&(F(e,this,n.target)||(n.target.textContent=t.content,n.target.classList.add("psp-error"),n.target.focus()))}}function Q(e,t,r,n){let a=e.getMeta(n.target);if(a){let t={x:a.x,y:a.y,content:n.target.textContent};r.set(e,t)}}async function J(e,t,r){let{_view:n,_config:a}=e,o=a.group_by,i=a.split_by,l=t>=0?t:0,s=l+1,c=await n.to_json({start_row:l,end_row:s}),u=c.map((e=>e.__ROW_PATH__))[0]||[],d=o.map(((e,t)=>{let r=u[t];return r?[e,"==",r]:void 0})).filter((e=>e)),g=o.length>0?r+1:r,p=Object.keys(c[0])[g],_={row:c[0]},h=[];if(p){let e=p.split("|");_.column_names=[e[i.length]],h=i.map(((t,r)=>{let n=e[r];return n?[t,"==",n]:void 0})).filter((e=>e)).filter((e=>{let[,,t]=e;return"__ROW_PATH__"!==t}))}let b=a.filter.concat(d).concat(h);return _.config={filter:b},_}async function K(e,t,r,n){let a=e.getMeta(n.target);if(!t.hasAttribute("selectable")||n.handled||1!==n.which||!a)return;let o=this._ids[a.y-a.y0];if(a&&a.y>=0){let i=r.get(e),l=!!i&&i.reduce(((e,t,r)=>e&&t===o[r]),!0),s=!!i&&o.length===i.length&&l,c={selected:!s},{row:u,column_names:d,config:g}=await J(this,a.y,a.x);s?(r.delete(e),c={...c,row:u,config:{filter:structuredClone(this._config.filter)}}):(r.set(e,o),c={...c,row:u,column_names:d,config:g}),await e.draw({preserve_width:!0}),n.handled=!0,t.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:c}))}}function ee(e,t,r){if(!t.hasAttribute("selectable"))return;let n=r.has(e),a=r.get(e);for(let o of e.querySelectorAll("td"))if(n){let t=e.getMeta(o),r=this._ids[t.y-t.y0],n=a.reduce(((e,t,n)=>e&&t===r[n]),!0);o.classList.toggle("psp-row-selected",r.length===a.length&&n),o.classList.toggle("psp-row-subselected",r.length!==a.length&&n)}else o.classList.toggle("psp-row-selected",!1),o.classList.toggle("psp-row-subselected",!1);for(let o of e.querySelectorAll("tbody th")){let t=e.getMeta(o),r=this._ids[t.y-t.y0];if(!n||r[t.row_header_x])o.classList.toggle("psp-row-selected",!1),o.classList.toggle("psp-row-subselected",!1);else{let e=a.reduce(((e,t,n)=>e&&t===r[n]),!0);o.classList.toggle("psp-row-selected",r.length===a.length&&e),o.classList.toggle("psp-row-subselected",r.length!==a.length&&e)}}}async function te(e,t,r){r.delete(e);for(let n of e.querySelectorAll("td,th"))n.classList.toggle("psp-row-selected",!1),n.classList.toggle("psp-row-subselected",!1)}var re={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat,boolean:class{format(e){return e?"true":"false"}}},ne=new class{constructor(){this._formatters=new Map}create_datetime_formatter(e,t){let r=i(e);if("datetime"===e){if("custom"!==t.format){let e={...r.format,timeZone:t.timeZone,dateStyle:t.dateStyle,timeStyle:t.timeStyle};return"disabled"===e.dateStyle?e.dateStyle=void 0:void 0===e.dateStyle&&(e.dateStyle=r.format.dateStyle),"disabled"===e.timeStyle?e.timeStyle=void 0:void 0===e.timeStyle&&(e.timeStyle=r.format.timeStyle),new Intl.DateTimeFormat([],e)}{let e={timeZone:t.timeZone,second:t.second,minute:t.minute,hour:t.hour,day:t.day,weekday:t.weekday,month:t.month,year:t.year,hour12:t.hour12,fractionalSecondDigits:t.fractionalSecondDigits};return"disabled"===e.year?e.year=void 0:void 0===e.year&&(e.year="2-digit"),"disabled"===e.month?e.month=void 0:void 0===e.month&&(e.month="numeric"),"disabled"===e.day?e.day=void 0:void 0===e.day&&(e.day="numeric"),"disabled"===e.weekday&&(e.weekday=void 0),"disabled"===e.hour?e.hour=void 0:void 0===e.hour&&(e.hour="numeric"),"disabled"===e.minute?e.minute=void 0:void 0===e.minute&&(e.minute="numeric"),"disabled"===e.second?e.second=void 0:void 0===e.second&&(e.second="numeric"),void 0===e.hour12&&(e.hour12=!0),new Intl.DateTimeFormat([],e)}}{let e={...r.format,dateStyle:t.dateStyle};return"disabled"===e.dateStyle?e.dateStyle=void 0:void 0===e.dateStyle&&(e.dateStyle=r.format.dateStyle),new Intl.DateTimeFormat([],e)}}create_number_formatter(e,t){let{format:r}=i(e);return void 0!==t.fixed&&(r.minimumFractionDigits=t.fixed,r.maximumFractionDigits=t.fixed),new re[e]([],r)}create_boolean_formatter(e,t){let r=i(e);return new re[e]([],r.format)}get(e,t){let r=[e,t.fixed,t.timeZone,t.dateStyle,t.timeStyle,t.fractionalSecondDigits,t.format,t.year,t.month,t.day,t.weekday,t.hour,t.minute,t.second,t.hour12].join("-");if(!this._formatters.has(r)){i(e);"date"===e||"datetime"===e?this._formatters.set(r,this.create_datetime_formatter(e,t)):"integer"===e||"float"===e?this._formatters.set(r,this.create_number_formatter(e,t)):"boolean"===e?this._formatters.set(r,this.create_boolean_formatter(e,t)):this._formatters.set(r,!1)}return this._formatters.get(r)}};function ae(e,t,r,n){if(void 0===r&&(r={}),void 0===n&&(n=!1),null===t)return"-";let a=n&&this._table_schema[e]||this._schema[e]||"string",o=r[e]||{};if("integer"!==a&&"float"!==a||"bar"!==o?.number_fg_mode){if("link"===o?.format&&"string"===a){let e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","_blank"),e.textContent=t,e}if("bold"===o?.format&&"string"===a){let e=document.createElement("b");return e.textContent=t,e}if("italics"===o?.format&&"string"===a){let e=document.createElement("i");return e.textContent=t,e}{let e=ne.get(a,o);return e?e.format(t):t}}{let e=Math.max(0,Math.min(1,1*Math.abs(t/o.fg_gradient))),r=this._div_factory.get(),n=t>=0?"left":"right",a=(100*e).toFixed(2);return r.setAttribute("style",`width:calc(${a}% - 4px);position:absolute;${n}:2px;height:80%;top:10%;pointer-events:none;`),r}}function oe(e,t,r){var n=this;return void 0===e&&(e=[]),function*(){let a=r[w];for(let r of e){r=["TOTAL",...r];let e=r[r.length-1];r=r.slice(0,r.length-1).fill("");let o=ae.call(n,t[r.length-1],e,a,!0);r=o instanceof HTMLElement?r.concat(o):r.concat({toString:()=>o}),r.length=t.length+1,yield r}}()}function ie(e,t,r){let n=window.getComputedStyle(e).getPropertyValue(t).trim();return n.length>0?n:r}function le(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}async function se(e,t,r,n){void 0===n&&(n={});let o=await r.get_config(),i=Object.fromEntries(o.expressions.map((e=>[e[0],e[1]]))),[l,s,c,u,d,g,p]=await Promise.all([t.schema(),t.validate_expressions(i),r.num_rows(),r.schema(),r.expression_schema(),r.column_paths(),this.parentElement.getEditPort()]),_=a()(ie(e,"--plugin--background","#FFFFFF")).rgb(),h=k(ie(e,"--rt-pos-cell--color","#338DCD")),b=k(ie(e,"--rt-neg-cell--color","#FF5942")),f=k(v(h[0],_)),m=k(v(b[0],_)),y=k(ie(e,"--active--color","#ff0000")),x={...u,...d},S={...l,...s.expression_schema},C=g.filter((e=>"__ROW_PATH__"!==e&&"__ID__"!==e)),A=[],E=[];for(let a of C){let e=a.split("|")[o.split_by.length];E.push(x[e]),A.push(!!l[e])}let V=Object.assign(n,{_edit_port:p,_view:r,_table:t,_table_schema:S,_config:o,_num_rows:c,_schema:x,_ids:[],_plugin_background:_,_color:y,_pos_fg_color:h,_neg_fg_color:b,_pos_bg_color:f,_neg_bg_color:m,_column_paths:C,_column_types:E,_is_editable:A,_row_header_types:o.group_by.map((e=>S[e])),_series_color_map:new Map,_series_color_seed:new Map,get_psp_type:le});return V._div_factory=V._div_factory||new class{constructor(e){this._name=e,this._elements=[],this._index=0}clear(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let e=this._elements[this._index];return this._index+=1,e}}("div"),e.setDataListener(function(e){let t,r,n,a,o;return async function(i,l,s,c,u){let d,g={};c-l>0&&u-s>0?(this._is_old_viewport=this._last_window?.start_row===s&&this._last_window?.end_row===u&&this._last_window?.start_col===l&&this._last_window?.end_col===c,d={start_row:s,start_col:l,end_row:u,end_col:c,id:!0},g=JSON.parse(await this._view.to_columns_string(d)),this._last_window=d,this._ids=g.__ID__,this._reverse_columns=this._column_paths.slice(l,c).reduce(((e,t,r)=>(e.set(t,r),e)),new Map),this._reverse_ids=this._ids.reduce(((e,t,r)=>(e.set(t?.join("|"),r),e)),new Map)):this._div_factory.clear();let p=[],_=[],h=[],b=[],f=e.hasAttribute("settings");for(let e=l;e<Math.min(c,this._column_paths.length);++e){let t=this._column_paths[e],r=t.split("|"),n=g[t]||new Array(u-s).fill(null);p.push(n.map((e=>ae.call(this,r[this._config.split_by.length],e,i[w])))),_.push(n),f&&r.push("Edit"),h.push(r),b.push(t)}return c-l>0&&u-s>0&&(this.last_column_paths=r,this.last_meta=t,this.last_ids=n,this.last_reverse_ids=a,this.last_reverse_columns=o,r=b,t=_,n=this._ids,a=this._reverse_ids,o=this._reverse_columns),{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(oe.call(this,g.__ROW_PATH__,this._config.group_by,i)),column_headers:h,data:p,metadata:_,column_header_merge_depth:Math.max(0,this._config.split_by.length)}}}(this.parentElement).bind(V,e),{virtual_mode:window.getComputedStyle(e).getPropertyValue("--datagrid-virtual-mode")?.trim()||"both"}),V}async function ce(e,t,r){let n=e.getMeta(r.target);if(!n)return;let{x:a,y:o}=n,{row:i,column_names:l,config:s}=await J(this,o,a);t.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:i,column_names:l,config:s}}))}async function ue(e){let t=this.parentElement,r=await t.getTable(!0);if(this._initialized)await se.call(this,this.regular_table,r,e,this.model);else{this.innerHTML="",this.shadowRoot?this.shadowRoot.appendChild(this.regular_table):this.appendChild(this.regular_table),this.model=await se.call(this,this.regular_table,r,e),this.regular_table.addStyleListener(O.bind(this.model,this.regular_table,t)),this.regular_table.addStyleListener(m.bind(this.model,this.regular_table)),this.regular_table.addStyleListener(b.bind(this.model,this.regular_table,t)),this.regular_table.addEventListener("click",j.bind(this.model,this.regular_table)),this.regular_table.addEventListener("mousedown",B.bind(this.model,this.regular_table,t));let n=new WeakMap;this.regular_table.addStyleListener(ee.bind(this.model,this.regular_table,t,n)),this.regular_table.addEventListener("mousedown",K.bind(this.model,this.regular_table,t,n)),this.regular_table.addEventListener("psp-deselect-all",te.bind(this.model,this.regular_table,t,n)),this.regular_table.addEventListener("click",ce.bind(this.model,this.regular_table,t));let a=new WeakMap;this.regular_table.addStyleListener(I.bind(this.model,this.regular_table,t,this)),this.regular_table.addStyleListener(H.bind(this.model,this.regular_table,t,a)),this.regular_table.addEventListener("click",Z.bind(this.model,this.regular_table,t)),this.regular_table.addEventListener("focusin",Q.bind(this.model,this.regular_table,t,a)),this.regular_table.addEventListener("focusout",G.bind(this.model,this.regular_table,t,a)),this.regular_table.addEventListener("keydown",q.bind(this.model,this.regular_table,t,a)),t.addEventListener("perspective-toggle-column-settings",(e=>{if(this.isConnected){if(h.call(this.model,this.regular_table,t,e.detail.column_name),!e.detail.open)return void(this.model._column_settings_selected_column=null);this.model._column_settings_selected_column=e.detail.column_name}})),this._initialized=!0}}function de(e,t){if(void 0===t&&(t=!1),!this._initialized)return;t&&(this._cached_column_sizes=e);let r={},{group_by:n,columns:a}=this.model._config,o=n?.length>0?n.length+1:0;for(let i of Object.keys(e))if("__ROW_PATH__"===i)r[o-1]=e[i];else{r[this.model._column_paths.indexOf(i)+o]=e[i]}this.regular_table._column_sizes.override=r}function ge(){if(!this._initialized)return[];if(this._cached_column_sizes){let e=this._cached_column_sizes;return this._cached_column_sizes=void 0,e}let e=this.regular_table._column_sizes.override,{group_by:t,columns:r}=this.model._config,n=t?.length>0?t.length+1:0,a={};for(let o of Object.keys(e))if(void 0!==e[o]){let t=o-n;t>-1?a[this.model._column_paths[t]]=e[o]:-1===t&&(a.__ROW_PATH__=e[o])}return a}function pe(e){void 0===e&&(e=void 0),typeof e>"u"&&(e=!this._is_edit_mode),this._is_edit_mode=e,this.classList.toggle("editable",e),void 0!==this._edit_mode&&(this._edit_mode.classList.toggle("editable",e),this._edit_mode.children[0].textContent=e?"Editable":"Read Only")}function _e(e){void 0===e&&(e=void 0),typeof e>"u"&&(e=!this._is_scroll_lock),this._is_scroll_lock=e,this.classList.toggle("sub-cell-scroll-disabled",e),void 0!==this._scroll_lock&&(this._scroll_lock.classList.toggle("lock-scroll",e),this._scroll_lock.children[0].textContent=e?"Align Scroll":"Free Scroll")}function he(e){let t={};if((e=JSON.parse(JSON.stringify(e))).columns)for(let n of Object.keys(e.columns)){let r=e.columns[n];void 0!==r.column_size_override&&(t[n]=r.column_size_override,delete r.column_size_override),r?.pos_fg_color&&(r.pos_fg_color=k(r.pos_fg_color),r.neg_fg_color=k(r.neg_fg_color)),r?.pos_bg_color&&(r.pos_bg_color=k(r.pos_bg_color),r.neg_bg_color=k(r.neg_bg_color)),r?.color&&(r.color=k(r.color)),0===Object.keys(r).length&&delete e.columns[n]}"editable"in e&&pe.call(this,e.editable),"scroll_lock"in e&&_e.call(this,e.scroll_lock);let r=this.regular_table;de.call(this,t,!0),r[w]=e.columns}function be(){if(this.regular_table){let e=this.regular_table,t={columns:{},scroll_lock:!!this._is_scroll_lock,editable:!!this._is_edit_mode};for(let n of Object.keys(e[w]||{})){let r=Object.assign({},e[w][n]);(r?.pos_fg_color||r?.pos_bg_color)&&(r.pos_fg_color=r.pos_fg_color?.[0],r.neg_fg_color=r.neg_fg_color?.[0],r.pos_bg_color=r.pos_bg_color?.[0],r.neg_bg_color=r.neg_bg_color?.[0]),r?.color&&(r.color=r.color[0]),t.columns[n]=r}let r=ge.call(this);for(let n of Object.keys(r||{}))t.columns[n]||(t.columns[n]={}),t.columns[n].column_size_override=r[n];return JSON.parse(JSON.stringify(t))}return{}}async function fe(e){if(this.parentElement&&await this.activate(e),!this.isConnected||null==this.offsetParent)return;let t=ge.call(this),r=this.regular_table.draw({invalid_columns:!0});this.model._preserve_focus_state?this.model._preserve_focus_state=!1:(this.regular_table.scrollTop=0,this.regular_table.scrollLeft=0,this.regular_table.dispatchEvent(new CustomEvent("psp-deselect-all",{bubbles:!1})),this.regular_table._resetAutoSize()),de.call(this,t),await r,this._toolbar.classList.toggle("aggregated",this.model._config.group_by.length>0||this.model._config.split_by.length>0)}function me(){let e=e=>{let t;return t="integer"===e||"float"===e?{fg_gradient:0,pos_fg_color:this.model._pos_fg_color[0],neg_fg_color:this.model._neg_fg_color[0],number_fg_mode:"color",bg_gradient:0,pos_bg_color:this.model._pos_bg_color[0],neg_bg_color:this.model._neg_bg_color[0],number_bg_mode:"disabled",fixed:"float"===e?2:0}:{color:this.model._color[0],bg_color:this.model._color[0]},t},t={};for(let r of["string","float","integer","bool","date","datetime"])t[r]=e(r);return t}var we,ye,ve,xe,Se=class extends HTMLElement{constructor(){super(),this.regular_table=document.createElement("regular-table"),this.regular_table.part="regular-table",this._is_scroll_lock=!1;let e=Se;"shadow"==e.renderTarget&&(g(e,we)||(((e,t,r,n)=>{d(e,t,"write to private field"),n?n.call(e,r):t.set(e,r)})(e,we,new CSSStyleSheet),g(e,we).replaceSync(p)),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(g(e,we)))}connectedCallback(){this._toolbar||(this._toolbar=document.createElement("perspective-viewer-datagrid-toolbar"));let e=this.parentElement;e&&e.appendChild(this._toolbar)}disconnectedCallback(){this._toolbar.parentElement.removeChild(this._toolbar)}async activate(e){return await ue.call(this,e)}get name(){return"Datagrid"}get category(){return"Basic"}get select_mode(){return"toggle"}get min_config_columns(){}get config_column_names(){return["Columns"]}get priority(){return 1}get plugin_attributes(){return{style:me.call(this)}}async draw(e){return await fe.call(this,e)}async update(e){this.model._num_rows=await e.num_rows(),await this.regular_table.draw()}async resize(){!this.isConnected||null==this.offsetParent||this._initialized&&await this.regular_table.draw()}async clear(){this.regular_table._resetAutoSize(),this.regular_table.clear()}save(){return be.call(this)}restore(e){return he.call(this,e)}async restyle(e){await this.draw(e)}delete(){this.regular_table.table_model&&this.regular_table._resetAutoSize(),this.regular_table.clear()}},ke=Se;we=new WeakMap,ye=ke,ve="renderTarget",xe=window.CSS?.supports&&window.CSS?.supports("selector(:host-context(foo))")?"shadow":"light",((e,t,r)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(ye,"symbol"!=typeof ve?ve+"":ve,xe),((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(ke,we,void 0);var Ce=class extends HTMLElement{connectedCallback(){if(this._initialized)return;this._initialized=!0,this.setAttribute("slot","plugin-settings"),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>\n                :host{position:relative;display:block;}:host #container{position:absolute;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;top:0;left:0;right:0;bottom:0;}:host #toolbar{display:flex;align-items:center;height:36px;}:host #slot-container{flex:1;position:relative;}#scroll_lock.lock-scroll:before{-webkit-mask-image:var(--toolbar-scroll-lock-active--content);}#scroll_lock:before{-webkit-mask-image:var(--toolbar-scroll-lock--content);}#select_mode:before{content:"highlight_alt";}#edit_mode:before{-webkit-mask-image:var(--toolbar-edit-mode--content);}#edit_mode.editable:before{-webkit-mask-image:var(--toolbar-edit-mode-active--content);}:host(.aggregated) #toolbar #edit_mode{display:none;}.button:before{width:25px;height:21px;content:"";-webkit-mask-image:cover;mask-image:cover;background-color:var(--icon--color,#ccc);margin:0 5px;}.button.editable:before,.button.lock-scroll:before{color:inherit;}.button{display:inline-flex;align-items:center;user-select:none;width:37px;height:22px;box-sizing:border-box;white-space:nowrap;border:1px solid transparent;border-radius:3px;}.button>span{display:none;margin:0;padding:0;}.button:hover{background-color:var(--icon--color);color:var(--plugin--background);opacity:1;display:flex;align-items:center;cursor:pointer;min-width:var(--button--min-width,105px);}.button:hover:before{background-color:var(--plugin--background);margin:0 5px 0 5px;}.button:hover>span{display:contents;font-size:9px;line-height:36px;}\n            </style>\n            <div id="toolbar">\n                <span id="scroll_lock" class="button">\n                    <span>Free Scroll</span>\n                </span>\n                <span id="edit_mode" class="button"><span>Read Only</span></span>\n            </div>\n        ';let e=this.parentElement,t=e.querySelector("perspective-viewer-datagrid");t._scroll_lock=this.shadowRoot.querySelector("#scroll_lock"),t._scroll_lock.addEventListener("click",(()=>_e.call(t))),t._edit_mode=this.shadowRoot.querySelector("#edit_mode"),t._edit_mode.addEventListener("click",(()=>{pe.call(t),t.regular_table.draw(),e.dispatchEvent(new Event("perspective-config-update"))}))}};!async function(){customElements.define("perspective-viewer-datagrid-toolbar",Ce),customElements.define("perspective-viewer-datagrid",ke),await customElements.whenDefined("perspective-viewer"),customElements.get("perspective-viewer").registerPlugin("perspective-viewer-datagrid")}(),function(){let e=document.createElement("style");e.textContent=p,document.head.insertBefore(e,document.head.firstChild)}()},7115:function(e,t,r){"use strict";r.d(t,{ZP:function(){return I}});var n=r(5829),a=r.n(n);var o=r.p+"aba87eae504ca5bc.wasm",i=Object.defineProperty,l={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(l,{COLUMN_SEPARATOR_STRING:()=>v,CONFIG_ALIASES:()=>c,CONFIG_VALID_KEYS:()=>u,DATA_TYPES:()=>s,FILTER_OPERATORS:()=>b,SORT_ORDERS:()=>p,SORT_ORDER_IDS:()=>_,TYPE_AGGREGATES:()=>h,TYPE_FILTERS:()=>x});var s={integer:"integer",float:"float",string:"string",boolean:"boolean",date:"date",datetime:"datetime",object:"object"},c={row_pivot:"group_by","row-pivot":"group_by","row-pivots":"group_by",col_pivot:"split_by",col_pivots:"split_by",column_pivot:"split_by","column-pivot":"split_by","column-pivots":"split_by",filters:"filter",sorts:"sort"},u=["version","viewport","group_by","split_by","aggregates","columns","filter","sort","computed_columns","expressions","group_by_depth","split_by_depth","filter_op"],d=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last minus first","last","high","join","low","high minus low","max","mean","median","min","pct sum parent","pct sum grand total","stddev","sum","sum abs","sum not null","unique","var"],g=["any","count","distinct count","distinct leaf","dominant","first by index","join","last by index","last","unique"],p=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],_=[2,0,1,0,1,3,4,3,4],h={string:g,float:d,integer:d,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],datetime:g,date:g},b={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},f=[b.bitwiseAnd,b.bitwiseOr,b.equals,b.doesNotEqual,b.or,b.and,b.isNull,b.isNotNull],m=[b.lessThan,b.greaterThan,b.equals,b.lessThanOrEquals,b.greaterThanOrEquals,b.doesNotEqual,b.isNull,b.isNotNull],w=[b.equals,b.contains,b.doesNotEqual,b.isIn,b.isNotIn,b.beginsWith,b.endsWith,b.isNull,b.isNotNull],y=[b.lessThan,b.greaterThan,b.equals,b.lessThanOrEquals,b.greaterThanOrEquals,b.doesNotEqual,b.isNull,b.isNotNull],v="|",x={string:w,float:m,integer:m,boolean:f,datetime:y,date:y},S={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}};function k(e){return e&&"object"==typeof e&&!Array.isArray(e)}function C(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;let a=r.shift();if(k(e)&&k(a))for(let o in a)k(a[o])?(e[o]||Object.assign(e,{[o]:{}}),C(e[o],a[o])):Object.assign(e,{[o]:a[o]});return C(e,...r)}function A(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=C(S,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}var E=new WeakMap,V=0;function P(e,t){return function(){let r,n=()=>{},a=Array.prototype.slice.call(arguments,0,arguments.length);for(let e=a.length-1;e>=0;e--)"function"==typeof a[e]&&(r=a.splice(e,1)[0]);let o=E.get(r);E.delete(r);let i={cmd:t||"view_method",name:this._name,method:e,args:a,subscribe:!0,callback_id:o};this._worker.post(i,r,n),this._worker.unsubscribe(t,r)}}function M(e,t){return function(){let r,n=()=>{},a=Array.prototype.slice.call(arguments,0,arguments.length);for(let e=a.length-1;e>=0;e--)"function"==typeof a[e]&&(r=a.splice(e,1)[0]);V++,E.set(r,V);let o={cmd:t||"view_method",name:this._name,method:e,args:a,subscribe:!0,callback_id:V};this._worker.post(o,r,n,!0)}}function O(e,t){return function(){var r=Array.prototype.slice.call(arguments,0,arguments.length);return new Promise(function(n,a){var o={cmd:t||"view_method",name:this._name,method:e,args:r,subscribe:!1};this._worker.post(o,n,a)}.bind(this))}}function N(e,t,r){return new Promise(((n,a)=>{this._worker=e,this._name=Math.random()+"",this._worker.post({cmd:"view",view_name:this._name,table_name:t,config:r},(()=>{n(this)}),a),!0===this._worker._initialized&&!this._worker._features?.wait_for_response&&n(this)}))}function L(e){let t=e;do{for(let r of Object.getOwnPropertyNames(t)){let t=e[r];"constructor"!==r&&"function"==typeof t&&(e[r]=t.bind(e))}}while(t=t!==Object&&Object.getPrototypeOf(t))}function T(e,t,r){return new Promise(((n,a)=>{this._worker=e,this._name=r.name||Math.random()+"",L(this),t.to_arrow?(this._worker.post({cmd:"table",name:this._name,args:[],options:r||{}}),t.to_arrow().then((e=>{this._worker.post({cmd:"table",name:this._name,args:[e],options:r||{}},(()=>{t.on_update((e=>{this.update(e.delta)}),{mode:"row"}),n(this)}),a)}))):this._worker.post({cmd:"table",name:this._name,args:[t],options:r||{}},(()=>{n(this)}),a),!0===this._worker._initialized&&!this._worker._features?.wait_for_response&&n(this)}))}function z(e,t){this._worker=e,this._name=t}N.prototype,N.prototype.get_config=O("get_config"),N.prototype.get_min_max=O("get_min_max"),N.prototype.to_json=O("to_json"),N.prototype.to_arrow=O("to_arrow"),N.prototype.to_columns=O("to_columns"),N.prototype.to_columns_string=O("to_columns_string"),N.prototype.to_csv=O("to_csv"),N.prototype.schema=O("schema"),N.prototype.expression_schema=O("expression_schema"),N.prototype.column_paths=O("column_paths"),N.prototype.num_columns=O("num_columns"),N.prototype.num_rows=O("num_rows"),N.prototype.dimensions=O("dimensions"),N.prototype.set_depth=O("set_depth"),N.prototype.get_row_expanded=O("get_row_expanded"),N.prototype.expand=O("expand"),N.prototype.collapse=O("collapse"),N.prototype.delete=O("delete"),N.prototype.col_to_js_typed_array=O("col_to_js_typed_array"),N.prototype.on_update=M("on_update","view_method"),N.prototype.remove_update=P("remove_update","view_method"),N.prototype.on_delete=M("on_delete","view_method"),N.prototype.remove_delete=P("remove_delete","view_method"),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var a,o,i=0|t,l=Math.max(i>=0?i:n-Math.abs(i),0);for(;l<n;){if((a=r[l])===(o=e)||"number"==typeof a&&"number"==typeof o&&isNaN(a)&&isNaN(o))return!0;l++}return!1}}),T.prototype.type="table",z.prototype=T.prototype,T.prototype.view=function(e){return new N(this._worker,this._name,e)},T.prototype.query_columns=O("query_columns","table_method"),T.prototype.get_index=O("get_index","table_method"),T.prototype.get_limit=O("get_limit","table_method"),T.prototype.get_num_views=O("get_num_views","table_method"),T.prototype.make_port=O("make_port","table_method"),T.prototype.remove_port=O("remove_port","table_method"),T.prototype.schema=O("schema","table_method"),T.prototype.validate_expressions=O("validate_expressions","table_method"),T.prototype.is_valid_filter=O("is_valid_filter","table_method"),T.prototype.size=O("size","table_method"),T.prototype.num_rows=O("num_rows","table_method"),T.prototype.num_columns=O("num_columns","table_method"),T.prototype.columns=O("columns","table_method"),T.prototype.clear=O("clear","table_method"),T.prototype.replace=O("replace","table_method"),T.prototype.delete=O("delete","table_method"),T.prototype.on_delete=M("on_delete","table_method"),T.prototype.remove=O("remove","table_method"),T.prototype.remove_delete=P("remove_delete","table_method"),T.prototype.update=function(e,t){return new Promise(((r,n)=>{this._worker.post({name:this._name,cmd:"table_method",method:"update",args:[e,t||{}]},r,n,!1)}))},T.prototype.execute=function(e){this._worker.post({cmd:"table_execute",name:this._name,f:e.toString()})};var D=class{constructor(){this._initialized=!1,this._worker={initialized:{value:!1},transferable:!1,msg_id:0,handlers:{},messages:[]},L(this)}unsubscribe(e,t){for(let r of Object.keys(this._worker.handlers))this._worker.handlers[r].resolve===t&&delete this._worker.handlers[r]}post(e,t,r,n){void 0===n&&(n=!1),++this._worker.msg_id,(t||r)&&(this._worker.handlers[this._worker.msg_id]={resolve:t,reject:r,keep_alive:n}),e.id=this._worker.msg_id,this._worker.initialized.value?this.send(e):this._worker.messages.push((()=>{this.send(e),("table"===e.cmd||"view"===e.cmd)&&!this._features?.wait_for_response&&t&&t()}))}async memory_usage(){return await new Promise(((e,t)=>{this.post({cmd:"memory_usage"},e,t)}))}async get_hosted_table_names(){return await new Promise(((e,t)=>{this.post({cmd:"get_hosted_table_names"},e,t)}))}initialize_profile_thread(){this._worker.initialized.value?this.send({id:-1,cmd:"init_profile_thread"}):this._worker.messages.push((()=>this.send({id:-1,cmd:"init_profile_thread"})))}send(){throw new Error("send() not implemented")}async open_table(e){return new z(this,e)}_handle(e){if(!this._worker.initialized.value){this._initialized||(this._initialized=!0);let t=this._worker.messages;if(this._worker.initialized.value=!0,this._worker.messages=[],e.data?.data){this._features={};for(let t of e.data.data)this._features[t]=!0}if(t)for(let e in t)t.hasOwnProperty(e)&&t[e]()}if(e.data.id){let t=this._worker.handlers[e.data.id];t&&(e.data.error?t.reject(e.data.error):t.resolve(e.data.data),t.keep_alive||delete this._worker.handlers[e.data.id])}}table(e,t){return new T(this,e,t||{})}terminate(){this._worker.terminate(),this._worker=void 0}},R=class extends D{_ping(){this._ping_loop&&this._ws.send("ping"),this._ping_loop=setTimeout(this._ping.bind(this),3e4)}_close(){clearTimeout(this._ping_loop),this._ping_loop=void 0,this._on_close_callback?.()}_onmessage(e){if("pong"!==e.data)if(this._pending_binary){let t=e.data;if(this._full_binary.set(new Uint8Array(t),this._total_chunk_length),this._total_chunk_length+=t.byteLength,this._total_chunk_length!==this._pending_binary_length)return;t=this._full_binary.buffer;let r={data:{id:this._pending_binary,data:t}};if(void 0!==this._pending_port_id){let e={port_id:this._pending_port_id,delta:t};r.data.data=e}this._handle(r),delete this._pending_binary,delete this._pending_binary_length,delete this._pending_port_id,this._total_chunk_length=0,this._full_binary=null}else(e=JSON.parse(e.data)).binary_length?(this._pending_binary=e.id,this._pending_binary_length=e.binary_length,e.data&&void 0!==e.data.port_id&&(this._pending_port_id=e.data.port_id),this._full_binary=new Uint8Array(this._pending_binary_length)):this._handle({data:e})}constructor(e){super(),this._ws=e,this._ws.binaryType="arraybuffer",this._full_binary,this._total_chunk_length=0,this._pending_binary_length=0,this._ws.onopen=()=>{this.send({id:-1,cmd:"init"})},this._ping(),this._ws.onclose=this._close.bind(this),this._ws.onmessage=this._onmessage.bind(this)}send(e){if(this._ws.readyState!==a().CLOSED){if(e.args&&e.args.length>0&&e.args[0]instanceof ArrayBuffer&&void 0!==e.args[0].byteLength){let t=e;return e.binary_length=e.args[0].byteLength,this._ws.send(JSON.stringify(t)),void this._ws.send(e.args[0])}this._ws.send(JSON.stringify(e))}else console.warn("Websocket connection is already closed.")}terminate(){return new Promise((e=>{this._on_close_callback=e,this._ws.close()}))}},Y=!1,B=function(){let e;return function(){return e||(e=new class{async worker(){return await new Worker(r.p+"perspective.worker.js")}async wasm(){let e=await o;if(e instanceof ArrayBuffer&&!e.buffer&&(e=new Uint8Array(e)),e.buffer&&e.buffer instanceof ArrayBuffer)Y=!0,length=e.byteLength,this._wasm=e;else if(e instanceof ArrayBuffer)length=e.byteLength,this._wasm=new Uint8Array(e);else{let t=await fetch(e);this._wasm=await t.arrayBuffer()}return this._wasm}}),e}}(),j=class extends D{constructor(e){var t;e&&(t=e,globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=C(S,t)),super(),this.register()}async register(){let e,t={cmd:"init",config:A()};if(typeof WebAssembly>"u")throw new Error("WebAssembly not supported.");for(var r in[e,t.buffer]=await Promise.all([B().worker(),B().wasm()]),this._worker)e[r]=this._worker[r];this._worker=e,this._worker.addEventListener("message",this._handle.bind(this)),this._worker.postMessage(t),this._detect_transferable()}send(e){this._worker.transferable&&e.args&&e.args[0]instanceof ArrayBuffer?this._worker.postMessage(e,[e.args[0]]):this._worker.postMessage(e)}terminate(){this._worker.terminate(),this._worker=void 0}get transferable(){return this._worker?.transferable||!1}get inline(){return Y}_detect_transferable(){var e=new ArrayBuffer(1);this._worker.postMessage(e,[e]),this._worker.transferable=0===e.byteLength}},$=function(){let e,t;return{getInstance:function(r){void 0===e&&(e=new j(r));let n=JSON.stringify(r);if(t&&n!==t)throw new Error("Configuration object for shared_worker() has changed - this is probably a bug in your application.");return t=n,e}}}();var I={override:function(e){return B().set(e)},worker:function(e){return new j(e)},websocket:function(e){return void 0===e&&(e=window.location.origin.replace("http","ws")),new R(new WebSocket(e))},shared_worker:function(e){return $.getInstance(e)},...Object.keys(l)}},4887:function(e){var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(i,{chain:()=>V,convert:()=>k}),e.exports=(t=i,((e,t,i,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))!o.call(e,s)&&s!==i&&r(e,s,{get:()=>t[s],enumerable:!(l=n(t,s))||l.enumerable});return e})(r({},"__esModule",{value:!0}),t));var l=class{constructor(e){if("string"!=typeof e)return this.major=e.major,this.minor=e.minor,this.patch=e.patch,this.build=e.build,this;let t=/(\d+)\.(\d+)\.(\d+)(\+.+)?/,[r,n,a,o,i]=e.match(t),[l,s,c,u]=i?.match(t)??function*(){for(;;)yield null}(),d=s&&c&&u?{major:Number(s),minor:Number(c),patch:Number(u)}:null;return this.major=Number(n),this.minor=Number(a),this.patch=Number(o),this.build=d,this}gt(e){let t=new l(e);return this.major>t.major||this.major===t.major&&this.minor>t.minor||this.major===t.major&&this.minor===t.minor&&this.patch>t.patch}eq(e){let t=new l(e);return this.major===t.major&&this.minor==t.minor&&this.patch==t.patch}ge(e){let t=new l(e);return this.eq(t)||this.gt(t)}};function s(e,t){let r=t.version_chain.shift();if(e.version?.ge(r))return e;t.warn&&console.warn(`Migrating Legacy -> ${r}`);let n=V(e,[d,g,p,b,!!t.replace_defaults&&c,f,m,h,v,t.omit_attributes?y:w,e=>(e.version=new l("0.0.0"),e)].filter((e=>!!e)),t);return t.verbose&&console.log(n),n}function c(e,t){for(let r of["group_by","split_by","filter","sort"])null===e[r]&&(e[r]=[],t.warn&&console.warn(`Deprecated perspective missing attribute "${r}" set to default"`)),"aggregates"in e&&null===e.aggregates&&(e.aggregates={},t.warn&&console.warn('Deprecated perspective missing attribute "aggregates" set to default"'));return e}function u(e,t){return function(r,n){let a=0;for(let o of t)if(o in r){if(a++>0)throw new Error(`Duplicate "${e}" fields`);r[e]=r[o],o!==e&&(delete r[o],n.warn&&console.warn(`Deprecated perspective attribute "${o}" renamed "${e}"`))}return r}}var d=u("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),g=u("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),p=u("filter",["filter","filters"]);function _(e,t,r,n,a){if(e.test(r)){let o=r.replace(e,t);a.warn&&console.warn(`Deprecated perspective "expression" attribute value "${r}" updated to "${o}"`);for(let e of["group_by","split_by"])if(e in n)for(let t in n[e])n[e][t]===r.replace(/"/g,"")&&(n[e][t]=o,a.warn&&console.warn(`Deprecated perspective expression in "${e}" attribute "${r}" replaced with "${o}"`));for(let e of n.filter||[])e[0]===r.replace(/"/g,"")&&(e[0]=o,a.warn&&console.warn(`Deprecated perspective expression in "filter" attribute "${r}" replaced with "${o}"`));for(let e of n.sort||[])e[0]===r.replace(/"/g,"")&&(e[0]=o,a.warn&&console.warn(`Deprecated perspective expression in "sort" attribute "${r}" replaced with "${o}"`));return o}return r}function h(e){return void 0===e.title&&(e.title=null),e}function b(e,t){if(e["computed-columns"]){if("expressions"in e)throw new Error('Duplicate "expressions" and "computed-columns');e.expressions=e["computed-columns"],delete e["computed-columns"],t.warn&&console.warn('Deprecated perspective attribute "computed-columns" renamed "expressions"');let r=[[/^year_bucket\("(.+?)"\)/,"bucket(\"$1\", 'y')"],[/^month_bucket\("(.+?)"\)/,"bucket(\"$1\", 'M')"],[/^day_bucket\("(.+?)"\)/,"bucket(\"$1\", 'd')"],[/^hour_bucket\("(.+?)"\)/,"bucket(\"$1\", 'h')"],[/^minute_bucket\("(.+?)"\)/,"bucket(\"$1\", 'm')"],[/^second_bucket\("(.+?)"\)/,"bucket(\"$1\", 's')"]];for(let n in e.expressions){let a=e.expressions[n];for(let[n,o]of r)a=_(n,o,a,e,t);e.expressions[n]=a}}return e}function f(e,t){let r={datagrid:"Datagrid",Datagrid:"Datagrid",d3_y_area:"Y Area","Y Area":"Y Area",d3_y_line:"Y Line","Y Line":"Y Line",d3_xy_line:"X/Y Line","X/Y Line":"X/Y Line",d3_y_scatter:"Y Scatter","Y Scatter":"Y Scatter",d3_xy_scatter:"X/Y Scatter","X/Y Scatter":"X/Y Scatter",d3_x_bar:"X Bar","X Bar":"X Bar",d3_y_bar:"Y Bar","Y Bar":"Y Bar",d3_heatmap:"Heatmap",Heatmap:"Heatmap",d3_treemap:"Treemap",Treemap:"Treemap",d3_sunburst:"Sunburst",Sunburst:"Sunburst"};return"plugin"in e&&e.plugin in r&&e.plugin!==r[e.plugin]&&(e.plugin=r[e.plugin],t.warn&&console.warn(`Deprecated perspective "plugin" attribute value "${e.plugin}" updated to "${r[e.plugin]}"`)),e}function m(e,t){return e.plugin_config&&"Datagrid"===e.plugin?function(e,t){if(!e.plugin_config.columns){t.warn&&console.warn('Deprecated perspective attribute "plugin_config" moved to "plugin_config.columns"');let r={};for(let n of Object.keys(e.plugin_config)){let a=e.plugin_config[n];delete e.plugin_config[n],"string"==typeof a.color_mode&&("foreground"===a.color_mode?a.number_fg_mode="color":"bar"===a.color_mode?a.number_fg_mode="bar":"background"===a.color_mode?a.number_bg_mode="color":"gradient"===a.color_mode?a.number_bg_mode="gradient":console.warn(`Unknown color_mode ${a.color_mode}`),delete a.color_mode,t.warn&&console.warn('Deprecated perspective attribute "color_mode" renamed "number_bg_mode"')),r[n]=a}e.plugin_config.columns=r,t.replace_defaults&&(e.plugin_config.editable=!1,e.plugin_config.scroll_lock=!0)}for(let r of Object.keys(e.plugin_config.columns)){let n=e.plugin_config.columns[r];"string"==typeof n.number_color_mode&&("foreground"===n.number_color_mode?n.number_fg_mode="color":"bar"===n.number_color_mode?n.number_fg_mode="bar":"background"===n.number_color_mode?n.number_bg_mode="color":"gradient"===n.number_color_mode&&(n.number_bg_mode="gradient"),delete n.number_color_mode,t.warn&&console.warn('Deprecated perspective attribute "number_color_mode" renamed "number_bg_mode"')),void 0!==n.gradient&&("gradient"===n.number_bg_mode?n.bg_gradient=n.gradient:"bar"===n.number_fg_mode&&(n.fg_gradient=n.gradient),delete n.gradient,t.warn&&console.warn('Deprecated perspective attribute "gradient" renamed "bg_gradient"')),void 0!==n.pos_color&&(void 0!==n.number_bg_mode?n.pos_bg_color=n.pos_color:void 0!==n.number_fg_mode&&(n.pos_fg_color=n.pos_color),delete n.pos_color,t.warn&&console.warn('Deprecated perspective attribute "pos_color" renamed "pos_bg_color"')),void 0!==n.neg_color&&(void 0!==n.number_bg_mode?n.neg_bg_color=n.neg_color:void 0!==n.number_fg_mode&&(n.neg_fg_color=n.neg_color),delete n.neg_color,t.warn&&console.warn('Deprecated perspective attribute "neg_color" renamed "neg_bg_color"'))}return e}(e,t):e}function w(e,t){let r=["editable","selectable","name","table","master","linked"];for(let n of r)n in e&&(delete e[n],t.warn&&console.warn(`Deprecated perspective attribute "${n}" removed`));return e}function y(e,t){let r=["editable","selectable","name","table","master","linked"];for(let n of r)n in e&&null===e[n]&&(delete e[n],t.warn&&console.warn(`Deprecated perspective attribute "${n}" removed`));return e}function v(e,t){return"name"in e&&("title"in e&&void 0!==e.title&&(e.title=e.name,t.warn&&console.warn('"name" conflicts with "title"')),delete e.name,t.warn&&console.warn('"name" unified with "title"')),e}function x(e,t){let r=t.version_chain.shift();if(e.version?.ge(r))return e;if(t.warn&&console.warn(`Migrating 2.6.1 -> ${r}`),e.version=new l(r),"X/Y Scatter"===e.plugin&&"object"==typeof e.plugin_config?.columns)for(let n in e.plugin_config.columns){let r=Object.entries(e.plugin_config.columns[n]).map((e=>{let[r,n]=e;if("symbols"===r&&Array.isArray(n)){t.warn&&console.warn(`Replacing depcrecated X/Y Scatter Plot symbol config ${n}`);let e={};for(let t in n){let r=n[t];e[r.key]=r.value}n=e}return[r,n]}));e.plugin_config.columns[n]=Object.fromEntries(r)}if(Array.isArray(e.expressions)){let r={};for(let n in e.expressions)if("string"==typeof e.expressions[n]){t.warn&&console.warn("Replacing deprecated string expression with object");let a=e.expressions[n],[o,i,l]=a.match(/\/\/\s*([^\n]+)\n(.*)/)??[a,null,null];i&&l?r[i]=l:r[o]=o}e.expressions=r}return t.verbose&&console.log(e),e}var S="2.8.0";function k(e,t){let{warn:r=!0,verbose:n=!1,replace_defaults:a=!1}=void 0===t?{}:t;if("object"!=typeof e||e instanceof ArrayBuffer)return e;{let t=JSON.parse(JSON.stringify(e));return"viewers"in t&&"detail"in t?function(e,t){for(let r in e.viewers)e.viewers[r]=C(e.viewers[r],!0,t),"master"in e.viewers[r]||(e.viewers[r].master=!1,t.warn&&console.warn('Deprecated perspective missing attribute "master" set to default')),"linked"in e.viewers[r]||(e.viewers[r].linked=!1,t.warn&&console.warn('Deprecated perspective missing attribute "linked" set to default'));return e}(t,{warn:r,replace_defaults:a}):C(t,!1,{warn:!!n||r,verbose:n,replace_defaults:a})}}function C(e,t,r){e.version=e.version?new l(e.version):new l("0.0.0"),r.omit_attributes=t,r.version_chain=["2.6.1"],r.version_chain.push(S);let n=V(e,[s,x,A,E],r);return r.verbose&&console.log("Final result -> ",n),n}function A(e){if(e.version.gt(S))throw new Error("Migrated version is newer than package version!");return e.version=new l(S),e}function E(e){return e.version=`${e.version.major}.${e.version.minor}.${e.version.patch}`,e}function V(e,t,r){for(let n of t)e=n(e,r);return e}},6246:function(e,t,r){"use strict";var n=r.p+"a4d44f6c42858c74.wasm",a=Object.defineProperty,o=class extends HTMLElement{constructor(){super()}get name(){return"Debug"}get select_mode(){return"select"}get min_config_columns(){}get config_column_names(){}get priority(){return 0}get plugin_attributes(){return{}}async update(e){return this.draw(e)}async draw(e){this.style.backgroundColor="#fff";let t=await e.to_csv();this.innerHTML=`<pre style='margin:0;overflow:scroll;position:absolute;width:100%;height:100%'>${t}</pre>`}async clear(){this.innerHTML=""}async resize(){}async restyle(){}async save(){}async restore(){}async delete(){}};document.createElement("perspective-viewer-plugin").constructor===HTMLElement&&window.customElements.define("perspective-viewer-plugin",o);var i={};((e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})})(i,{ColumnDropDownElement:()=>q,CopyDropDownMenuElement:()=>Z,ExportDropDownMenuElement:()=>G,FilterDropDownElement:()=>Q,FunctionDropDownElement:()=>J,PerspectiveDebugPluginElement:()=>K,PerspectiveViewerElement:()=>ee,default:()=>oe,defineWebComponents:()=>U,getExprTKCommands:()=>W,initSync:()=>ne,registerPlugin:()=>X});var l=window.ClipboardItem,s=window.IntersectionObserver,c=window.ResizeObserver;var u,d=new Array(128).fill(void 0);function g(e){return d[e]}function p(e){return null==e}d.push(void 0,null,!0,!1);var _=null;function h(){return(null===_||0===_.byteLength)&&(_=new Float64Array(u.memory.buffer)),_}var b=null;function f(){return(null===b||0===b.byteLength)&&(b=new Int32Array(u.memory.buffer)),b}var m=0,w=null;function y(){return(null===w||0===w.byteLength)&&(w=new Uint8Array(u.memory.buffer)),w}var v=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},x="function"==typeof v.encodeInto?function(e,t){return v.encodeInto(e,t)}:function(e,t){let r=v.encode(e);return t.set(r),{read:e.length,written:r.length}};function S(e,t,r){if(void 0===r){let r=v.encode(e),n=t(r.length,1)>>>0;return y().subarray(n,n+r.length).set(r),m=r.length,n}let n=e.length,a=t(n,1)>>>0,o=y(),i=0;for(;i<n;i++){let t=e.charCodeAt(i);if(t>127)break;o[a+i]=t}if(i!==n){0!==i&&(e=e.slice(i)),a=r(a,n,n=i+3*e.length,1)>>>0;let t=y().subarray(a+i,a+n);i+=x(e,t).written}return m=i,a}var k=d.length;function C(e){k===d.length&&d.push(d.length+1);let t=k;return k=d[t],d[t]=e,t}var A=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};function E(e,t){return e>>>=0,A.decode(y().subarray(e,e+t))}function V(e){let t=g(e);return function(e){e<132||(d[e]=k,k=e)}(e),t}typeof TextDecoder<"u"&&A.decode();var P=null;function M(e){let t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){let t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){let t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){let t=e.length,r="[";t>0&&(r+=M(e[0]));for(let n=1;n<t;n++)r+=", "+M(e[n]);return r+="]",r}let r,n=/\[object ([^\]]+)\]/.exec(toString.call(e));if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function O(e,t,r,n){let a={a:e,b:t,cnt:1,dtor:r},o=function(){a.cnt++;try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(a.a,a.b,...t)}finally{0==--a.cnt&&(u.__wbindgen_export_2.get(a.dtor)(a.a,a.b),a.a=0)}};return o.original=a,o}function N(e,t,r){u.__wbindgen_export_3(e,t,C(r))}function L(e,t,r,n){let a={a:e,b:t,cnt:1,dtor:r},o=function(){a.cnt++;let e=a.a;a.a=0;try{for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n(e,a.b,...r)}finally{0==--a.cnt?u.__wbindgen_export_2.get(a.dtor)(e,a.b):a.a=e}};return o.original=a,o}function T(e,t,r){u.__wbindgen_export_4(e,t,C(r))}function z(e,t,r){return V(u.__wbindgen_export_5(e,t,C(r)))}function D(e,t){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.__wbindgen_export_6(n,e,t);var r=f()[n/4+0];if(f()[n/4+1])throw V(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}var R=128;function Y(e,t,r){try{u.__wbindgen_export_7(e,t,function(e){if(1==R)throw new Error("out of js stack");return d[--R]=e,R}(r))}finally{d[R++]=void 0}}function B(e,t){u.__wbindgen_export_8(e,t)}function j(e,t,r){u.__wbindgen_export_9(e,t,C(r))}var $=null;function I(){return(null===$||0===$.byteLength)&&($=new Uint32Array(u.memory.buffer)),$}function H(e,t){try{return e.apply(this,t)}catch(r){u.__wbindgen_export_11(C(r))}}function X(e){let t=S(e,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;u.registerPlugin(t,r)}function F(e,t){e>>>=0;let r=I().subarray(e/4,e/4+t),n=[];for(let a=0;a<r.length;a++)n.push(V(r[a]));return n}function W(){try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.getExprTKCommands(a);var e=f()[a/4+0],t=f()[a/4+1],r=f()[a/4+2];if(f()[a/4+3])throw V(r);var n=F(e,t).slice();return u.__wbindgen_export_10(e,4*t),n}finally{u.__wbindgen_add_to_stack_pointer(16)}}function U(){u.defineWebComponents()}var q=class{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_columndropdownelement_free(e)}},Z=class{static __wrap(e){e>>>=0;let t=Object.create(Z.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_copydropdownmenuelement_free(e)}constructor(e){let t=u.copydropdownmenuelement_new(C(e));return Z.__wrap(t)}open(e){u.copydropdownmenuelement_open(this.__wbg_ptr,C(e))}hide(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.copydropdownmenuelement_hide(t,this.__wbg_ptr);var e=f()[t/4+0];if(f()[t/4+1])throw V(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}unsafe_set_model(e){u.copydropdownmenuelement_unsafe_set_model(this.__wbg_ptr,e)}connected_callback(){u.copydropdownmenuelement_connected_callback(this.__wbg_ptr)}},G=class{static __wrap(e){e>>>=0;let t=Object.create(G.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_exportdropdownmenuelement_free(e)}constructor(e){let t=u.copydropdownmenuelement_new(C(e));return G.__wrap(t)}open(e){u.exportdropdownmenuelement_open(this.__wbg_ptr,C(e))}hide(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.exportdropdownmenuelement_hide(t,this.__wbg_ptr);var e=f()[t/4+0];if(f()[t/4+1])throw V(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}unsafe_set_model(e){u.exportdropdownmenuelement_unsafe_set_model(this.__wbg_ptr,e)}connected_callback(){u.copydropdownmenuelement_connected_callback(this.__wbg_ptr)}},Q=class{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_filterdropdownelement_free(e)}},J=class{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_functiondropdownelement_free(e)}},K=class{static __wrap(e){e>>>=0;let t=Object.create(K.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectivedebugpluginelement_free(e)}constructor(e){let t=u.perspectivedebugpluginelement_new(C(e));return K.__wrap(t)}get name(){let e,t;try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedebugpluginelement_name(a,this.__wbg_ptr);var r=f()[a/4+0],n=f()[a/4+1];return e=r,t=n,E(r,n)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_10(e,t,1)}}get select_mode(){let e,t;try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedebugpluginelement_select_mode(a,this.__wbg_ptr);var r=f()[a/4+0],n=f()[a/4+1];return e=r,t=n,E(r,n)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_10(e,t,1)}}get min_config_columns(){return V(u.perspectivedebugpluginelement_config_column_names(this.__wbg_ptr))}get config_column_names(){return V(u.perspectivedebugpluginelement_config_column_names(this.__wbg_ptr))}get plugin_attributes(){return V(u.perspectivedebugpluginelement_plugin_attributes(this.__wbg_ptr))}update(e){return V(u.perspectivedebugpluginelement_draw(this.__wbg_ptr,C(e)))}draw(e){return V(u.perspectivedebugpluginelement_draw(this.__wbg_ptr,C(e)))}clear(){return V(u.perspectivedebugpluginelement_clear(this.__wbg_ptr))}resize(){return V(u.perspectivedebugpluginelement_clear(this.__wbg_ptr))}restyle(){return V(u.perspectivedebugpluginelement_clear(this.__wbg_ptr))}save(){return V(u.perspectivedebugpluginelement_clear(this.__wbg_ptr))}restore(){return V(u.perspectivedebugpluginelement_clear(this.__wbg_ptr))}delete(){return V(u.perspectivedebugpluginelement_clear(this.__wbg_ptr))}connectedCallback(){u.copydropdownmenuelement_connected_callback(this.__wbg_ptr)}},ee=class{static __wrap(e){e>>>=0;let t=Object.create(ee.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectiveviewerelement_free(e)}constructor(e){let t=u.perspectiveviewerelement_new(C(e));return ee.__wrap(t)}connectedCallback(){u.copydropdownmenuelement_connected_callback(this.__wbg_ptr)}load(e){return V(u.perspectiveviewerelement_load(this.__wbg_ptr,C(e)))}delete(){return V(u.perspectiveviewerelement_delete(this.__wbg_ptr))}getView(){return V(u.perspectiveviewerelement_getView(this.__wbg_ptr))}getTable(e){return V(u.perspectiveviewerelement_getTable(this.__wbg_ptr,p(e)?16777215:e?1:0))}getRenderStats(){try{let r=u.__wbindgen_add_to_stack_pointer(-16);u.perspectiveviewerelement_getRenderStats(r,this.__wbg_ptr);var e=f()[r/4+0],t=f()[r/4+1];if(f()[r/4+2])throw V(t);return V(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}flush(){return V(u.perspectiveviewerelement_flush(this.__wbg_ptr))}restore(e){return V(u.perspectiveviewerelement_restore(this.__wbg_ptr,C(e)))}save(e){var t=p(e)?0:S(e,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;return V(u.perspectiveviewerelement_save(this.__wbg_ptr,t,r))}download(e){return V(u.perspectiveviewerelement_download(this.__wbg_ptr,p(e)?16777215:e?1:0))}copy(e){return V(u.perspectiveviewerelement_copy(this.__wbg_ptr,p(e)?16777215:e?1:0))}reset(e){return V(u.perspectiveviewerelement_reset(this.__wbg_ptr,p(e)?16777215:e?1:0))}notifyResize(e){return V(u.perspectiveviewerelement_notifyResize(this.__wbg_ptr,p(e)?16777215:e?1:0))}setAutoSize(e){u.perspectiveviewerelement_setAutoSize(this.__wbg_ptr,e)}setAutoPause(e){u.perspectiveviewerelement_setAutoPause(this.__wbg_ptr,e)}getEditPort(){try{let r=u.__wbindgen_add_to_stack_pointer(-16);u.perspectiveviewerelement_getEditPort(r,this.__wbg_ptr);var e=h()[r/8+0],t=f()[r/4+2];if(f()[r/4+3])throw V(t);return e}finally{u.__wbindgen_add_to_stack_pointer(16)}}restyleElement(){return V(u.perspectiveviewerelement_restyleElement(this.__wbg_ptr))}resetThemes(e){var t=p(e)?0:function(e,t){let r=t(4*e.length,4)>>>0,n=I();for(let a=0;a<e.length;a++)n[r/4+a]=C(e[a]);return m=e.length,r}(e,u.__wbindgen_export_0),r=m;return V(u.perspectiveviewerelement_resetThemes(this.__wbg_ptr,t,r))}setThrottle(e){u.perspectiveviewerelement_setThrottle(this.__wbg_ptr,!p(e),p(e)?0:e)}toggleConfig(e){return V(u.perspectiveviewerelement_toggleConfig(this.__wbg_ptr,p(e)?16777215:e?1:0))}getAllPlugins(){return V(u.perspectiveviewerelement_getAllPlugins(this.__wbg_ptr))}getPlugin(e){try{let o=u.__wbindgen_add_to_stack_pointer(-16);var t=p(e)?0:S(e,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;u.perspectiveviewerelement_getPlugin(o,this.__wbg_ptr,t,r);var n=f()[o/4+0],a=f()[o/4+1];if(f()[o/4+2])throw V(a);return V(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}unsafeGetModel(){return u.perspectiveviewerelement_unsafeGetModel(this.__wbg_ptr)}toggleColumnSettings(e){let t=S(e,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;return V(u.perspectiveviewerelement_toggleColumnSettings(this.__wbg_ptr,t,r))}openColumnSettings(e,t){var r=p(e)?0:S(e,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;return V(u.perspectiveviewerelement_openColumnSettings(this.__wbg_ptr,r,n,p(t)?16777215:t?1:0))}};function te(){let e={wbg:{}};return e.wbg.__wbindgen_in=function(e,t){return g(e)in g(t)},e.wbg.__wbindgen_number_get=function(e,t){let r=g(t),n="number"==typeof r?r:void 0;h()[e/8+1]=p(n)?0:n,f()[e/4+0]=!p(n)},e.wbg.__wbindgen_boolean_get=function(e){let t=g(e);return"boolean"==typeof t?t?1:0:2},e.wbg.__wbindgen_string_get=function(e,t){let r=g(t),n="string"==typeof r?r:void 0;var a=p(n)?0:S(n,u.__wbindgen_export_0,u.__wbindgen_export_1),o=m;f()[e/4+1]=o,f()[e/4+0]=a},e.wbg.__wbindgen_is_bigint=function(e){return"bigint"==typeof g(e)},e.wbg.__wbindgen_is_object=function(e){let t=g(e);return"object"==typeof t&&null!==t},e.wbg.__wbindgen_is_string=function(e){return"string"==typeof g(e)},e.wbg.__wbindgen_bigint_from_i64=function(e){return C(e)},e.wbg.__wbindgen_bigint_from_u64=function(e){return C(BigInt.asUintN(64,e))},e.wbg.__wbindgen_error_new=function(e,t){return C(new Error(E(e,t)))},e.wbg.__wbg_static_accessor_PSP_bbb2f336cce138d4=function(){return C(i)},e.wbg.__wbg_getminmax_573b277e1b28a80d=function(){return H((function(e,t){return C(g(e).get_min_max(V(t)))}),arguments)},e.wbg.__wbindgen_jsval_eq=function(e,t){return g(e)===g(t)},e.wbg.__wbindgen_string_new=function(e,t){return C(E(e,t))},e.wbg.__wbg_supportedValuesOf_31f10ef381366b42=function(e){return C(Intl.supportedValuesOf(g(e)))},e.wbg.__wbindgen_object_drop_ref=function(e){V(e)},e.wbg.__wbindgen_object_clone_ref=function(e){return C(g(e))},e.wbg.__wbindgen_is_undefined=function(e){return void 0===g(e)},e.wbg.__wbindgen_cb_drop=function(e){let t=V(e).original;return 1==t.cnt--&&(t.a=0,!0)},e.wbg.__wbindgen_as_number=function(e){return+g(e)},e.wbg.__wbg_restore_646846fdd9a23f49=function(e,t){g(e).restore(g(t))},e.wbg.__wbg_new_a9bb75328cd33dbf=function(e){return C(new l(g(e)))},e.wbg.__wbg_save_4f7490d1922179fd=function(e){return C(g(e).save())},e.wbg.__wbindgen_is_null=function(e){return null===g(e)},e.wbg.__wbg_contentRect_4546f8855940bb73=function(e){return C(g(e).contentRect)},e.wbg.__wbg_draw_2f7e9e3af46e7198=function(){return H((function(e,t,r,n,a,o,i){return C(g(e).draw(g(t),0===r?void 0:n>>>0,0===a?void 0:o>>>0,0!==i))}),arguments)},e.wbg.__wbg_update_c2967cf0d3197fbf=function(){return H((function(e,t,r,n,a,o,i){return C(g(e).update(g(t),0===r?void 0:n>>>0,0===a?void 0:o>>>0,0!==i))}),arguments)},e.wbg.__wbg_delete_05a48cef0dd080e9=function(e){g(e).delete()},e.wbg.__wbg_setrenderwarning_8bdb3c2ef53583b1=function(e,t){g(e).render_warning=0!==t},e.wbg.__wbg_size_33fd9d1f719866c8=function(){return H((function(e){return C(g(e).size())}),arguments)},e.wbg.__wbg_columns_9c757795caf8cf13=function(){return H((function(e){return C(g(e).columns())}),arguments)},e.wbg.__wbg_schema_b788dcba6abf443d=function(){return H((function(e){return C(g(e).schema())}),arguments)},e.wbg.__wbg_makeport_fa8310ae2bd874b4=function(){return H((function(e){return C(g(e).make_port())}),arguments)},e.wbg.__wbg_numtablerows_5773c87f32fa4b1e=function(e){return g(e).num_table_rows},e.wbg.__wbg_numtablecolumns_51b037df836e797f=function(e){return g(e).num_table_columns},e.wbg.__wbg_numviewrows_093833bcb35dc1dc=function(e){return g(e).num_view_rows},e.wbg.__wbg_numviewcolumns_f6df37df88c4b849=function(e){return g(e).num_view_columns},e.wbg.__wbg_errors_a2950c8dcb25b67a=function(e){return C(g(e).errors)},e.wbg.__wbg_tocolumns_bb59a5af8d7c7106=function(){return H((function(e){return C(g(e).to_columns())}),arguments)},e.wbg.__wbindgen_number_new=function(e){return C(e)},e.wbg.__wbg_new_a6612acb803d47eb=function(e){return C(new s(g(e)))},e.wbg.__wbg_observe_bd4bd91fb02ed6ee=function(e,t){g(e).observe(g(t))},e.wbg.__wbg_unobserve_3d000f20e8518a42=function(e,t){g(e).unobserve(g(t))},e.wbg.__wbg_isIntersecting_b7409bfaf8b4f76f=function(e){return g(e).isIntersecting},e.wbg.__wbg_onupdate_8c122efcbeed4b53=function(e,t){g(e).on_update(g(t))},e.wbg.__wbg_removeupdate_d5734b9c5f36a5c0=function(e,t){g(e).remove_update(g(t))},e.wbg.__wbg_expressionschema_0b0646778bbd86b3=function(e){return C(g(e).expression_schema)},e.wbg.__wbg_expressionalias_7e413dce9acbd9e4=function(e){return C(g(e).expression_alias)},e.wbg.__wbg_validateexpressions_6fc316c97ab6b869=function(){return H((function(e,t){return C(g(e).validate_expressions(V(t)))}),arguments)},e.wbg.__wbg_view_884d5c3d89e7d150=function(){return H((function(e,t){return C(g(e).view(g(t)))}),arguments)},e.wbg.__wbg_tocsv_8b200f6ae39f6991=function(){return H((function(e,t){return C(g(e).to_csv(V(t)))}),arguments)},e.wbg.__wbg_toarrow_0f2f991f2fff4dc8=function(){return H((function(e){return C(g(e).to_arrow())}),arguments)},e.wbg.__wbg_dimensions_9bc1070f768322ab=function(){return H((function(e){return C(g(e).dimensions())}),arguments)},e.wbg.__wbg_schema_3fcb46cc57068133=function(){return H((function(e){return C(g(e).schema())}),arguments)},e.wbg.__wbg_delete_8cbbd0d8b0ad4783=function(){return H((function(e){return C(g(e).delete())}),arguments)},e.wbg.__wbg_name_0a2912ad80512ba9=function(e,t){let r=S(g(t).name,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_category_fa3b318d1309a559=function(e,t){let r=g(t).category;var n=p(r)?0:S(r,u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;f()[e/4+1]=a,f()[e/4+0]=n},e.wbg.__wbg_maxcolumns_5f8a876dad27170c=function(e,t){let r=g(t).max_columns;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_maxcells_a23934ef9e7b8138=function(e,t){let r=g(t).max_cells;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_renderwarning_1e32434243ed0191=function(e){let t=g(e).render_warning;return p(t)?16777215:t?1:0},e.wbg.__wbg_selectmode_4d6e44d0e699179c=function(e){return C(g(e).select_mode)},e.wbg.__wbg_minconfigcolumns_12d5d53206ce7a3f=function(e,t){let r=g(t).min_config_columns;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_configcolumnnames_e5ac4a7f555c6d3f=function(e){let t=g(e).config_column_names;return p(t)?0:C(t)},e.wbg.__wbg_pluginattributes_20c3b6236e0e2804=function(e){let t=g(e).plugin_attributes;return p(t)?0:C(t)},e.wbg.__wbg_priority_69585a237c9746f1=function(e,t){let r=g(t).priority;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_restyle_68d89316a9aa95c6=function(){return H((function(e,t){return C(g(e).restyle(g(t)))}),arguments)},e.wbg.__wbg_resize_ff8b3d6d01ecf8b2=function(){return H((function(e){return C(g(e).resize())}),arguments)},e.wbg.__wbg_new_dab831866badf49c=function(e){return C(new c(g(e)))},e.wbg.__wbg_observe_c37c8e1591e0309f=function(e,t){g(e).observe(g(t))},e.wbg.__wbg_unobserve_25af46c625d81033=function(e,t){g(e).unobserve(g(t))},e.wbg.__wbg_bootstrap_bb6cb9f8bf2b7aa9=function(e,t,r,n,a,o){let i=function(e,t,r,n){let a=e[r],o=a.prototype;class i extends HTMLElement{constructor(){super(),this._instance=new a(this)}}let l=Object.getOwnPropertyNames(o);for(let s of l)"get"in Object.getOwnPropertyDescriptor(o,s)?Object.defineProperty(i.prototype,s,{get:function(){return this._instance[s]}}):Object.defineProperty(i.prototype,s,{value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._instance[s].call(this._instance,...t)}});for(let s of n)Object.defineProperty(i,s,{value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e[s].call(e,...r)}});customElements.define(t,i)}(g(e),E(t,r),E(n,a),V(o));return C(i)},e.wbg.__wbg_listenerid_6dcf1c62b7b7de58=function(e,t){let r=g(t).__yew_listener_id;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_setlistenerid_f2e783343fa0cec1=function(e,t){g(e).__yew_listener_id=t>>>0},e.wbg.__wbg_setsubtreeid_e1fab6b578c800cf=function(e,t){g(e).__yew_subtree_id=t>>>0},e.wbg.__wbg_setcachekey_75bcd45312087529=function(e,t){g(e).__yew_subtree_cache_key=t>>>0},e.wbg.__wbg_subtreeid_e80a1798fee782f9=function(e,t){let r=g(t).__yew_subtree_id;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_cachekey_b81c1aacc6a0645c=function(e,t){let r=g(t).__yew_subtree_cache_key;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return C(new Error)},e.wbg.__wbg_stack_658279fe44541cf6=function(e,t){let r=S(g(t).stack,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let r,n;try{r=e,n=t,console.error(E(e,t))}finally{u.__wbindgen_export_10(r,n,1)}},e.wbg.__wbindgen_jsval_loose_eq=function(e,t){return g(e)==g(t)},e.wbg.__wbg_String_917f38a1211cf44b=function(e,t){let r=S(String(g(t)),u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_getwithrefkey_3b3c46ba20582127=function(e,t){return C(g(e)[g(t)])},e.wbg.__wbg_set_8761474ad72b9bf1=function(e,t,r){g(e)[V(t)]=V(r)},e.wbg.__wbg_error_a526fb08a0205972=function(e,t){var r=F(e,t).slice();u.__wbindgen_export_10(e,4*t),console.error(...r)},e.wbg.__wbg_newwithu8arraysequence_6951fb5a516ffb36=function(){return H((function(e){return C(new Blob(g(e)))}),arguments)},e.wbg.__wbg_newwithstrsequenceandoptions_fd88a547f6d15707=function(){return H((function(e,t){return C(new Blob(g(e),g(t)))}),arguments)},e.wbg.__wbg_write_50931fbeecc46371=function(e,t){return C(g(e).write(g(t)))},e.wbg.__wbg_length_3179cc234ec61f82=function(e){return g(e).length},e.wbg.__wbg_item_951718a65579db41=function(e,t){let r=g(e).item(t>>>0);return p(r)?0:C(r)},e.wbg.__wbg_length_65d94e80342551ba=function(e){return g(e).length},e.wbg.__wbg_getPropertyValue_45480a940d0053a0=function(){return H((function(e,t,r,n){let a=S(g(t).getPropertyValue(E(r,n)),u.__wbindgen_export_0,u.__wbindgen_export_1),o=m;f()[e/4+1]=o,f()[e/4+0]=a}),arguments)},e.wbg.__wbg_item_039e5e5417c0ad11=function(e,t,r){let n=S(g(t).item(r>>>0),u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;f()[e/4+1]=a,f()[e/4+0]=n},e.wbg.__wbg_setProperty_b95ef63ab852879e=function(){return H((function(e,t,r,n,a){g(e).setProperty(E(t,r),E(n,a))}),arguments)},e.wbg.__wbg_instanceof_CssStyleRule_5c64447c7de8b7da=function(e){let t;try{t=g(e)instanceof CSSStyleRule}catch{t=!1}return t},e.wbg.__wbg_selectorText_d3da424c30db7e19=function(e,t){let r=S(g(t).selectorText,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_style_48dc15f7825db66e=function(e){return C(g(e).style)},e.wbg.__wbg_cssRules_a82a7edbf9263eac=function(){return H((function(e){return C(g(e).cssRules)}),arguments)},e.wbg.__wbg_new_8f6e8c9c9518a2bd=function(){return H((function(e,t){return C(new CustomEvent(E(e,t)))}),arguments)},e.wbg.__wbg_newwitheventinitdict_4e9208842a1bd356=function(){return H((function(e,t,r){return C(new CustomEvent(E(e,t),g(r)))}),arguments)},e.wbg.__wbg_setdropEffect_d191909e581a0725=function(e,t,r){g(e).dropEffect=E(t,r)},e.wbg.__wbg_setData_929b1326a597cfbe=function(){return H((function(e,t,r,n,a){g(e).setData(E(t,r),E(n,a))}),arguments)},e.wbg.__wbg_setDragImage_78a56a018979df82=function(e,t,r,n){g(e).setDragImage(g(t),r,n)},e.wbg.__wbg_readyState_92826bbbfb1989df=function(e,t){let r=S(g(t).readyState,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_body_674aec4c1c0910cd=function(e){let t=g(e).body;return p(t)?0:C(t)},e.wbg.__wbg_activeElement_2cf540415b6fcd5c=function(e){let t=g(e).activeElement;return p(t)?0:C(t)},e.wbg.__wbg_styleSheets_61fe3de30d6b9eb0=function(e){return C(g(e).styleSheets)},e.wbg.__wbg_fonts_a96627ca3c0cc00f=function(e){return C(g(e).fonts)},e.wbg.__wbg_createElement_4891554b28d3388b=function(){return H((function(e,t,r){return C(g(e).createElement(E(t,r)))}),arguments)},e.wbg.__wbg_createElementNS_119acf9e82482041=function(){return H((function(e,t,r,n,a){return C(g(e).createElementNS(0===t?void 0:E(t,r),E(n,a)))}),arguments)},e.wbg.__wbg_createTextNode_2fd22cd7e543f938=function(e,t,r){return C(g(e).createTextNode(E(t,r)))},e.wbg.__wbg_width_e0c6b79d8cdd8897=function(e){return g(e).width},e.wbg.__wbg_height_bed51746e072a118=function(e){return g(e).height},e.wbg.__wbg_width_5728ff70a76f27ac=function(e){return g(e).width},e.wbg.__wbg_height_7fd80bb9bbf69d8c=function(e){return g(e).height},e.wbg.__wbg_top_98ff0408c018d25e=function(e){return g(e).top},e.wbg.__wbg_left_23a613d619fb4206=function(e){return g(e).left},e.wbg.__wbg_get_3c8b4af713d11e93=function(e,t,r,n){let a=g(t)[E(r,n)];var o=p(a)?0:S(a,u.__wbindgen_export_0,u.__wbindgen_export_1),i=m;f()[e/4+1]=i,f()[e/4+0]=o},e.wbg.__wbg_set_f614c140462d8c74=function(){return H((function(e,t,r,n,a){g(e)[E(t,r)]=E(n,a)}),arguments)},e.wbg.__wbg_delete_2f353eb7e557282d=function(e,t,r){delete g(e)[E(t,r)]},e.wbg.__wbg_add_e7de92885d30face=function(){return H((function(e,t){g(e).add(...g(t))}),arguments)},e.wbg.__wbg_add_3eafedc4b2a28db0=function(){return H((function(e,t,r){g(e).add(E(t,r))}),arguments)},e.wbg.__wbg_remove_65fa2c242ec681ef=function(){return H((function(e,t){g(e).remove(...g(t))}),arguments)},e.wbg.__wbg_remove_8ae45e50cb58bb66=function(){return H((function(e,t,r){g(e).remove(E(t,r))}),arguments)},e.wbg.__wbg_toggle_67753a6c894f758d=function(){return H((function(e,t,r){return g(e).toggle(E(t,r))}),arguments)},e.wbg.__wbg_dataTransfer_bac494821ce31837=function(e){let t=g(e).dataTransfer;return p(t)?0:C(t)},e.wbg.__wbg_instanceof_Element_4622f5da1249a3eb=function(e){let t;try{t=g(e)instanceof Element}catch{t=!1}return t},e.wbg.__wbg_namespaceURI_31718ed49b5343a3=function(e,t){let r=g(t).namespaceURI;var n=p(r)?0:S(r,u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;f()[e/4+1]=a,f()[e/4+0]=n},e.wbg.__wbg_tagName_5d48e5a3ca410385=function(e,t){let r=S(g(t).tagName,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_classList_5f2fc1d67656292e=function(e){return C(g(e).classList)},e.wbg.__wbg_scrollTop_5011470bb5e739a2=function(e){return g(e).scrollTop},e.wbg.__wbg_scrollLeft_ea915614eac6bbeb=function(e){return g(e).scrollLeft},e.wbg.__wbg_setscrollLeft_71b27cc3cbd7b6a7=function(e,t){g(e).scrollLeft=t},e.wbg.__wbg_clientWidth_51ec21e3189f5656=function(e){return g(e).clientWidth},e.wbg.__wbg_clientHeight_09ec0b524d59c367=function(e){return g(e).clientHeight},e.wbg.__wbg_setinnerHTML_b089587252408b67=function(e,t,r){g(e).innerHTML=E(t,r)},e.wbg.__wbg_outerHTML_f7749ceff37b5832=function(e,t){let r=S(g(t).outerHTML,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_children_27ed308801b57d3f=function(e){return C(g(e).children)},e.wbg.__wbg_attachShadow_6a91e6c017a447ba=function(){return H((function(e,t){return C(g(e).attachShadow(g(t)))}),arguments)},e.wbg.__wbg_getAttribute_3d8fcc9eaea35a17=function(e,t,r,n){let a=g(t).getAttribute(E(r,n));var o=p(a)?0:S(a,u.__wbindgen_export_0,u.__wbindgen_export_1),i=m;f()[e/4+1]=i,f()[e/4+0]=o},e.wbg.__wbg_getBoundingClientRect_ac9db8cf97ca8083=function(e){return C(g(e).getBoundingClientRect())},e.wbg.__wbg_hasAttribute_a7d05690680041c9=function(e,t,r){return g(e).hasAttribute(E(t,r))},e.wbg.__wbg_matches_716ab231f92ea8c6=function(){return H((function(e,t,r){return g(e).matches(E(t,r))}),arguments)},e.wbg.__wbg_releasePointerCapture_c36c2b5804654f8b=function(){return H((function(e,t){g(e).releasePointerCapture(t)}),arguments)},e.wbg.__wbg_removeAttribute_d8404da431968808=function(){return H((function(e,t,r){g(e).removeAttribute(E(t,r))}),arguments)},e.wbg.__wbg_setAttribute_e7e80b478b7b8b2f=function(){return H((function(e,t,r,n,a){g(e).setAttribute(E(t,r),E(n,a))}),arguments)},e.wbg.__wbg_setPointerCapture_e7c29336490bba19=function(){return H((function(e,t){g(e).setPointerCapture(t)}),arguments)},e.wbg.__wbg_toggleAttribute_a74de5e50b5cae82=function(){return H((function(e,t,r,n){return g(e).toggleAttribute(E(t,r),0!==n)}),arguments)},e.wbg.__wbg_target_f171e89c61e2bccf=function(e){let t=g(e).target;return p(t)?0:C(t)},e.wbg.__wbg_bubbles_63572b91f3885ef1=function(e){return g(e).bubbles},e.wbg.__wbg_cancelBubble_90d1c3aa2a76cbeb=function(e){return g(e).cancelBubble},e.wbg.__wbg_composedPath_cf1bb5b8bcff496f=function(e){return C(g(e).composedPath())},e.wbg.__wbg_preventDefault_24104f3f0a54546a=function(e){g(e).preventDefault()},e.wbg.__wbg_stopPropagation_55539cfa2506c867=function(e){g(e).stopPropagation()},e.wbg.__wbg_addEventListener_5651108fc3ffeb6e=function(){return H((function(e,t,r,n){g(e).addEventListener(E(t,r),g(n))}),arguments)},e.wbg.__wbg_addEventListener_a5963e26cd7b176b=function(){return H((function(e,t,r,n,a){g(e).addEventListener(E(t,r),g(n),g(a))}),arguments)},e.wbg.__wbg_dispatchEvent_a622a6455be582eb=function(){return H((function(e,t){return g(e).dispatchEvent(g(t))}),arguments)},e.wbg.__wbg_removeEventListener_5de660c02ed784e4=function(){return H((function(e,t,r,n){g(e).removeEventListener(E(t,r),g(n))}),arguments)},e.wbg.__wbg_instanceof_FontFace_490eb4a907ee634b=function(e){let t;try{t=g(e)instanceof FontFace}catch{t=!1}return t},e.wbg.__wbg_family_d28cb65d31f2cd13=function(e,t){let r=S(g(t).family,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_weight_5a05e0b24e1dbc22=function(e,t){let r=S(g(t).weight,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_loaded_8b7295ea3d9a264f=function(){return H((function(e){return C(g(e).loaded)}),arguments)},e.wbg.__wbg_values_c8fb3ce467f0661c=function(e){return C(g(e).values())},e.wbg.__wbg_next_2f195e2857296bee=function(){return H((function(e){return C(g(e).next())}),arguments)},e.wbg.__wbg_item_3364fbfadbf2cf08=function(e,t){let r=g(e).item(t>>>0);return p(r)?0:C(r)},e.wbg.__wbg_getwithindex_a41abfefef0f0eb7=function(e,t){let r=g(e)[t>>>0];return p(r)?0:C(r)},e.wbg.__wbg_scrollTop_9e5ce77431551404=function(e){return g(e).scrollTop},e.wbg.__wbg_setscrollTop_3ac526446d755a1e=function(e,t){g(e).scrollTop=t},e.wbg.__wbg_dataset_6b4e19567ec0651f=function(e){return C(g(e).dataset)},e.wbg.__wbg_style_3801009b2339aa94=function(e){return C(g(e).style)},e.wbg.__wbg_offsetParent_290832c400c7cc6c=function(e){let t=g(e).offsetParent;return p(t)?0:C(t)},e.wbg.__wbg_offsetWidth_4e9930121c69297f=function(e){return g(e).offsetWidth},e.wbg.__wbg_offsetHeight_aa809a38421d42e3=function(e){return g(e).offsetHeight},e.wbg.__wbg_blur_53431c003c82bf53=function(){return H((function(e){g(e).blur()}),arguments)},e.wbg.__wbg_click_9f2ce0ac84b1ce73=function(e){g(e).click()},e.wbg.__wbg_focus_dbcbbbb2a04c0e1f=function(){return H((function(e){g(e).focus()}),arguments)},e.wbg.__wbg_checked_5ccb3a66eb054121=function(e){return g(e).checked},e.wbg.__wbg_setchecked_e5a50baea447b8a8=function(e,t){g(e).checked=0!==t},e.wbg.__wbg_value_9423da9d988ee8cf=function(e,t){let r=S(g(t).value,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_setvalue_1f95e61cbc382f7f=function(e,t,r){g(e).value=E(t,r)},e.wbg.__wbg_selectedIndex_bceec31ccc0d7767=function(e){return g(e).selectedIndex},e.wbg.__wbg_setvalue_4c8843ef308f3553=function(e,t,r){g(e).value=E(t,r)},e.wbg.__wbg_value_3c5f08ffc2b7d6f9=function(e,t){let r=S(g(t).value,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbg_setvalue_0dc100d4b9908028=function(e,t,r){g(e).value=E(t,r)},e.wbg.__wbg_setselectionStart_517073c440938d81=function(){return H((function(e,t,r){g(e).selectionStart=0===t?void 0:r>>>0}),arguments)},e.wbg.__wbg_selectionEnd_4a7befb6ce3bda9a=function(){return H((function(e,t){let r=g(t).selectionEnd;f()[e/4+1]=p(r)?0:r,f()[e/4+0]=!p(r)}),arguments)},e.wbg.__wbg_setselectionEnd_52811328cd685103=function(){return H((function(e,t,r){g(e).selectionEnd=0===t?void 0:r>>>0}),arguments)},e.wbg.__wbg_keyCode_dfa86be31f5ef90c=function(e){return g(e).keyCode},e.wbg.__wbg_shiftKey_48e8701355d8e2d4=function(e){return g(e).shiftKey},e.wbg.__wbg_clientX_1a480606ab0cabaa=function(e){return g(e).clientX},e.wbg.__wbg_clientY_9c7878f7faf3900f=function(e){return g(e).clientY},e.wbg.__wbg_offsetX_5a58f16f6c3a41b6=function(e){return g(e).offsetX},e.wbg.__wbg_offsetY_c45b4956f6429a95=function(e){return g(e).offsetY},e.wbg.__wbg_shiftKey_8a070ab6169b5fa4=function(e){return g(e).shiftKey},e.wbg.__wbg_button_7a095234b69de930=function(e){return g(e).button},e.wbg.__wbg_relatedTarget_41b8cc5c499518af=function(e){let t=g(e).relatedTarget;return p(t)?0:C(t)},e.wbg.__wbg_clipboard_47d5c6d7496034ae=function(e){let t=g(e).clipboard;return p(t)?0:C(t)},e.wbg.__wbg_isConnected_584a7a7119428e2c=function(e){return g(e).isConnected},e.wbg.__wbg_parentNode_9e53f8b17eb98c9d=function(e){let t=g(e).parentNode;return p(t)?0:C(t)},e.wbg.__wbg_parentElement_c75962bc9997ea5f=function(e){let t=g(e).parentElement;return p(t)?0:C(t)},e.wbg.__wbg_childNodes_64dab37cf9d252dd=function(e){return C(g(e).childNodes)},e.wbg.__wbg_lastChild_0cee692010bac6c2=function(e){let t=g(e).lastChild;return p(t)?0:C(t)},e.wbg.__wbg_nextSibling_304d9aac7c2774ae=function(e){let t=g(e).nextSibling;return p(t)?0:C(t)},e.wbg.__wbg_setnodeValue_d1c8382910b45e04=function(e,t,r){g(e).nodeValue=0===t?void 0:E(t,r)},e.wbg.__wbg_textContent_c5d9e21ee03c63d4=function(e,t){let r=g(t).textContent;var n=p(r)?0:S(r,u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;f()[e/4+1]=a,f()[e/4+0]=n},e.wbg.__wbg_settextContent_28d80502cf08bde7=function(e,t,r){g(e).textContent=0===t?void 0:E(t,r)},e.wbg.__wbg_appendChild_51339d4cde00ee22=function(){return H((function(e,t){return C(g(e).appendChild(g(t)))}),arguments)},e.wbg.__wbg_cloneNode_1f7cce4ea8b708e2=function(){return H((function(e){return C(g(e).cloneNode())}),arguments)},e.wbg.__wbg_cloneNode_270bc5a29f27e929=function(){return H((function(e,t){return C(g(e).cloneNode(0!==t))}),arguments)},e.wbg.__wbg_contains_fab0394bee511df3=function(e,t){return g(e).contains(g(t))},e.wbg.__wbg_getRootNode_a048b91714805811=function(e){return C(g(e).getRootNode())},e.wbg.__wbg_insertBefore_ffa01d4b747c95fc=function(){return H((function(e,t,r){return C(g(e).insertBefore(g(t),g(r)))}),arguments)},e.wbg.__wbg_removeChild_973429f368206138=function(){return H((function(e,t){return C(g(e).removeChild(g(t)))}),arguments)},e.wbg.__wbg_getEntriesByName_ede90ef3e380dfc0=function(e,t,r,n,a){return C(g(e).getEntriesByName(E(t,r),E(n,a)))},e.wbg.__wbg_mark_5fe2e199adb6244e=function(){return H((function(e,t,r){g(e).mark(E(t,r))}),arguments)},e.wbg.__wbg_measure_1200cbb479d26c69=function(){return H((function(e,t,r,n,a){g(e).measure(E(t,r),E(n,a))}),arguments)},e.wbg.__wbg_now_0cfdc90c97d0c24b=function(e){return g(e).now()},e.wbg.__wbg_startTime_f4237cec7cb73530=function(e){return g(e).startTime},e.wbg.__wbg_pointerId_701aab7b4fb073ff=function(e){return g(e).pointerId},e.wbg.__wbg_instanceof_ShadowRoot_b64337370f59fe2d=function(e){let t;try{t=g(e)instanceof ShadowRoot}catch{t=!1}return t},e.wbg.__wbg_host_e1c47c33975060d3=function(e){return C(g(e).host)},e.wbg.__wbg_length_f0d60728a0b63310=function(e){return g(e).length},e.wbg.__wbg_item_130a058fb0686ec7=function(e,t){let r=g(e).item(t>>>0);return p(r)?0:C(r)},e.wbg.__wbg_which_c9430257b4adad75=function(e){return g(e).which},e.wbg.__wbg_createObjectURL_d82f2880bada6a1d=function(){return H((function(e,t){let r=S(URL.createObjectURL(g(t)),u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r}),arguments)},e.wbg.__wbg_instanceof_Window_9029196b662bc42a=function(e){let t;try{t=g(e)instanceof Window}catch{t=!1}return t},e.wbg.__wbg_document_f7ace2b956f30a4f=function(e){let t=g(e).document;return p(t)?0:C(t)},e.wbg.__wbg_navigator_7c9103698acde322=function(e){return C(g(e).navigator)},e.wbg.__wbg_innerWidth_ebe07ce5463ff293=function(){return H((function(e){return C(g(e).innerWidth)}),arguments)},e.wbg.__wbg_innerHeight_2dd06d8cf68f1d7d=function(){return H((function(e){return C(g(e).innerHeight)}),arguments)},e.wbg.__wbg_performance_2c295061c8b01e0b=function(e){let t=g(e).performance;return p(t)?0:C(t)},e.wbg.__wbg_getComputedStyle_09fd3af3edcbbc36=function(){return H((function(e,t){let r=g(e).getComputedStyle(g(t));return p(r)?0:C(r)}),arguments)},e.wbg.__wbg_get_cb7c1c2da725c920=function(e,t,r){let n=g(e)[E(t,r)];return p(n)?0:C(n)},e.wbg.__wbg_requestAnimationFrame_d082200514b6674d=function(){return H((function(e,t){return g(e).requestAnimationFrame(g(t))}),arguments)},e.wbg.__wbg_setTimeout_eb1a0d116c26d9f6=function(){return H((function(e,t,r){return g(e).setTimeout(g(t),r)}),arguments)},e.wbg.__wbg_debug_9a6b3243fbbebb61=function(e){console.debug(g(e))},e.wbg.__wbg_debug_9b8701f894da9929=function(e,t,r,n){console.debug(g(e),g(t),g(r),g(n))},e.wbg.__wbg_error_788ae33f81d3b84b=function(e){console.error(g(e))},e.wbg.__wbg_error_cc121a8b7a240029=function(e,t,r){console.error(g(e),g(t),g(r))},e.wbg.__wbg_error_d9bce418caafb712=function(e,t,r,n){console.error(g(e),g(t),g(r),g(n))},e.wbg.__wbg_info_2e30e8204b29d91d=function(e){console.info(g(e))},e.wbg.__wbg_info_bb52f40b06f679de=function(e,t,r,n){console.info(g(e),g(t),g(r),g(n))},e.wbg.__wbg_trace_2fe09a8becaefa14=function(e){console.trace(g(e))},e.wbg.__wbg_trace_8f88b836b1876a39=function(e,t,r,n){console.trace(g(e),g(t),g(r),g(n))},e.wbg.__wbg_warn_d60e832f9882c1b2=function(e){console.warn(g(e))},e.wbg.__wbg_warn_dfc0e0cf544a13bd=function(e,t,r,n){console.warn(g(e),g(t),g(r),g(n))},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof g(e)},e.wbg.__wbg_self_1ff1d729e9aae938=function(){return H((function(){return C(self.self)}),arguments)},e.wbg.__wbg_window_5f4faef6c12b79ec=function(){return H((function(){return C(window.window)}),arguments)},e.wbg.__wbg_globalThis_1d39714405582d3c=function(){return H((function(){return C(globalThis.globalThis)}),arguments)},e.wbg.__wbg_global_651f05c6a0944d1c=function(){return H((function(){return C(r.g.global)}),arguments)},e.wbg.__wbg_newnoargs_581967eacc0e2604=function(e,t){return C(new Function(E(e,t)))},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return g(e).length},e.wbg.__wbg_new_898a68150f225f2e=function(){return C(new Array)},e.wbg.__wbg_new_56693dbed0c32988=function(){return C(new Map)},e.wbg.__wbg_next_526fc47e980da008=function(e){return C(g(e).next)},e.wbg.__wbg_value_1695675138684bd5=function(e){return C(g(e).value)},e.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return C(Symbol.iterator)},e.wbg.__wbg_new_b51585de1b234aff=function(){return C(new Object)},e.wbg.__wbg_new_520d435cdd007a3c=function(e,t){return C(new Intl.DateTimeFormat(g(e),g(t)))},e.wbg.__wbg_at_f175831507f8dd5a=function(e,t){return C(g(e).at(t))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return C(g(e)[t>>>0])},e.wbg.__wbg_set_502d29070ea18557=function(e,t,r){g(e)[t>>>0]=V(r)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return C(Array.from(g(e)))},e.wbg.__wbg_isArray_4c24b343cb13cfb1=function(e){return Array.isArray(g(e))},e.wbg.__wbg_push_ca1c26067ef907ac=function(e,t){return g(e).push(g(t))},e.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(e){let t;try{t=g(e)instanceof ArrayBuffer}catch{t=!1}return t},e.wbg.__wbg_slice_bfe6611c590b4e68=function(e,t,r){return C(g(e).slice(t>>>0,r>>>0))},e.wbg.__wbg_instanceof_Error_ab19e20608ea43c7=function(e){let t;try{t=g(e)instanceof Error}catch{t=!1}return t},e.wbg.__wbg_message_48bacc5ea57d74ee=function(e){return C(g(e).message)},e.wbg.__wbg_call_cb65541d95d71282=function(){return H((function(e,t){return C(g(e).call(g(t)))}),arguments)},e.wbg.__wbg_call_01734de55d61e11d=function(){return H((function(e,t,r){return C(g(e).call(g(t),g(r)))}),arguments)},e.wbg.__wbg_set_bedc3d02d0f05eb0=function(e,t,r){return C(g(e).set(g(t),g(r)))},e.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return H((function(e){return C(g(e).next())}),arguments)},e.wbg.__wbg_done_5c1f01fb660d73b5=function(e){return g(e).done},e.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(e){return Number.isSafeInteger(g(e))},e.wbg.__wbg_getTimezoneOffset_8aee3445f323973e=function(e){return g(e).getTimezoneOffset()},e.wbg.__wbg_new_cd59bfc8881f487b=function(e){return C(new Date(g(e)))},e.wbg.__wbg_entries_e51f29c7bba0c054=function(e){return C(Object.entries(g(e)))},e.wbg.__wbg_is_205d914af04a8faa=function(e,t){return Object.is(g(e),g(t))},e.wbg.__wbg_keys_386d224d0262f361=function(e){return C(Object.keys(g(e)))},e.wbg.__wbg_get_97b561fb56f034b5=function(){return H((function(e,t){return C(Reflect.get(g(e),g(t)))}),arguments)},e.wbg.__wbg_has_c5fcd020291e56b8=function(){return H((function(e,t){return Reflect.has(g(e),g(t))}),arguments)},e.wbg.__wbg_set_092e06b0f9d71865=function(){return H((function(e,t,r){return Reflect.set(g(e),g(t),g(r))}),arguments)},e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return C(g(e).buffer)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return H((function(e){return C(JSON.stringify(g(e)))}),arguments)},e.wbg.__wbg_resolvedOptions_ca1f2808dccec127=function(e){return C(g(e).resolvedOptions())},e.wbg.__wbg_instanceof_Promise_0e98a5bf082e090f=function(e){let t;try{t=g(e)instanceof Promise}catch{t=!1}return t},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var r={a:e,b:t};let n=new Promise(((e,t)=>{let n=r.a;r.a=0;try{return function(e,t,r,n){u.__wbindgen_export_12(e,t,C(r),C(n))}(n,r.b,e,t)}finally{r.a=n}}));return C(n)}finally{r.a=r.b=0}},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return C(Promise.resolve(g(e)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return C(g(e).then(g(t)))},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,r){return C(g(e).then(g(t),g(r)))},e.wbg.__wbg_newwithbyteoffsetandlength_6da8e527659b86aa=function(e,t,r){return C(new Uint8Array(g(e),t>>>0,r>>>0))},e.wbg.__wbg_new_8125e318e6245eed=function(e){return C(new Uint8Array(g(e)))},e.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(e){let t;try{t=g(e)instanceof Uint8Array}catch{t=!1}return t},e.wbg.__wbg_buffer_f5b7059c439f330d=function(e){return C(g(e).buffer)},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return g(e).length},e.wbg.__wbg_byteLength_47d11fa79875dee3=function(e){return g(e).byteLength},e.wbg.__wbg_byteOffset_79dc6cc49d3d92d8=function(e){return g(e).byteOffset},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,r){g(e).set(g(t),r>>>0)},e.wbg.__wbindgen_bigint_get_as_i64=function(e,t){let r=g(t),n="bigint"==typeof r?r:void 0;((null===P||0===P.byteLength)&&(P=new BigInt64Array(u.memory.buffer)),P)[e/8+1]=p(n)?BigInt(0):n,f()[e/4+0]=!p(n)},e.wbg.__wbindgen_debug_string=function(e,t){let r=S(M(g(t)),u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;f()[e/4+1]=n,f()[e/4+0]=r},e.wbg.__wbindgen_throw=function(e,t){throw new Error(E(e,t))},e.wbg.__wbindgen_memory=function(){return C(u.memory)},e.wbg.__wbindgen_closure_wrapper4355=function(e,t,r){return C(O(e,t,44,N))},e.wbg.__wbindgen_closure_wrapper4357=function(e,t,r){return C(L(e,t,44,T))},e.wbg.__wbindgen_closure_wrapper4359=function(e,t,r){return C(L(e,t,44,T))},e.wbg.__wbindgen_closure_wrapper4361=function(e,t,r){return C(O(e,t,44,z))},e.wbg.__wbindgen_closure_wrapper4363=function(e,t,r){return C(L(e,t,46,D))},e.wbg.__wbindgen_closure_wrapper4365=function(e,t,r){return C(O(e,t,47,N))},e.wbg.__wbindgen_closure_wrapper10423=function(e,t,r){return C(O(e,t,2905,Y))},e.wbg.__wbindgen_closure_wrapper11401=function(e,t,r){return C(L(e,t,2984,B))},e.wbg.__wbindgen_closure_wrapper11424=function(e,t,r){return C(L(e,t,2988,j))},e}function re(e,t){return u=e.exports,ae.__wbindgen_wasm_module=t,P=null,_=null,b=null,$=null,w=null,u}function ne(e){if(void 0!==u)return u;let t=te();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),re(new WebAssembly.Instance(e,t),e)}async function ae(e){if(void 0!==u)return u;let t=te();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:r,module:n}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}let r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{let r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await e,t);return re(r,n)}var oe=ae;function ie(e,t){return function(r,n){let a=0;for(let o of t)if(o in r){if(a++>0)throw new Error(`Duplicate "${e}" fields`);r[e]=r[o],o!==e&&(delete r[o],n.warn&&console.warn(`Deprecated perspective attribute "${o}" renamed "${e}"`))}return r}}ie("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),ie("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),ie("filter",["filter","filters"]);window.addEventListener("unhandledrejection",(e=>{"View method cancelled"===e.reason?.message&&e.preventDefault()}));var le=async function(){let e=await n,t=(await async function(e){return e instanceof URL||"string"==typeof e?await WebAssembly.instantiateStreaming(fetch(e)):await WebAssembly.instantiate(e)}(e)).instance.exports,r=t.size(),a=t.offset(),o=new Uint8Array(t.memory.buffer).slice(a,a+r);return await oe(o),U(),i}(),se=class extends HTMLElement{constructor(){super(),this.__load_wasm()}async __load_wasm(){await le,void 0===this._instance&&(this._instance=new ee(this))}},ce=ee.prototype,ue=Object.getOwnPropertyNames(ce);for(let de of ue)Object.defineProperty(se.prototype,de,{value:async function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return await this.__load_wasm(),await this._instance[de].call(this._instance,...t)}});for(let de of["registerPlugin","getExprTKCommands"])Object.defineProperty(se,de,{value:async function(){let e=await le;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e[de].call(e,...r)}});customElements.define("perspective-viewer",se)}}]);